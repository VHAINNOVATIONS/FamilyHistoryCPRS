KIDS Distribution saved on Jun 10, 2016@13:37:09
FAMILY HISTORY
**KIDS**:KNR FAMILY HISTORY 1.0^

**INSTALL NAME**
KNR FAMILY HISTORY 1.0
"BLD",9160,0)
KNR FAMILY HISTORY 1.0^KNR FAMILY HISTORY^0^3160610^n
"BLD",9160,1,0)
^^1^1^3150909^
"BLD",9160,1,1,0)
INITIAL BUILD OF PROTOTYPE COMPLETED.
"BLD",9160,4,0)
^9.64PA^500017^9
"BLD",9160,4,500003,0)
500003
"BLD",9160,4,500003,222)
y^y^f^^^^n
"BLD",9160,4,500005,0)
500005
"BLD",9160,4,500005,222)
y^y^f^^n^^y^o^n
"BLD",9160,4,500007,0)
500007
"BLD",9160,4,500007,222)
y^y^f^^n^^y^o^n
"BLD",9160,4,500009,0)
500009
"BLD",9160,4,500009,222)
y^y^f^^n^^y^o^n
"BLD",9160,4,500011,0)
500011
"BLD",9160,4,500011,222)
y^y^f^^n^^y^o^n
"BLD",9160,4,500013,0)
500013
"BLD",9160,4,500013,222)
y^y^f^^n^^y^o^n
"BLD",9160,4,500015,0)
500015
"BLD",9160,4,500015,222)
y^y^f^^^^n
"BLD",9160,4,500017,0)
500017
"BLD",9160,4,500017,222)
y^y^f^^^^n
"BLD",9160,4,500019,0)
500019
"BLD",9160,4,500019,222)
y^y^f^^n^^y^o^y
"BLD",9160,4,"B",500003,500003)

"BLD",9160,4,"B",500005,500005)

"BLD",9160,4,"B",500007,500007)

"BLD",9160,4,"B",500009,500009)

"BLD",9160,4,"B",500011,500011)

"BLD",9160,4,"B",500013,500013)

"BLD",9160,4,"B",500015,500015)

"BLD",9160,4,"B",500017,500017)

"BLD",9160,4,"B",500019,500019)

"BLD",9160,6.3)
3
"BLD",9160,"KRN",0)
^9.67PA^779.2^20
"BLD",9160,"KRN",.4,0)
.4
"BLD",9160,"KRN",.4,"NM",0)
^9.68A^^
"BLD",9160,"KRN",.401,0)
.401
"BLD",9160,"KRN",.401,"NM",0)
^9.68A^^
"BLD",9160,"KRN",.402,0)
.402
"BLD",9160,"KRN",.402,"NM",0)
^9.68A^^
"BLD",9160,"KRN",.403,0)
.403
"BLD",9160,"KRN",.403,"NM",0)
^9.68A^^
"BLD",9160,"KRN",.5,0)
.5
"BLD",9160,"KRN",.5,"NM",0)
^9.68A^^
"BLD",9160,"KRN",.84,0)
.84
"BLD",9160,"KRN",.84,"NM",0)
^9.68A^^
"BLD",9160,"KRN",3.6,0)
3.6
"BLD",9160,"KRN",3.6,"NM",0)
^9.68A^^
"BLD",9160,"KRN",3.8,0)
3.8
"BLD",9160,"KRN",9.2,0)
9.2
"BLD",9160,"KRN",9.8,0)
9.8
"BLD",9160,"KRN",9.8,"NM",0)
^9.68A^10^10
"BLD",9160,"KRN",9.8,"NM",1,0)
KNRFHU^^0^B91089594
"BLD",9160,"KRN",9.8,"NM",2,0)
KNRFHU1^^0^B10570836
"BLD",9160,"KRN",9.8,"NM",3,0)
KNRFHU2^^0^B39294914
"BLD",9160,"KRN",9.8,"NM",4,0)
KNRFHU3^^0^B34395333
"BLD",9160,"KRN",9.8,"NM",5,0)
KNRFHU4^^0^B39563620
"BLD",9160,"KRN",9.8,"NM",6,0)
KNRFHU5^^0^B5256937
"BLD",9160,"KRN",9.8,"NM",7,0)
KNRFHU6^^0^B8323086
"BLD",9160,"KRN",9.8,"NM",8,0)
KNRFHU7^^0^B4348219
"BLD",9160,"KRN",9.8,"NM",9,0)
KNRFHU8^^0^B1211105
"BLD",9160,"KRN",9.8,"NM",10,0)
KNRFHU9^^0^B3797676
"BLD",9160,"KRN",9.8,"NM","B","KNRFHU",1)

"BLD",9160,"KRN",9.8,"NM","B","KNRFHU1",2)

"BLD",9160,"KRN",9.8,"NM","B","KNRFHU2",3)

"BLD",9160,"KRN",9.8,"NM","B","KNRFHU3",4)

"BLD",9160,"KRN",9.8,"NM","B","KNRFHU4",5)

"BLD",9160,"KRN",9.8,"NM","B","KNRFHU5",6)

"BLD",9160,"KRN",9.8,"NM","B","KNRFHU6",7)

"BLD",9160,"KRN",9.8,"NM","B","KNRFHU7",8)

"BLD",9160,"KRN",9.8,"NM","B","KNRFHU8",9)

"BLD",9160,"KRN",9.8,"NM","B","KNRFHU9",10)

"BLD",9160,"KRN",19,0)
19
"BLD",9160,"KRN",19,"NM",0)
^9.68A^^
"BLD",9160,"KRN",19.1,0)
19.1
"BLD",9160,"KRN",19.1,"NM",0)
^9.68A^^
"BLD",9160,"KRN",101,0)
101
"BLD",9160,"KRN",101,"NM",0)
^9.68A^^
"BLD",9160,"KRN",409.61,0)
409.61
"BLD",9160,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",9160,"KRN",771,0)
771
"BLD",9160,"KRN",771,"NM",0)
^9.68A^^
"BLD",9160,"KRN",779.2,0)
779.2
"BLD",9160,"KRN",779.2,"NM",0)
^9.68A^^
"BLD",9160,"KRN",870,0)
870
"BLD",9160,"KRN",8989.51,0)
8989.51
"BLD",9160,"KRN",8989.52,0)
8989.52
"BLD",9160,"KRN",8994,0)
8994
"BLD",9160,"KRN",8994,"NM",0)
^9.68A^19^19
"BLD",9160,"KRN",8994,"NM",1,0)
KNR ADD DISEASE^^0
"BLD",9160,"KRN",8994,"NM",2,0)
KNR ADD RELATIVE^^0
"BLD",9160,"KRN",8994,"NM",3,0)
KNR CREATE FH NOTE^^0
"BLD",9160,"KRN",8994,"NM",4,0)
KNR EDIT FH DATA^^0
"BLD",9160,"KRN",8994,"NM",5,0)
KNR FH CREATE PATIENT ENTRY^^0
"BLD",9160,"KRN",8994,"NM",6,0)
KNR FH GET COVER SHEET^^0
"BLD",9160,"KRN",8994,"NM",7,0)
KNR GET AGE^^0
"BLD",9160,"KRN",8994,"NM",8,0)
KNR GET DISEASE GROUPS^^0
"BLD",9160,"KRN",8994,"NM",9,0)
KNR GET ETHNICITY^^0
"BLD",9160,"KRN",8994,"NM",10,0)
KNR GET ONE GROUP^^0
"BLD",9160,"KRN",8994,"NM",11,0)
KNR GET PATIENT FH DATA^^0
"BLD",9160,"KRN",8994,"NM",12,0)
KNR GET RACE^^0
"BLD",9160,"KRN",8994,"NM",13,0)
KNR GET REL DISEASE TEXT^^0
"BLD",9160,"KRN",8994,"NM",14,0)
KNR GET RELATIONSHIPS^^0
"BLD",9160,"KRN",8994,"NM",15,0)
KNR GET RELATIVE DISEASES^^0
"BLD",9160,"KRN",8994,"NM",16,0)
KNR GET RELATIVES^^0
"BLD",9160,"KRN",8994,"NM",17,0)
KNR GETALL FAMILY HISTORY^^0
"BLD",9160,"KRN",8994,"NM",18,0)
KNR GETALL RELATIVES & DISEA^^0
"BLD",9160,"KRN",8994,"NM",19,0)
KNR TEST^^0
"BLD",9160,"KRN",8994,"NM","B","KNR ADD DISEASE",1)

"BLD",9160,"KRN",8994,"NM","B","KNR ADD RELATIVE",2)

"BLD",9160,"KRN",8994,"NM","B","KNR CREATE FH NOTE",3)

"BLD",9160,"KRN",8994,"NM","B","KNR EDIT FH DATA",4)

"BLD",9160,"KRN",8994,"NM","B","KNR FH CREATE PATIENT ENTRY",5)

"BLD",9160,"KRN",8994,"NM","B","KNR FH GET COVER SHEET",6)

"BLD",9160,"KRN",8994,"NM","B","KNR GET AGE",7)

"BLD",9160,"KRN",8994,"NM","B","KNR GET DISEASE GROUPS",8)

"BLD",9160,"KRN",8994,"NM","B","KNR GET ETHNICITY",9)

"BLD",9160,"KRN",8994,"NM","B","KNR GET ONE GROUP",10)

"BLD",9160,"KRN",8994,"NM","B","KNR GET PATIENT FH DATA",11)

"BLD",9160,"KRN",8994,"NM","B","KNR GET RACE",12)

"BLD",9160,"KRN",8994,"NM","B","KNR GET REL DISEASE TEXT",13)

"BLD",9160,"KRN",8994,"NM","B","KNR GET RELATIONSHIPS",14)

"BLD",9160,"KRN",8994,"NM","B","KNR GET RELATIVE DISEASES",15)

"BLD",9160,"KRN",8994,"NM","B","KNR GET RELATIVES",16)

"BLD",9160,"KRN",8994,"NM","B","KNR GETALL FAMILY HISTORY",17)

"BLD",9160,"KRN",8994,"NM","B","KNR GETALL RELATIVES & DISEA",18)

"BLD",9160,"KRN",8994,"NM","B","KNR TEST",19)

"BLD",9160,"KRN","B",.4,.4)

"BLD",9160,"KRN","B",.401,.401)

"BLD",9160,"KRN","B",.402,.402)

"BLD",9160,"KRN","B",.403,.403)

"BLD",9160,"KRN","B",.5,.5)

"BLD",9160,"KRN","B",.84,.84)

"BLD",9160,"KRN","B",3.6,3.6)

"BLD",9160,"KRN","B",3.8,3.8)

"BLD",9160,"KRN","B",9.2,9.2)

"BLD",9160,"KRN","B",9.8,9.8)

"BLD",9160,"KRN","B",19,19)

"BLD",9160,"KRN","B",19.1,19.1)

"BLD",9160,"KRN","B",101,101)

"BLD",9160,"KRN","B",409.61,409.61)

"BLD",9160,"KRN","B",771,771)

"BLD",9160,"KRN","B",779.2,779.2)

"BLD",9160,"KRN","B",870,870)

"BLD",9160,"KRN","B",8989.51,8989.51)

"BLD",9160,"KRN","B",8989.52,8989.52)

"BLD",9160,"KRN","B",8994,8994)

"BLD",9160,"QDEF")
^^^^NO^^^^NO^^NO
"BLD",9160,"QUES",0)
^9.62^^
"BLD",9160,"REQB",0)
^9.611^^
"DATA",500005,1,0)
AMERICAN INDIAN OR ALASKA NATIVE
"DATA",500005,2,0)
ASIAN
"DATA",500005,3,0)
BLACK OR AFRICAN AMERICAN
"DATA",500005,4,0)
DECLINED TO ANSWER
"DATA",500005,5,0)
NATIVE HAWIAN OR OTHER PACIFIC ISLANDER
"DATA",500005,6,0)
UNKNOWN BY PATIENT
"DATA",500005,7,0)
WHITE
"DATA",500007,1,0)
DECLINED TO ANSWER
"DATA",500007,2,0)
HISPANIC OR LATINO
"DATA",500007,3,0)
NOT HISPANIC OR LATINO
"DATA",500007,4,0)
UNKNOWN BY PATIENT
"DATA",500009,1,0)
CANCER
"DATA",500009,2,0)
ENDOCRINE DISORDERS
"DATA",500009,3,0)
GASTROINTESTINAL (GI) DISORDERS
"DATA",500009,4,0)
CARDIOVASCULAR DISORDERS
"DATA",500009,5,0)
KIDNEY DISORDERS
"DATA",500009,6,0)
NEUROPSYCHIATRIC DISORDERS
"DATA",500009,7,0)
PULMONARY DISEASE/CONDITIONS
"DATA",500009,8,0)
REPRODUCTIVE DISORDERS
"DATA",500009,9,0)
HEREDITARY DISORDERS
"DATA",500011,1,0)
BREAST CANCER
"DATA",500011,1,1,0)
^500011.02P^1^1
"DATA",500011,1,1,1,0)
1
"DATA",500011,2,0)
COLORECTAL CANCER
"DATA",500011,2,1,0)
^500011.02P^1^1
"DATA",500011,2,1,1,0)
1
"DATA",500011,3,0)
GASTRIC CANCER
"DATA",500011,3,1,0)
^500011.02P^1^1
"DATA",500011,3,1,1,0)
1
"DATA",500011,4,0)
KIDNEY CANCER
"DATA",500011,4,1,0)
^500011.02P^1^1
"DATA",500011,4,1,1,0)
1
"DATA",500011,5,0)
MELANOMA
"DATA",500011,5,1,0)
^500011.02P^1^1
"DATA",500011,5,1,1,0)
1
"DATA",500011,6,0)
OVARIAN CANCER
"DATA",500011,6,1,0)
^500011.02P^1^1
"DATA",500011,6,1,1,0)
1
"DATA",500011,7,0)
PANCREATIC CANCER
"DATA",500011,7,1,0)
^500011.02P^1^1
"DATA",500011,7,1,1,0)
1
"DATA",500011,8,0)
PROSTATE CANCER
"DATA",500011,8,1,0)
^500011.02P^1^1
"DATA",500011,8,1,1,0)
1
"DATA",500011,9,0)
THYROID CANCER
"DATA",500011,9,1,0)
^500011.02P^1^1
"DATA",500011,9,1,1,0)
1
"DATA",500011,10,0)
URINARY TRACT CANCER^BLADDER OR URETER
"DATA",500011,10,1,0)
^500011.02P^1^1
"DATA",500011,10,1,1,0)
1
"DATA",500011,11,0)
UTERINE CANCER^CAN INCLUDE ENDOMETRIAL
"DATA",500011,11,1,0)
^500011.02P^1^1
"DATA",500011,11,1,1,0)
1
"DATA",500011,12,0)
OTHER CANCER^SPECIFY TYPE OF CANCER IN COMMENT
"DATA",500011,12,1,0)
^500011.02P^1^1
"DATA",500011,12,1,1,0)
1
"DATA",500011,13,0)
NO CANCER^NEGATIVE RESPONSE TO CANCER QUESTION
"DATA",500011,13,1,0)
^500011.02P^1^1
"DATA",500011,13,1,1,0)
1
"DATA",500011,14,0)
UNKNOWN CANCER^PATIENT DOES NOT KNOW SPECIFIC TYPE OF CANCER
"DATA",500011,14,1,0)
^500011.02P^1^1
"DATA",500011,14,1,1,0)
1
"DATA",500011,15,0)
NOT RECORDED CANCER
"DATA",500011,15,1,0)
^500011.02P^1^1
"DATA",500011,15,1,1,0)
1
"DATA",500011,16,0)
DIABETES
"DATA",500011,16,1,0)
^500011.02P^1^1
"DATA",500011,16,1,1,0)
2
"DATA",500011,17,0)
THYROID DISEASE^CAN INCLUDE HYPERTHYROIDISM AND HYPOTHYROIDISM
"DATA",500011,17,1,0)
^500011.02P^1^1
"DATA",500011,17,1,1,0)
2
"DATA",500011,18,0)
OTHER ENDOCRINE DISORDER^SPECIFY TYPE OF ENDOCRINE DISORDER IN COMMENT
"DATA",500011,18,1,0)
^500011.02P^1^1
"DATA",500011,18,1,1,0)
2
"DATA",500011,19,0)
NO ENDOCRINE DISORDER
"DATA",500011,19,1,0)
^500011.02P^1^1
"DATA",500011,19,1,1,0)
2
"DATA",500011,20,0)
NOT RECORDED ENDOCRINE DISORDER
"DATA",500011,20,1,0)
^500011.02P^1^1
"DATA",500011,20,1,1,0)
2
"DATA",500011,21,0)
UNKNOWN ENDOCRINE DISORDER
"DATA",500011,21,1,0)
^500011.02P^1^1
"DATA",500011,21,1,1,0)
2
"DATA",500011,22,0)
10 OR MORE COLORECTAL POLYPS
"DATA",500011,22,1,0)
^500011.02P^1^1
"DATA",500011,22,1,1,0)
3
"DATA",500011,23,0)
INFLAMETORY BOWEL DISEASE^CAN INCLUDE: CROHN'S AND ULCERATIVE COLITIS
"DATA",500011,23,1,0)
^500011.02P^1^1
"DATA",500011,23,1,1,0)
3
"DATA",500011,24,0)
PANCREATITIS
"DATA",500011,24,1,0)
^500011.02P^1^1
"DATA",500011,24,1,1,0)
3
"DATA",500011,25,0)
OTHER GI DISORDER^SPECIFY TYPE OF GI DISORDER IN COMMENT
"DATA",500011,25,1,0)
^500011.02P^1^1
"DATA",500011,25,1,1,0)
3
"DATA",500011,26,0)
NO GI DISORDER^NEGATIVE RESPONSE
"DATA",500011,26,1,0)
^500011.02P^1^1
"DATA",500011,26,1,1,0)
3
"DATA",500011,27,0)
NOT RECORDED GI DISORDER
"DATA",500011,27,1,0)
^500011.02P^1^1
"DATA",500011,27,1,1,0)
3
"DATA",500011,28,0)
UNKNOWN GI DISORDER
"DATA",500011,28,1,0)
^500011.02P^1^1
"DATA",500011,28,1,1,0)
3
"DATA",500011,29,0)
ANEURYSM^BRAIN OR AORTIC
"DATA",500011,29,1,0)
^500011.02P^1^1
"DATA",500011,29,1,1,0)
4
"DATA",500011,30,0)
CARDIOMYOPATHY
"DATA",500011,30,1,0)
^500011.02P^1^1
"DATA",500011,30,1,1,0)
4
"DATA",500011,31,0)
CORONARY HEART DISEASE^HEART ATTACK, MYOCARDIAL INFARCTION, CORONARY ANGIOPLASTY, ANGINA
"DATA",500011,31,1,0)
^500011.02P^1^1
"DATA",500011,31,1,1,0)
4
"DATA",500011,32,0)
HEART FAILURE
"DATA",500011,32,1,0)
^500011.02P^1^1
"DATA",500011,32,1,1,0)
4
"DATA",500011,33,0)
STROKE^ALSO TIA/MINI STROKE
"DATA",500011,33,1,0)
^500011.02P^1^1
"DATA",500011,33,1,1,0)
4
"DATA",500011,34,0)
SUDDEN DEATH
"DATA",500011,34,1,0)
^500011.02P^1^1
"DATA",500011,34,1,1,0)
4
"DATA",500011,35,0)
OTHER CVD^SPECIFY THYPE OF CVD IN COMMENT
"DATA",500011,35,1,0)
^500011.02P^1^1
"DATA",500011,35,1,1,0)
4
"DATA",500011,36,0)
NO CVD^NO CARDIOVASCULAR DISEASE
"DATA",500011,36,1,0)
^500011.02P^1^1
"DATA",500011,36,1,1,0)
4
"DATA",500011,37,0)
UNKNOWN CVD
"DATA",500011,37,1,0)
^500011.02P^1^1
"DATA",500011,37,1,1,0)
4
"DATA",500011,38,0)
NOT RECORDED CVD
"DATA",500011,38,1,0)
^500011.02P^1^1
"DATA",500011,38,1,1,0)
4
"DATA",500011,39,0)
KIDNEY STONES
"DATA",500011,39,1,0)
^500011.02P^1^1
"DATA",500011,39,1,1,0)
5
"DATA",500011,40,0)
RENAL FAILURE
"DATA",500011,40,1,0)
^500011.02P^1^1
"DATA",500011,40,1,1,0)
5
"DATA",500011,41,0)
OTHER KIDNEY DISORDER^SPECIFY DISORDER IN COMMENT
"DATA",500011,41,1,0)
^500011.02P^1^1
"DATA",500011,41,1,1,0)
5
"DATA",500011,42,0)
NO KIDNEY DISORDER
"DATA",500011,42,1,0)
^500011.02P^1^1
"DATA",500011,42,1,1,0)
5
"DATA",500011,43,0)
UNKNOWN KIDNEY DISORDER
"DATA",500011,43,1,0)
^500011.02P^1^1
"DATA",500011,43,1,1,0)
5
"DATA",500011,44,0)
NOT RECORDED KIDNEY DISORDER
"DATA",500011,44,1,0)
^500011.02P^1^1
"DATA",500011,44,1,1,0)
5
"DATA",500011,45,0)
DEPRESSION^CAN INCLUDE BIPOLAR, UNIPOLAR OR DEPRESSION NOS
"DATA",500011,45,1,0)
^500011.02P^1^1
"DATA",500011,45,1,1,0)
6
"DATA",500011,46,0)
DEMENTIA^CAN INCLUDE ALZHEIMER
"DATA",500011,46,1,0)
^500011.02P^1^1
"DATA",500011,46,1,1,0)
6
"DATA",500011,47,0)
NO NEUROPSYCHIATRIC DISORDER
"DATA",500011,47,1,0)
^500011.02P^1^1
"DATA",500011,47,1,1,0)
6
"DATA",500011,48,0)
POST TRAUMATIC STRESS DISORDER^PTSD
"DATA",500011,48,1,0)
^500011.02P^1^1
"DATA",500011,48,1,1,0)
6
"DATA",500011,49,0)
OTHER NEUROPSYCHIATRIC DISORDER^SPECIFY IN COMMENT
"DATA",500011,49,1,0)
^500011.02P^1^1
"DATA",500011,49,1,1,0)
6
"DATA",500011,50,0)
UNKNOWN NEUROPSYCHIATRIC DISORDER
"DATA",500011,50,1,0)
^500011.02P^1^1
"DATA",500011,50,1,1,0)
6
"DATA",500011,51,0)
NOT RECORDED NEUROPSYCHIATRIC DISORDER
"DATA",500011,51,1,0)
^500011.02P^1^1
"DATA",500011,51,1,1,0)
6
"DATA",500011,52,0)
EPHYSEMA/COPD
"DATA",500011,52,1,0)
^500011.02P^1^1
"DATA",500011,52,1,1,0)
7
"DATA",500011,53,0)
OTHER PULMONARY DISORDER^SPECIFY IN COMMENT
"DATA",500011,53,1,0)
^500011.02P^1^1
"DATA",500011,53,1,1,0)
7
"DATA",500011,54,0)
UNKNOWN PULMONARY DISEASE/CONDITION
"DATA",500011,54,1,0)
^500011.02P^1^1
"DATA",500011,54,1,1,0)
7
"DATA",500011,55,0)
NOT RECORDED PULMONARY DISORDER
"DATA",500011,55,1,0)
^500011.02P^1^1
"DATA",500011,55,1,1,0)
7
"DATA",500011,56,0)
NO PULMONARY DISORDER
"DATA",500011,56,1,0)
^500011.02P^1^1
"DATA",500011,56,1,1,0)
7
"DATA",500011,57,0)
BIRTH DEFECTS
"DATA",500011,57,1,0)
^500011.02P^1^1
"DATA",500011,57,1,1,0)
8
"DATA",500011,58,0)
INFERTILITY
"DATA",500011,58,1,0)
^500011.02P^1^1
"DATA",500011,58,1,1,0)
8
"DATA",500011,59,0)
MENTAL RETARDATION
"DATA",500011,59,1,0)
^500011.02P^1^1
"DATA",500011,59,1,1,0)
8
"DATA",500011,60,0)
MULTIPLE MISCARRIAGE
"DATA",500011,60,1,0)
^500011.02P^1^1
"DATA",500011,60,1,1,0)
8
"DATA",500011,61,0)
OTHER REPRODUCTIVE DISORDERS^SPECIFY IN COMMENT
"DATA",500011,61,1,0)
^500011.02P^1^1
"DATA",500011,61,1,1,0)
8
"DATA",500011,62,0)
NO REPRODUCTIVE DISORDER
"DATA",500011,62,1,0)
^500011.02P^1^1
"DATA",500011,62,1,1,0)
8
"DATA",500011,63,0)
UNKNOWN REPRODUCTIVE DISORDER
"DATA",500011,63,1,0)
^500011.02P^1^1
"DATA",500011,63,1,1,0)
8
"DATA",500011,64,0)
NOT RECORDED REPRODUCTIVE DISORDER
"DATA",500011,64,1,0)
^500011.02P^1^1
"DATA",500011,64,1,1,0)
8
"DATA",500011,65,0)
ALPHA 1-ANTI-TRYPSIN DEFICIENCY
"DATA",500011,65,1,0)
^500011.02P^3^3
"DATA",500011,65,1,1,0)
9
"DATA",500011,65,1,2,0)
3
"DATA",500011,65,1,3,0)
7
"DATA",500011,66,0)
CYSTIC FIBROSIS
"DATA",500011,66,1,0)
^500011.02P^3^3
"DATA",500011,66,1,1,0)
9
"DATA",500011,66,1,2,0)
3
"DATA",500011,66,1,3,0)
7
"DATA",500011,67,0)
HEMOCHROMATOSIS
"DATA",500011,67,1,0)
^500011.02P^2^2
"DATA",500011,67,1,1,0)
9
"DATA",500011,67,1,2,0)
3
"DATA",500011,68,0)
HEREDITARY BREAST OVARIAN CANCER
"DATA",500011,68,1,0)
^500011.02P^2^2
"DATA",500011,68,1,1,0)
9
"DATA",500011,68,1,2,0)
1
"DATA",500011,69,0)
HUNTINGTON DISEASE
"DATA",500011,69,1,0)
^500011.02P^2^2
"DATA",500011,69,1,1,0)
9
"DATA",500011,69,1,2,0)
6
"DATA",500011,70,0)
LYNCH SYNDROME
"DATA",500011,70,1,0)
^500011.02P^2^2
"DATA",500011,70,1,1,0)
9
"DATA",500011,70,1,2,0)
1
"DATA",500011,71,0)
POLYCYSTIC KIDNEY DISEASE
"DATA",500011,71,1,0)
^500011.02P^2^2
"DATA",500011,71,1,1,0)
9
"DATA",500011,71,1,2,0)
5
"DATA",500011,72,0)
POLYPOSIS SYNDROME
"DATA",500011,72,1,0)
^500011.02P^2^2
"DATA",500011,72,1,1,0)
9
"DATA",500011,72,1,2,0)
3
"DATA",500011,73,0)
OTHER HEREDITARY DISORDER^SPECIFY IN COMMENT
"DATA",500011,73,1,0)
^500011.02P^1^1
"DATA",500011,73,1,1,0)
9
"DATA",500011,74,0)
NO HEREDITARY DISORDER
"DATA",500011,74,1,0)
^500011.02P^1^1
"DATA",500011,74,1,1,0)
9
"DATA",500011,75,0)
UNKNOWN HEREDITARY DISORDER
"DATA",500011,75,1,0)
^500011.02P^1^1
"DATA",500011,75,1,1,0)
9
"DATA",500011,76,0)
NOT RECORDED HEREDITARY DISORDER
"DATA",500011,76,1,0)
^500011.02P^1^1
"DATA",500011,76,1,1,0)
9
"DATA",500013,1,0)
SELF^F^1
"DATA",500013,2,0)
FATHER^F^3
"DATA",500013,3,0)
MOTHER^F^2
"DATA",500013,4,0)
BROTHER^F^10
"DATA",500013,5,0)
MATERNAL HALF-BROTHER^S^12
"DATA",500013,6,0)
PATERNAL HALF-BROTHER^S^13
"DATA",500013,7,0)
SISTER^F^6
"DATA",500013,8,0)
MATERNAL HALF-SISTER^S^8
"DATA",500013,9,0)
PATERNAL HALF-SISTER^S^9
"DATA",500013,10,0)
IDENTICAL TWIN SISTER^F^7
"DATA",500013,11,0)
IDENTICAL TWIN BROTHER^F^11
"DATA",500013,12,0)
MATERNAL AUNT^S^17
"DATA",500013,13,0)
PATERNAL AUNT^S^21
"DATA",500013,14,0)
MATERNAL GRANDFATHER^S^15
"DATA",500013,15,0)
MATERNAL GRANDMOTHER^S^14
"DATA",500013,16,0)
PATERNAL GRANDFATHER^S^19
"DATA",500013,17,0)
PATERNAL GRANDMOTHER^S^18
"DATA",500013,18,0)
MATERNAL UNCLE^S^16
"DATA",500013,19,0)
PATERNAL UNCLE^S^20
"DATA",500013,20,0)
DAUGHTER^F^4
"DATA",500013,21,0)
SON^F^5
"DATA",500013,22,0)
OTHER RELATIVE^S^22
"DATA",500019,1,0)
0-5
"DATA",500019,2,0)
06-10
"DATA",500019,3,0)
11-15
"DATA",500019,4,0)
16-20
"DATA",500019,5,0)
21-25
"DATA",500019,6,0)
26-30
"DATA",500019,7,0)
31-35
"DATA",500019,8,0)
36-40
"DATA",500019,9,0)
41-45
"DATA",500019,10,0)
46-50
"DATA",500019,11,0)
51-55
"DATA",500019,12,0)
56-60
"DATA",500019,13,0)
61-65
"DATA",500019,14,0)
66-70
"DATA",500019,15,0)
71-75
"DATA",500019,16,0)
76-80
"DATA",500019,17,0)
81-85
"DATA",500019,18,0)
86-90
"DATA",500019,19,0)
90+
"FIA",500003)
KNR FAMILY HISTORY
"FIA",500003,0)
^KNR(500003,
"FIA",500003,0,0)
500003P
"FIA",500003,0,1)
y^y^f^^^^n
"FIA",500003,0,10)

"FIA",500003,0,11)

"FIA",500003,0,"RLRO")

"FIA",500003,0,"VR")
1.0^KNR FAMILY HISTORY
"FIA",500003,500003)
0
"FIA",500005)
KNR FH RACE
"FIA",500005,0)
^KNR(500005,
"FIA",500005,0,0)
500005
"FIA",500005,0,1)
y^y^f^^n^^y^o^n
"FIA",500005,0,10)

"FIA",500005,0,11)

"FIA",500005,0,"RLRO")

"FIA",500005,0,"VR")
1.0^KNR FAMILY HISTORY
"FIA",500005,500005)
0
"FIA",500007)
KNR FH ETHNICITY
"FIA",500007,0)
^KNR(500007,
"FIA",500007,0,0)
500007
"FIA",500007,0,1)
y^y^f^^n^^y^o^n
"FIA",500007,0,10)

"FIA",500007,0,11)

"FIA",500007,0,"RLRO")

"FIA",500007,0,"VR")
1.0^KNR FAMILY HISTORY
"FIA",500007,500007)
0
"FIA",500009)
KNR FH DISEASE GROUP
"FIA",500009,0)
^KNR(500009,
"FIA",500009,0,0)
500009
"FIA",500009,0,1)
y^y^f^^n^^y^o^n
"FIA",500009,0,10)

"FIA",500009,0,11)

"FIA",500009,0,"RLRO")

"FIA",500009,0,"VR")
1.0^KNR FAMILY HISTORY
"FIA",500009,500009)
0
"FIA",500011)
KNR FH HERITABLE DISEASES/CONDITIONS
"FIA",500011,0)
^KNR(500011,
"FIA",500011,0,0)
500011
"FIA",500011,0,1)
y^y^f^^n^^y^o^n
"FIA",500011,0,10)

"FIA",500011,0,11)

"FIA",500011,0,"RLRO")

"FIA",500011,0,"VR")
1.0^KNR FAMILY HISTORY
"FIA",500011,500011)
0
"FIA",500011,500011.02)
0
"FIA",500013)
KNR FH RELATIONSHIP
"FIA",500013,0)
^KNR(500013,
"FIA",500013,0,0)
500013
"FIA",500013,0,1)
y^y^f^^n^^y^o^n
"FIA",500013,0,10)

"FIA",500013,0,11)

"FIA",500013,0,"RLRO")

"FIA",500013,0,"VR")
1.0^KNR FAMILY HISTORY
"FIA",500013,500013)
0
"FIA",500015)
KNR RELATIVE
"FIA",500015,0)
^KNR(500015,
"FIA",500015,0,0)
500015
"FIA",500015,0,1)
y^y^f^^^^n
"FIA",500015,0,10)

"FIA",500015,0,11)

"FIA",500015,0,"RLRO")

"FIA",500015,0,"VR")
1.0^KNR FAMILY HISTORY
"FIA",500015,500015)
0
"FIA",500017)
KNR RELATIVE DISEASES/CONDITIONS
"FIA",500017,0)
^KNR(500017,
"FIA",500017,0,0)
500017
"FIA",500017,0,1)
y^y^f^^^^n
"FIA",500017,0,10)

"FIA",500017,0,11)

"FIA",500017,0,"RLRO")

"FIA",500017,0,"VR")
1.0^KNR FAMILY HISTORY
"FIA",500017,500017)
0
"FIA",500019)
KNR FH AGE
"FIA",500019,0)
^KNR(500019,
"FIA",500019,0,0)
500019
"FIA",500019,0,1)
y^y^f^^n^^y^o^y
"FIA",500019,0,10)

"FIA",500019,0,11)

"FIA",500019,0,"RLRO")

"FIA",500019,0,"VR")
1.0^KNR FAMILY HISTORY
"FIA",500019,500019)
0
"KRN",8994,3459,-1)
0^19
"KRN",8994,3459,0)
KNR TEST^TEST^KNRFHU^2^P
"KRN",8994,3459,1,0)
^8994.01^7^7^3150216^^
"KRN",8994,3459,1,1,0)
THIS RPC IS DESIGNED TO TEST COMMUNICATIONS.  IT REQUIRES ONLY ONE 
"KRN",8994,3459,1,2,0)
PARAMETER "NUMBER" AS INPUT.  THE NUMBER DESIGNATED BY THAT PARAMETER IS 
"KRN",8994,3459,1,3,0)
MODIFIED AND RETURNED IN THE RESULTS ARRAY.
"KRN",8994,3459,1,4,0)
EXAMPLE:
"KRN",8994,3459,1,5,0)
RESULT(0)=NUMBER+2
"KRN",8994,3459,1,6,0)
RESULT(1)=NUMBER+3
"KRN",8994,3459,1,7,0)
RESULT(2)=NUMBER+4
"KRN",8994,3459,2,0)
^8994.02A^1^1
"KRN",8994,3459,2,1,0)
NUMBER^1^99^1^1
"KRN",8994,3459,2,1,1,0)
^8994.021^4^4^3150216^^
"KRN",8994,3459,2,1,1,1,0)
ANY NUMBER.  THAT NUMBER IS USED TO CREATE A RESULT ARRAY AS SHOWN BELOW.
"KRN",8994,3459,2,1,1,2,0)
RESULT(0)=NUMBER+2
"KRN",8994,3459,2,1,1,3,0)
RESULT(1)=NUMBER+3
"KRN",8994,3459,2,1,1,4,0)
RESULT(2)=NUMBER+4
"KRN",8994,3459,2,"B","NUMBER",1)

"KRN",8994,3459,2,"PARAMSEQ",1,1)

"KRN",8994,3459,3,0)
^8994.03^3^3^3150216^^
"KRN",8994,3459,3,1,0)
RESULT(0)=NUMBER+2
"KRN",8994,3459,3,2,0)
RESULT(1)=NUMBER+3
"KRN",8994,3459,3,3,0)
RESULT(2)=NUMBER+4
"KRN",8994,3460,-1)
0^5
"KRN",8994,3460,0)
KNR FH CREATE PATIENT ENTRY^CREATE^KNRFHU^2^P
"KRN",8994,3460,1,0)
^8994.01^7^7^3150408^^^
"KRN",8994,3460,1,1,0)
CREATES PATIENT ENTRY IN KNR FAMILY HISTORY FILE (#500003).  MULTIPLE 
"KRN",8994,3460,1,2,0)
ENTRIES FOR THE SAME PATIENT ARE NOT ALLOWED.  IF ENTRY ALREADY EXISTS 
"KRN",8994,3460,1,3,0)
RESULT(0)=2 WILL BE RETURNED.
"KRN",8994,3460,1,4,0)
AN ENTRY MUST EXIST IN THIS FILE BEFORE ENTRY OF RELATIVES (FILE 500015)
"KRN",8994,3460,1,5,0)
AND DISEASES (FILE 500017) ASSOCIATED WITH THOSE RELATIVES CAN TAKE PLACE.
"KRN",8994,3460,1,6,0)
IF AN ERROR OCCURS RESULT("ERROR") WILL BE RETURNED EQUAL TO THE TEXT OF
"KRN",8994,3460,1,7,0)
THE ERROR.
"KRN",8994,3460,2,0)
^8994.02A^7^7
"KRN",8994,3460,2,1,0)
KNRDFN^1^25^1^1
"KRN",8994,3460,2,1,1,0)
^8994.021^2^2^3150407^^^^
"KRN",8994,3460,2,1,1,1,0)
INTERNAL ENTRY NUMBER OF PATIENT IN THE KNR FAMILY HISTORY FILE (ALSO IEN 
"KRN",8994,3460,2,1,1,2,0)
OF PATIENT IN FILE #2 (PATIENT).
"KRN",8994,3460,2,2,0)
KNRJEWA^1^5^0^2
"KRN",8994,3460,2,2,1,0)
^8994.021^2^2^3150317^^^^
"KRN",8994,3460,2,2,1,1,0)
ANSWER TO JEWISH ANCESTRY QUESTION.  SET OF CODES Y=YES, N=NO, U=UNKNOWN, 
"KRN",8994,3460,2,2,1,2,0)
D=DECLINED TO ANSWER.
"KRN",8994,3460,2,3,0)
KNRDEF^1^5^0^3
"KRN",8994,3460,2,3,1,0)
^8994.021^4^4^3150317^^
"KRN",8994,3460,2,3,1,1,0)
ANSWER TO DOCUMENTATION DEFERRED REASON.  WHICH IS A SET OF CODES.
"KRN",8994,3460,2,3,1,2,0)
D=DECLINED TO PARTICIPATE, U=UNKNOWN FAMILY HISTORY, L=LIMITED LIFE
"KRN",8994,3460,2,3,1,3,0)
EXPECTANCY, A=ADOPTED FAMILY HISTORY UNKNOWN, T=INSUFFICIENT TIME DEFERRED
"KRN",8994,3460,2,3,1,4,0)
TO NEXT VISIT.
"KRN",8994,3460,2,4,0)
KNRDUZ^1^10^1^4
"KRN",8994,3460,2,4,1,0)
^^1^1^3150216^
"KRN",8994,3460,2,4,1,1,0)
DUZ/IEN NUMBER OF USER CREATING THIS RECORD.
"KRN",8994,3460,2,5,0)
KNRCOMM^1^80^0^5
"KRN",8994,3460,2,5,1,0)
^8994.021^1^1^3150408^^^^
"KRN",8994,3460,2,5,1,1,0)
FREE TEXT COMMENT ON THIS PATIENT.  MAXIMUM OF 80 CHARACTERS.
"KRN",8994,3460,2,6,0)
KNRRACE^1^10^0^6
"KRN",8994,3460,2,6,1,0)
^8994.021^1^1^3150317^^^^
"KRN",8994,3460,2,6,1,1,0)
INTERNAL ENTRY NUMBER (IEN) OF RACE FILE ENTRY FOR THIS PATIENT.
"KRN",8994,3460,2,7,0)
KNRETH^1^10^0^7
"KRN",8994,3460,2,7,1,0)
^8994.021^1^1^3150408^^^^
"KRN",8994,3460,2,7,1,1,0)
NUMBER/POINTER (IEN) TO KNR FH ETHNICITY FILE (#500007).  
"KRN",8994,3460,2,"B","KNRCOMM",5)

"KRN",8994,3460,2,"B","KNRDEF",3)

"KRN",8994,3460,2,"B","KNRDFN",1)

"KRN",8994,3460,2,"B","KNRDUZ",4)

"KRN",8994,3460,2,"B","KNRETH",7)

"KRN",8994,3460,2,"B","KNRJEWA",2)

"KRN",8994,3460,2,"B","KNRRACE",6)

"KRN",8994,3460,2,"PARAMSEQ",1,1)

"KRN",8994,3460,2,"PARAMSEQ",2,2)

"KRN",8994,3460,2,"PARAMSEQ",3,3)

"KRN",8994,3460,2,"PARAMSEQ",4,4)

"KRN",8994,3460,2,"PARAMSEQ",5,5)

"KRN",8994,3460,2,"PARAMSEQ",6,6)

"KRN",8994,3460,2,"PARAMSEQ",7,7)

"KRN",8994,3460,3,0)
^8994.03^6^6^3150408^^^^
"KRN",8994,3460,3,1,0)
RESULT(0)=1 IF ENTRY CREATION WAS SUCCESSFUL.  RESULT(0)=0 IF CREATION OF 
"KRN",8994,3460,3,2,0)
ENTRY WAS NOT SUCCESSFUL.  IF AN ERROR OCCURS IN THE CALL TO THE FILEMAN 
"KRN",8994,3460,3,3,0)
API, RESULT("ERROR") WILL BE RETURNED EQUAL TO THE TEXT OF THE ERROR.
"KRN",8994,3460,3,4,0)
IF AN ENTRY ALREADY EXISTS FOR THE PATIENT DUPLICATE ENTRIES ARE NOT
"KRN",8994,3460,3,5,0)
ALLOWED AND RESULT(0)=2 AND RESULT("ERROR")="DUPLICATE ENTRY" WILL BE
"KRN",8994,3460,3,6,0)
RETURNED.
"KRN",8994,3461,-1)
0^11
"KRN",8994,3461,0)
KNR GET PATIENT FH DATA^GETS^KNRFHU^2^P
"KRN",8994,3461,1,0)
^^1^1^3150216^
"KRN",8994,3461,1,1,0)
GETS CONTENTS OF KNR FAMILY HISTORY PATIENT FILE FOR ONE PATIENT.
"KRN",8994,3461,2,0)
^8994.02A^1^1
"KRN",8994,3461,2,1,0)
DFN^1^12^1^1
"KRN",8994,3461,2,1,1,0)
^^2^2^3150216^
"KRN",8994,3461,2,1,1,1,0)
INTERNAL ENTRY NUMBER OF PATIENT IN KNR FAMILY HISTORY PATIENT FILE 
"KRN",8994,3461,2,1,1,2,0)
(500003).  
"KRN",8994,3461,2,"B","DFN",1)

"KRN",8994,3461,2,"PARAMSEQ",1,1)

"KRN",8994,3461,3,0)
^^2^2^3150216^
"KRN",8994,3461,3,1,0)
AN ARRAY OF THE EXTERNAL (HUMAN READABLE) CONTENTS OF THE PATIENT'S ENTRY 
"KRN",8994,3461,3,2,0)
WITH FIELD NUMBERS.
"KRN",8994,3462,-1)
0^8
"KRN",8994,3462,0)
KNR GET DISEASE GROUPS^GETDG^KNRFHU^2^P
"KRN",8994,3462,1,0)
^8994.01^3^3^3150217^^
"KRN",8994,3462,1,1,0)
REQUIRES NO INPUT PARAMETERS.  RETURNS AN ARRAY OF DISEASE GROUPS IN 
"KRN",8994,3462,1,2,0)
ALPHA ORDER IN THE FORMAT:
"KRN",8994,3462,1,3,0)
RESULTS(1)=GROUP NAME^GROUP INTERNAL ENTRY NUMBER.
"KRN",8994,3462,3,0)
^8994.03^2^2^3150217^^
"KRN",8994,3462,3,1,0)
AN ARRAY IN ALPHA ORDER.
"KRN",8994,3462,3,2,0)
RESULT(1)=GROUP NAME^GROUP INTERNAL ENTRY NUMBER
"KRN",8994,3463,-1)
0^12
"KRN",8994,3463,0)
KNR GET RACE^RACE^KNRFHU^2^P
"KRN",8994,3463,1,0)
^8994.01^2^2^3150217^^
"KRN",8994,3463,1,1,0)
NO PARAMETERS ARE REQUIRED.  RETURNS RESULT ARRAY CONSISTING OF THE NAMES 
"KRN",8994,3463,1,2,0)
OF ALL ENTRIES IN THE "KNR FH RACE" FILE #500005 IN ALPHA ORDER.
"KRN",8994,3463,3,0)
^8994.03^3^3^3150217^^
"KRN",8994,3463,3,1,0)
ALL ENTRIES IN THE KNR FH RACE FILE (#500005) IN ALPHA ORDER IN THE 
"KRN",8994,3463,3,2,0)
FORMAT BELOW.
"KRN",8994,3463,3,3,0)
RESULT(1)=RACE NAME^RACE IEN
"KRN",8994,3464,-1)
0^9
"KRN",8994,3464,0)
KNR GET ETHNICITY^ETHN^KNRFHU^2^P
"KRN",8994,3464,1,0)
^^2^2^3150217^
"KRN",8994,3464,1,1,0)
NO PARAMETERS REQUIRED. GETS ARRAY OF ENTRIES IN KNR FH ETHNICITY FILE 
"KRN",8994,3464,1,2,0)
#500007 IN ALPHA ORDER.
"KRN",8994,3464,3,0)
^^4^4^3150217^
"KRN",8994,3464,3,1,0)
ARRAY OF ALL ENTRIES IN THE KNR FH ETHNICITY FILE #500007 IN ALPHA ORDER 
"KRN",8994,3464,3,2,0)
IN THE FORMAT BELOW.
"KRN",8994,3464,3,3,0)
RESULT(1)=NAME^IEN
"KRN",8994,3464,3,4,0)
RESULT(2)=NAME^IEN
"KRN",8994,3465,-1)
0^7
"KRN",8994,3465,0)
KNR GET AGE^AGE^KNRFHU^2
"KRN",8994,3465,1,0)
^^2^2^3150217^
"KRN",8994,3465,1,1,0)
NO PARAMETERS REQUIRED.  GETS ALPHA LISING OF AGE RANGES FROM KNR FH AGE 
"KRN",8994,3465,1,2,0)
FILE #500019.
"KRN",8994,3465,3,0)
^^3^3^3150217^
"KRN",8994,3465,3,1,0)
ARRAY CONTAINING ALL ENTRIES IN THE KNR FH AGE FILE #500019 IN THE FORMAT 
"KRN",8994,3465,3,2,0)
BELOW:
"KRN",8994,3465,3,3,0)
RESULT(1)=AGE RANGE^IEN OF AGE RANGE
"KRN",8994,3466,-1)
0^10
"KRN",8994,3466,0)
KNR GET ONE GROUP^GROUP^KNRFHU1^2^P
"KRN",8994,3466,1,0)
^8994.01^3^3^3150330^^^^
"KRN",8994,3466,1,1,0)
GETS ALL DISEASES DESIGNATED FOR ONE DISEASE GROUP (PARAM KNRGP).  SINCE 
"KRN",8994,3466,1,2,0)
SOME DISEASES ARE TO BE DISPLAYED IN MORE THAN ONE GROUP THE GROUP FIELD 
"KRN",8994,3466,1,3,0)
IN FILE 500011 (KNR FH HERITABLE DISEASE/CONDITIONS) IS A MULTIPLE.  
"KRN",8994,3466,2,0)
^8994.02A^1^1
"KRN",8994,3466,2,1,0)
KNRGP^1^10^1^1
"KRN",8994,3466,2,1,1,0)
^8994.021^1^1^3150330^^^^
"KRN",8994,3466,2,1,1,1,0)
INTERNAL ENTRY NUMBER OF DISEASE GROUP.  
"KRN",8994,3466,2,"B","KNRGP",1)

"KRN",8994,3466,2,"PARAMSEQ",1,1)

"KRN",8994,3466,3,0)
^^4^4^3150303^
"KRN",8994,3466,3,1,0)
RESULT ARRAY CONTAINING ALL DISEASES WITH THE SPECIFIED GROUP IN THE 
"KRN",8994,3466,3,2,0)
GROUP MULTIPLE OF THE KRN FH HERITABLE DISEASES/CONDITIONS FILE #500011 
"KRN",8994,3466,3,3,0)
IN THE FORMAT BELOW.
"KRN",8994,3466,3,4,0)
RESULT(1)=GROUP IEN^DISEASE NAME^DISEASE INTERNAL ENTRY NUMBER.
"KRN",8994,3467,-1)
0^2
"KRN",8994,3467,0)
KNR ADD RELATIVE^ADDR^KNRFHU^2^P
"KRN",8994,3467,1,0)
^8994.01^7^7^3150805^^^^
"KRN",8994,3467,1,1,0)
ADDS A RELATIVE ENTRY TO FILE #500015 KNR RELATIVE.  POINTS TO THE 
"KRN",8994,3467,1,2,0)
PATIENT'S ENTRY IN THE KNR FAMILY HISTORY FILE #500003.  NO RELATIVE 
"KRN",8994,3467,1,3,0)
ENTRY CAN BE ADDED UNLESS AN ENTRY FOR THE PATIENT ALREADY EXISTS IN FILE 
"KRN",8994,3467,1,4,0)
#500003.  THIS RPC INCLUDE A DUPLICATE CHECK.  IT WILL NOT ALLOW 
"KRN",8994,3467,1,5,0)
DUPLICATED OF UNIQUE RELATIVE TYPES (MOTHER, FATHER, MATERNAL 
"KRN",8994,3467,1,6,0)
GRANDFATHER, SELF, ETC.).  IT WILL NOT ALLOW DUPLICATES OF NON-UNIQUE 
"KRN",8994,3467,1,7,0)
RELATIVE TYPES WITH EXACTLY THE SAME NAME (TWO BROTHERS NAMED BOB).
"KRN",8994,3467,2,0)
^8994.02A^10^10
"KRN",8994,3467,2,1,0)
DFN^1^20^1^1
"KRN",8994,3467,2,1,1,0)
^8994.021^1^1^3150317^^
"KRN",8994,3467,2,1,1,1,0)
INTERNAL ENTRY OF PATIENT IN FILE 500003, KNR FAMILY HISTORY PATIENT.
"KRN",8994,3467,2,2,0)
KNRFNAM^1^30^1^2
"KRN",8994,3467,2,2,1,0)
^8994.021^1^1^3150317^^
"KRN",8994,3467,2,2,1,1,0)
FIRST NAME OF RELATIVE OR OTHER IDENTIFYING NAME. FREE TEXT.
"KRN",8994,3467,2,3,0)
KNRREL^1^10^1^3
"KRN",8994,3467,2,3,1,0)
^8994.021^1^1^3150317^^
"KRN",8994,3467,2,3,1,1,0)
INTERNAL ENTRY NUMBER/POINTER TO KNR FH RELATIONSHIP FILE #500013.
"KRN",8994,3467,2,4,0)
KNRVS^1^5^0^4
"KRN",8994,3467,2,4,1,0)
^8994.021^1^1^3150317^^
"KRN",8994,3467,2,4,1,1,0)
VITAL STATUS CODE.  L=LIVING, D=DECEASED, U=UNKNOWN.
"KRN",8994,3467,2,5,0)
KNRAAD^1^5^0^5
"KRN",8994,3467,2,5,1,0)
^8994.021^1^1^3150317^^
"KRN",8994,3467,2,5,1,1,0)
AGE AT DEATH, POINTER TO KNR FH AGE FILE.
"KRN",8994,3467,2,6,0)
KNRCOMM^1^80^0^6
"KRN",8994,3467,2,6,1,0)
^8994.021^1^1^3150317^^^
"KRN",8994,3467,2,6,1,1,0)
FREE TEXT COMMENT FOR THIS RELATIVE.
"KRN",8994,3467,2,7,0)
KNRDUZ^1^20^1^7
"KRN",8994,3467,2,7,1,0)
^8994.021^1^1^3150317^^
"KRN",8994,3467,2,7,1,1,0)
INTERNAL ENTRY NUMBER/DUZ OF USER CREATING THIS ENTRY.
"KRN",8994,3467,2,8,0)
KNRRACE^1^10^0^8
"KRN",8994,3467,2,8,1,0)
^8994.021^1^1^3150317^^
"KRN",8994,3467,2,8,1,1,0)
INTERNAL ENTRY NUMBER/POINTER TO KNR FH RACE FILE.
"KRN",8994,3467,2,9,0)
KNRETH^1^10^0^9
"KRN",8994,3467,2,9,1,0)
^8994.021^1^1^3150423^^^^
"KRN",8994,3467,2,9,1,1,0)
INTERNAL ENTRY NUMBER/POINTER TO KNR FH ETHNICITY FILE.
"KRN",8994,3467,2,10,0)
KNRCAGE^1^3^0^10
"KRN",8994,3467,2,10,1,0)
^8994.021^1^1^3150805^^^^
"KRN",8994,3467,2,10,1,1,0)
CURRENT AGE OF RELATIVE.  NUMERIC VALUE BETWEEN 0 AND 199.
"KRN",8994,3467,2,"B","DFN",1)

"KRN",8994,3467,2,"B","KNRAAD",5)

"KRN",8994,3467,2,"B","KNRCAGE",10)

"KRN",8994,3467,2,"B","KNRCOMM",6)

"KRN",8994,3467,2,"B","KNRDUZ",7)

"KRN",8994,3467,2,"B","KNRETH",9)

"KRN",8994,3467,2,"B","KNRFNAM",2)

"KRN",8994,3467,2,"B","KNRRACE",8)

"KRN",8994,3467,2,"B","KNRREL",3)

"KRN",8994,3467,2,"B","KNRVS",4)

"KRN",8994,3467,2,"PARAMSEQ",1,1)

"KRN",8994,3467,2,"PARAMSEQ",2,2)

"KRN",8994,3467,2,"PARAMSEQ",3,3)

"KRN",8994,3467,2,"PARAMSEQ",4,4)

"KRN",8994,3467,2,"PARAMSEQ",5,5)

"KRN",8994,3467,2,"PARAMSEQ",6,6)

"KRN",8994,3467,2,"PARAMSEQ",7,7)

"KRN",8994,3467,2,"PARAMSEQ",8,8)

"KRN",8994,3467,2,"PARAMSEQ",9,9)

"KRN",8994,3467,2,"PARAMSEQ",10,10)

"KRN",8994,3467,3,0)
^^12^12^3150805^
"KRN",8994,3467,3,1,0)
RESULT ARRAY.  RESULT(0)=1^IEN OF NEWLY CREATED RELATIVE ENTRY INDICATES
"KRN",8994,3467,3,2,0)
SUCCESS.  RESULT(0)=0 INDICATES FAILURE.  RESULT(0) MAY =0^"FILE
"KRN",8994,3467,3,3,0)
LOCKED" IF ANOTHER USER HAS LOCKED THE ZERO NODE OF FILE 500015.  IF A
"KRN",8994,3467,3,4,0)
FILEMAN ERROR OCCURS RESULT("ERROR") WILL EQUAL THE TEXT OF THE ERROR.
"KRN",8994,3467,3,5,0)
IF REJECTED AS A DUPLICATE ENTRY RESULT(0)=2^IEN OF EXISTING ENTRY AND 
"KRN",8994,3467,3,6,0)
RESULT("ERROR")="DUPLICATE ENTRY UNIQUE RELATIONSHIP" OR
"KRN",8994,3467,3,7,0)
RESULT("ERROR")="DUPLICATE ENTRY SAME NAME AND RELATIONSHIP".
"KRN",8994,3467,3,8,0)
ATTEMPTS TO CREATE A SECOND ENTRY FOR A UNIQUE RELATIONSHIP (MOTHER, 
"KRN",8994,3467,3,9,0)
FATHER, SELF, GRANDPARENT, ETC) WILL BE REJECTED AS A DUPLICATE.  
"KRN",8994,3467,3,10,0)
ATTEMPTS TO SAVE AN ENTRY THAT DUPLICATES THE RELATIONSHIP AND FIRST NAME 
"KRN",8994,3467,3,11,0)
WILL BE REJECTED AS A DUPLICATE (i.e. TWO BROTHERS NAMED JIM). 
"KRN",8994,3467,3,12,0)
RELATIONSHIP AND NAME ARE ENTRY IDENTIFIERS.
"KRN",8994,3468,-1)
0^1
"KRN",8994,3468,0)
KNR ADD DISEASE^ADDD^KNRFHU^2^P
"KRN",8994,3468,1,0)
^8994.01^2^2^3150407^^^^
"KRN",8994,3468,1,1,0)
ADDS DISEASE ENTRY FOR A RELATIVE TO FILE 500017.  RELATIVE ENTRY IN FILE 
"KRN",8994,3468,1,2,0)
500015 MUST EXIST BEFORE A DISEASE ENTRY CAN BE ADDED.
"KRN",8994,3468,2,0)
^8994.02A^5^5
"KRN",8994,3468,2,1,0)
KNRREL^1^12^1^1
"KRN",8994,3468,2,1,1,0)
^8994.021^1^1^3150317^^^
"KRN",8994,3468,2,1,1,1,0)
INTERNAL ENTRY NUMBER/POINTER TO KNR RELATIVE FILE.  
"KRN",8994,3468,2,2,0)
KNRAADI^1^10^0^2
"KRN",8994,3468,2,2,1,0)
^8994.021^1^1^3150317^^^
"KRN",8994,3468,2,2,1,1,0)
AGE AT DIAGNOSIS.  INTERNAL ENTRY NUMBER/POINTER TO KNR FH AGE FILE.
"KRN",8994,3468,2,3,0)
KNRDIS^1^12^1^3
"KRN",8994,3468,2,3,1,0)
^8994.021^1^1^3150317^^^
"KRN",8994,3468,2,3,1,1,0)
KNR DISEASE FILE POINTER, INTERNAL ENTRY NUMBER.
"KRN",8994,3468,2,4,0)
KNRCOMM^1^80^0^4
"KRN",8994,3468,2,4,1,0)
^8994.021^1^1^3150317^^^
"KRN",8994,3468,2,4,1,1,0)
COMMENT FOR THIS DISEASE FILE ENTRY.  FREE TEXT.
"KRN",8994,3468,2,5,0)
KNRDUZ^1^12^1^5
"KRN",8994,3468,2,5,1,0)
^8994.021^1^1^3150407^^^^
"KRN",8994,3468,2,5,1,1,0)
INTERNAL ENTRY NUMBER/DUZ OF USER CREATING THIS ENTRY.
"KRN",8994,3468,2,"B","KNRAADI",2)

"KRN",8994,3468,2,"B","KNRCOMM",4)

"KRN",8994,3468,2,"B","KNRDIS",3)

"KRN",8994,3468,2,"B","KNRDUZ",5)

"KRN",8994,3468,2,"B","KNRREL",1)

"KRN",8994,3468,2,"PARAMSEQ",1,1)

"KRN",8994,3468,2,"PARAMSEQ",2,2)

"KRN",8994,3468,2,"PARAMSEQ",3,3)

"KRN",8994,3468,2,"PARAMSEQ",4,4)

"KRN",8994,3468,2,"PARAMSEQ",5,5)

"KRN",8994,3468,3,0)
^8994.03^5^5^3150407^^
"KRN",8994,3468,3,1,0)
SUCCESSFUL INDICATOR IS RESULT(0)=1^IEN OF NEW ENTRY.
"KRN",8994,3468,3,2,0)
FAILURE INDICATOR IS RESULT(0)=0
"KRN",8994,3468,3,3,0)
SHOULD THE ZERO NODE OF THE FILE BE LOCKED RESULT("ERROR") WILL EQUAL
"KRN",8994,3468,3,4,0)
"FILE LOCKED BY ANOTHER USER". IF THE FILEMAN API ERRORS RESULT("ERROR")
"KRN",8994,3468,3,5,0)
WILL EQUAL THE TEXT OF THAT ERROR.
"KRN",8994,3469,-1)
0^16
"KRN",8994,3469,0)
KNR GET RELATIVES^GETSR^KNRFHU^2^P
"KRN",8994,3469,1,0)
^^8^8^3150803^
"KRN",8994,3469,1,1,0)
GIVEN THE INTERNAL ENTRY NUMBER/DFN OF A PATIENT WITH A FAMILY HISTORY
"KRN",8994,3469,1,2,0)
ENTERED THIS RPC RETURNS A RESULT ARRAY CONTAING THE ZERO NODES OF EACH 
"KRN",8994,3469,1,3,0)
OF THE PATIENT'S RELATIVES FROM THE KNR FH RELATIVE FILE (#500015).
"KRN",8994,3469,1,4,0)
RESULT(3)="FH3^JOEY^8^D^10^COMMENT^3150220.2100^1^100047^4^1"
"KRN",8994,3469,1,5,0)
THE FILE ATTRIBUTES CAN BE USED TO IDENTIFY EACH PIECE IN THE STRING 
"KRN",8994,3469,1,6,0)
ABOVE.
"KRN",8994,3469,1,7,0)
THE SUBSCRIPT (3 IN THE EXAMPLE ABOVE) IS THE INTERNAL ENTRY NUMBER OF 
"KRN",8994,3469,1,8,0)
THE RELATIVE.
"KRN",8994,3469,2,0)
^8994.02A^1^1
"KRN",8994,3469,2,1,0)
DFN^1^12^1^1
"KRN",8994,3469,2,1,1,0)
^8994.021^1^1^3150803^^^^
"KRN",8994,3469,2,1,1,1,0)
INTERNAL ENTRY NUMBER/DFN OF A FAMILY HISTORY PATIENT.  
"KRN",8994,3469,2,"B","DFN",1)

"KRN",8994,3469,2,"PARAMSEQ",1,1)

"KRN",8994,3469,3,0)
^^6^6^3150803^
"KRN",8994,3469,3,1,0)
A RESULT ARRAY CONTAINING THE ZERO NODE OF THE KNR FH RELATIVE FILE 
"KRN",8994,3469,3,2,0)
(#500015).  THE ATTRIBUTES OF THE FILE CAN BE USED TO IDENTIFY EACH PIECE 
"KRN",8994,3469,3,3,0)
OF THE DATA. EXAMPLE BELOW.
"KRN",8994,3469,3,4,0)
RESULT(3)="FH3^JOEY^8^D^10^COMMENT^3150220.2100^1^100047^4^1"
"KRN",8994,3469,3,5,0)
THE RESULT SUBSCRIPT (3 IN THE EXAMPLE ABOVE) IS THE INTERNAL ENTRY 
"KRN",8994,3469,3,6,0)
NUMBER OF THE RELATIVE ENTRY.
"KRN",8994,3470,-1)
0^15
"KRN",8994,3470,0)
KNR GET RELATIVE DISEASES^GETSD^KNRFHU^2^P
"KRN",8994,3470,1,0)
^8994.01^7^7^3150803^^
"KRN",8994,3470,1,1,0)
WHEN PROVIDED THE INTERNAL ENTRY NUMBER OF A KNR RELATIVE FILE ENTRY 
"KRN",8994,3470,1,2,0)
RETURNS AN ARRAY CONSISTING OF THE CONTENTS OF THE ZERO NODE OF EACH 
"KRN",8994,3470,1,3,0)
DISEASE FILE ENTRY ASSOCIATED WITH THAT RELATIVE.
"KRN",8994,3470,1,4,0)
RESULT(1)="FHD1^7^9^DISEASE COMMENT^3150220.2111^1^3"
"KRN",8994,3470,1,5,0)
THE FILE ATTRIBUTES (GLOBAL MAP AND BRIEF DATA DICTIONARY) PROVIDED BY 
"KRN",8994,3470,1,6,0)
FILEMAN CAN BE USED TO IDENTIFIY THE CONTENTS OF EACH PIECE OF THE DATA 
"KRN",8994,3470,1,7,0)
RETURNED.
"KRN",8994,3470,2,0)
^8994.02A^1^1
"KRN",8994,3470,2,1,0)
KNRREL^1^12^1^1
"KRN",8994,3470,2,1,1,0)
^8994.021^1^1^3150803^^
"KRN",8994,3470,2,1,1,1,0)
THE INTERNAL ENTRY NUMBER/IEN OF ONE ENTRY IN THE KNR RELATIVE FILE.
"KRN",8994,3470,2,"B","KNRREL",1)

"KRN",8994,3470,2,"PARAMSEQ",1,1)

"KRN",8994,3470,3,0)
^^3^3^3150803^
"KRN",8994,3470,3,1,0)
A RESULT ARRAY CONTAINING THE CONTENTS OF THE ZERO NODE OF EACH DISEASE 
"KRN",8994,3470,3,2,0)
ENTRY ASSOCIATED WITH THE RELATIVE ENTRY PROVIDED.
"KRN",8994,3470,3,3,0)
RESULT(DISEASE ENTRY IEN)=ZERO NODE CONTENTS OF DISEASE ENTRY
"KRN",8994,3471,-1)
0^17
"KRN",8994,3471,0)
KNR GETALL FAMILY HISTORY^GETALL^KNRFHU1^4^P
"KRN",8994,3471,1,0)
^8994.01^6^6^3150416^^^^
"KRN",8994,3471,1,1,0)
GETS THE ENTIRE FAMILY HISTORY.  RETURNS THE PATIENTS ZERO NODE FROM THE 
"KRN",8994,3471,1,2,0)
KNR FAMILY HISTORY FILE AND THE ZERO NODE OF EACH KNR RELATIVE FILE WHICH 
"KRN",8994,3471,1,3,0)
POINTS TO THAT PATIENT.  ALSO RETURNS THE ZERO NODE OF EVERY ENTERY IN 
"KRN",8994,3471,1,4,0)
THE KNR RELATIVE DISEASES/CONDITIONS FILE THAT POINTS TO ONE OF THE 
"KRN",8994,3471,1,5,0)
PATIENT'S RELATIVES.  THESE ZERO NODES CONTAIN ALL THE FAMILY HISTORY 
"KRN",8994,3471,1,6,0)
RECORDED FOR THE PATIENT.
"KRN",8994,3471,2,0)
^8994.02A^1^1
"KRN",8994,3471,2,1,0)
DFN^1^12^1^1
"KRN",8994,3471,2,1,1,0)
^8994.021^3^3^3150416^^^^
"KRN",8994,3471,2,1,1,1,0)
THE INTERNAL ENTRY NUMBER OF THE PATIENT IN THE KNR FAMILY HISTORY FILE, 
"KRN",8994,3471,2,1,1,2,0)
POINTER TO THE PATIENT FILE.  THE KNR FAMILY HISTORY FILE IS DINUMED TO 
"KRN",8994,3471,2,1,1,3,0)
THE PATIENT FILE (#2).  
"KRN",8994,3471,2,"B","DFN",1)

"KRN",8994,3471,2,"PARAMSEQ",1,1)

"KRN",8994,3471,3,0)
^8994.03^17^17^3150416^^^
"KRN",8994,3471,3,1,0)
A GLOBAL ARRAY CONTAINING THE ENTIRE CONTENTS OF THE PATIENTS ENTRY IN 
"KRN",8994,3471,3,2,0)
THE KNR FAMILY HISTORY FILE, ALL KNR RELATIVE FILE ENTRIES ASSOCIATED 
"KRN",8994,3471,3,3,0)
WITH THE PATIENT AND ALL KNR RELATIVE DISEASES/CONDITIONS FILE ENTRIES 
"KRN",8994,3471,3,4,0)
ASSOCIATED WITH THOSE RELATIVES.  THE FIRST NODE CONTAINS THE CONTENTS OF 
"KRN",8994,3471,3,5,0)
THE PATIENT'S KNR FAMILY HISTORY FILE ENTRY.  FOLLOWING NODES CONTAIN THE 
"KRN",8994,3471,3,6,0)
CONTENTS OF EACH KNR RELATIVE FILE ENTRY.  EACH RELATIVE ZERO NODE IS 
"KRN",8994,3471,3,7,0)
FOLLOWED WITH THE KNR RELATIVE DISEASES/CONDITIONS FILE ZERO NODES 
"KRN",8994,3471,3,8,0)
ASSOCIATED WITH THAT RELATIVE.  THE GLOBAL ARRAY IS SUBSCRIPTED 
"KRN",8994,3471,3,9,0)
("KNRALL",$J,#) AND EQUALS THE CONTENTS OF THE ENTRY ZERO NODE.  USE THE 
"KRN",8994,3471,3,10,0)
APPROPRIATE FILE(#500003,#500015,#500017) DATA DICTIONARY TO IDENTIFY THE
"KRN",8994,3471,3,11,0)
INFORMATION CONTAINED IN EACH "^" DELIMITED PIECE.  THE APPROPRIATE FILE 
"KRN",8994,3471,3,12,0)
CAN BE DETERMINED BY EXAMINING THE FIRST PIECE IN EACH STRING.  FOR FILE 
"KRN",8994,3471,3,13,0)
500003 THE FIRST PIECE OF THE ZERO NODE IS A NUMBER EQUAL TO THE INTERNAL
"KRN",8994,3471,3,14,0)
ENTRY NUMBER/DFN OF THE PATIENT.  FILE 500015 (KNR RELATIVE) ZERO NODES
"KRN",8994,3471,3,15,0)
BEGIN WITH THE RELATIVE IDENTIFIER "FH" CONCANTENATED WITH THE RELATIVE 
"KRN",8994,3471,3,16,0)
IEN.  FILE 500017 (KNR RELATIVE DISEASES/CONDITIONS) ZERO NODES BEGIN WITH
"KRN",8994,3471,3,17,0)
'FHD" CONCANTENATED WITH THE ENTRY'S IEN.
"KRN",8994,3472,-1)
0^14
"KRN",8994,3472,0)
KNR GET RELATIONSHIPS^GETR^KNRFHU1^2^P
"KRN",8994,3472,1,0)
^^3^3^3150609^
"KRN",8994,3472,1,1,0)
GETS LISTING OF ALL ENTRIES IN THE KNR FH RELATIONSHIP FILE 500013 IN A 
"KRN",8994,3472,1,2,0)
NUMERIC ORDER DETERMINED BY THE CONTENTS OF THE DISPLAY ORDER FIELD.
"KRN",8994,3472,1,3,0)
RESULT(#)=RELATIONSHIP NAME^RELATIONSHIP IEN.
"KRN",8994,3472,3,0)
^8994.03^3^3^3150609^^
"KRN",8994,3472,3,1,0)
ARRAY OF ALL ENTRIES IN FILE 500013, KNR FH RELATIONSHIP IN THE FORMAT 
"KRN",8994,3472,3,2,0)
BELOW:
"KRN",8994,3472,3,3,0)
RESULT(#)=RELATIONSHIP NAME^RELATIONSHIP IEN
"KRN",8994,3473,-1)
0^6
"KRN",8994,3473,0)
KNR FH GET COVER SHEET^GETCS^KNRFHU3^2^P
"KRN",8994,3473,1,0)
^8994.01^11^11^3150516^^^
"KRN",8994,3473,1,1,0)
GIVEN PATIENT DFN, RETURNS IEN, DATE/TIME CREATED, AUTHOR IEN, AUTHOR 
"KRN",8994,3473,1,2,0)
NAME AND AUTHOR SIGNATURE BLOCK TITLE FOR MOST RECENT 
"KRN",8994,3473,1,3,0)
SIGNED/COMPLETED PROGRESS NOTE TITLED "FAMILY HISTORY TOOL OUTPUT".  
"KRN",8994,3473,1,4,0)
CURRENTLY HARD CODED IN ROUTINE AS IEN 262.  IF THERE IS NO COMPLETED FH
"KRN",8994,3473,1,5,0)
TOOL OUTPUT NOTE RESULT(0) IS RETURNED=0^"NO COMPLETED FH TOOL NOTE FOR 
"KRN",8994,3473,1,6,0)
THIS PATIENT" FOLLOWED BY ANY RELATIVE AND DISEASE INFORMATION FOUND IN
"KRN",8994,3473,1,7,0)
THE FAMILY HISTORY TOOL FILES. IF THERE IS NO FAMILY HISTORY ENTRY IN THE
"KRN",8994,3473,1,8,0)
FH FILES FOR THE PATIENT RESULT(0) IS RETURNED=0^"NO FAMILY HISTORY DATA
"KRN",8994,3473,1,9,0)
FOR THIS PATIENT" AND NOTHING ELSE. IF A RELATIVE EXISTS BUT HAS NO 
"KRN",8994,3473,1,10,0)
DISEASE ENTRIES A NODE IS RETURNED AFTER THE RELATIVE INFORMATION STATING 
"KRN",8994,3473,1,11,0)
THAT THERE ARE NO DISEASE ENTRIES FOR THIS RELATIVE.
"KRN",8994,3473,2,0)
^8994.02A^1^1
"KRN",8994,3473,2,1,0)
KNRDFN^1^15^1^1
"KRN",8994,3473,2,1,1,0)
^8994.021^2^2^3150516^^
"KRN",8994,3473,2,1,1,1,0)
DFN/INTERNAL ENTRY NUMBER OF PATIENT IN FILE 2 (PATIENT FILE) AND FILE 
"KRN",8994,3473,2,1,1,2,0)
500003 (KNR FAMILY HISTORY FILE).
"KRN",8994,3473,2,"B","KNRDFN",1)

"KRN",8994,3473,2,"PARAMSEQ",1,1)

"KRN",8994,3473,3,0)
^^23^23^3150516^
"KRN",8994,3473,3,1,0)
NODE ZERO IN THE ARRAY CONTAINS INFORMATION ON THE SUCCESS OR FAILURE OF 
"KRN",8994,3473,3,2,0)
THE SEARCH FOR A COMPLETED FH TOOL NOTE. 
"KRN",8994,3473,3,3,0)
 RESULT(1)=IEN OF NOTE IN FILE 8925^DATE/TIME NOTE CREATED^AUTHOR IEN IN
"KRN",8994,3473,3,4,0)
FILE 200^AUTHOR NAME^AUTHOR SIGNATURE BLOCK TITLE. RELATIVE NODES ARE
"KRN",8994,3473,3,5,0)
FOLLOWED BY THE DISEASE ENTRIES ASSOCIATED WITH THAT RELATIVE.  RELATIVE
"KRN",8994,3473,3,6,0)
NODES ARE IN THE FORM: RESULT(#)="RELATIVE^RELATIVE IEN IN FILE 500015
"KRN",8994,3473,3,7,0)
(KNR RELATIVE)^RELATIONSHIP TO PATIENT^DATE/TIME LAST EDITED.
"KRN",8994,3473,3,8,0)
DISEASE ENTRIES ARE IN THE FORM: RESULT(#)=DISEASE^IEN OF DISEASE ENTRY IN
"KRN",8994,3473,3,9,0)
FILE 500017 (KNR RELATIVE DISEASES/CONDITIONS)^NAME OF DISEASE^AGE WHEN 
"KRN",8994,3473,3,10,0)
DIAGNOSED.
"KRN",8994,3473,3,11,0)
 
"KRN",8994,3473,3,12,0)
RESULT(0)="1^SIGNED FH TOOL NOTE FOUND"
"KRN",8994,3473,3,13,0)
RESULT(1)="12374^3150315.155507^1^PROGRAMMER,ONE^PROGRAMMER"
"KRN",8994,3473,3,14,0)
RESULT(2)="RELATIVE^3^HALF SISTER MATERNAL^3150220.2100"
"KRN",8994,3473,3,15,0)
RESULT(3)="DISEASE^1^THYROID CANCER^3150220.2111^31-35"
"KRN",8994,3473,3,16,0)
RESULT(4)="DISEASE^2^STROKE^3150220.2124^76-80"
"KRN",8994,3473,3,17,0)
RESULT(5)="DISEASE^3^NOT RECORDED KIDNEY DISORDER^3150220.2127^26-30"
"KRN",8994,3473,3,18,0)
RESULT(6)="DISEASE^4^UNKNOWN NEUROPSYCHIATRIC DISORDER^3150228.2037^41-45"
"KRN",8994,3473,3,19,0)
RESULT(7)="DISEASE^5^NOT RECORDED PULMONARY DISORDER^3150228.2039^46-50"
"KRN",8994,3473,3,20,0)
RESULT(8)="DISEASE^7^DEPRESSION^3150331.2149^66-70"
"KRN",8994,3473,3,21,0)
RESULT(9)="DISEASE^20^STROKE^3150409.1342^51-55"
"KRN",8994,3473,3,22,0)
RESULT(10)="RELATIVE^4^IDENTICAL TWIN SISTER^3150220.2102"
"KRN",8994,3473,3,23,0)
RESULT(11)="0^NO DISEASE ENTRIES FOR THIS RELATIVE"
"KRN",8994,3474,-1)
0^3
"KRN",8994,3474,0)
KNR CREATE FH NOTE^MAKE^KNRFHU2^1^P
"KRN",8994,3474,1,0)
^8994.01^4^4^3150807^^^^
"KRN",8994,3474,1,1,0)
GIVEN DFN OF PATIENT AND DUZ OF USER GATHERS RELEVENT FH INFORMATION AND 
"KRN",8994,3474,1,2,0)
CREATES A PROGRESS NOTE TITLED "FAMILY HISTORY TOOL OUTPUT".
"KRN",8994,3474,1,3,0)
RETURNS RESULT=0^"DOCUMENT NOT CREATED" IF PROCESS FAILED.
"KRN",8994,3474,1,4,0)
RETURNS RESULT=IEN OF NOTE^DOCUMENT CREATED SIGN IN CPRS.
"KRN",8994,3474,2,0)
^8994.02A^5^5
"KRN",8994,3474,2,1,0)
DFN^1^15^1^1
"KRN",8994,3474,2,1,1,0)
^8994.021^1^1^3150316^^
"KRN",8994,3474,2,1,1,1,0)
DFN/INTERNAL ENTRY NUMBER OF PATIENT IN FILE 2 AND FILE 500003.
"KRN",8994,3474,2,2,0)
DUZ^1^15^1^2
"KRN",8994,3474,2,2,1,0)
^8994.021^1^1^3150807^^^^
"KRN",8994,3474,2,2,1,1,0)
DUZ/INTERNAL ENTRY NUMBER OF USER IN FILE 200.
"KRN",8994,3474,2,3,0)
VLOC^1^9^0^3
"KRN",8994,3474,2,3,1,0)
^^2^2^3150807^
"KRN",8994,3474,2,3,1,1,0)
 This optional parameter is the Location of Visit (e.g., Cardiology
"KRN",8994,3474,2,3,1,2,0)
 Clinic).  It is a pointer to Hospital location (File #44).
"KRN",8994,3474,2,4,0)
VDT^1^20^0^4
"KRN",8994,3474,2,4,1,0)
^^6^6^3150807^
"KRN",8994,3474,2,4,1,1,0)
This optional parameter is the Date/time of visit IN FileMan format 
"KRN",8994,3474,2,4,1,2,0)
3150807.2215 for August 7, 2015 at 10:15 p.m. If the parameter VSIT is
"KRN",8994,3474,2,4,1,3,0)
present, this will be ignored.  Otherwise, the RPC will attempt to
"KRN",8994,3474,2,4,1,4,0)
generate a match with a visit based on DFN, VDT, and VLOC (visit
"KRN",8994,3474,2,4,1,5,0)
location).  In the event that the RPC cannot generate such a match, a new
"KRN",8994,3474,2,4,1,6,0)
EVENT-type Visit will be created with the current date/time.
"KRN",8994,3474,2,5,0)
VSTR^1^50^0^5
"KRN",8994,3474,2,5,1,0)
^^4^4^3150807^
"KRN",8994,3474,2,5,1,1,0)
This parameter identifies the visit location, date/time, and Service
"KRN",8994,3474,2,5,1,2,0)
 Category (Hospitalization, Ambulatory, Telecommunications, or Event
"KRN",8994,3474,2,5,1,3,0)
 (HISTORICAL)) in the form of a semi-colon delimited string (e.g.,
"KRN",8994,3474,2,5,1,4,0)
 "469;2970616.1415;A").
"KRN",8994,3474,2,"B","DFN",1)

"KRN",8994,3474,2,"B","DUZ",2)

"KRN",8994,3474,2,"B","VDT",4)

"KRN",8994,3474,2,"B","VLOC",3)

"KRN",8994,3474,2,"B","VSTR",5)

"KRN",8994,3474,2,"PARAMSEQ",1,1)

"KRN",8994,3474,2,"PARAMSEQ",2,2)

"KRN",8994,3474,2,"PARAMSEQ",3,3)

"KRN",8994,3474,2,"PARAMSEQ",4,4)

"KRN",8994,3474,2,"PARAMSEQ",5,5)

"KRN",8994,3474,3,0)
^8994.03^3^3^3150807^^^^
"KRN",8994,3474,3,1,0)
SUCCESSFUL CREATION OF NOTE RETURNS RESULT=IEN OF NOTE^DOCUMENT CREATED 
"KRN",8994,3474,3,2,0)
SIGN IN CPRS.
"KRN",8994,3474,3,3,0)
FAILURE TO CREATE NOTE RETURNS RESULT=0^DOCUMENT NOT CREATED.
"KRN",8994,3475,-1)
0^18
"KRN",8994,3475,0)
KNR GETALL RELATIVES & DISEA^ALLA^KNRFHU3^2^P
"KRN",8994,3475,1,0)
^8994.01^9^9^3150509^^
"KRN",8994,3475,1,1,0)
GIVEN PATIENT IEN (KNRDFN) RETURNS AN ARRAY OF ALL RELATIVES AND THEIR 
"KRN",8994,3475,1,2,0)
DISEASE ENTRIES.  EACH RESULT(#) LINE CONTAINS THE ENTIRE CONTENTS OF THE 
"KRN",8994,3475,1,3,0)
RELATIVE AND DISEASE ENTRIES.  THERE WILL BE A RESULT(#) FOR EACH DISEASE 
"KRN",8994,3475,1,4,0)
ASSOCIATED WITH A RELATIVE. ALL POINTER AND SET OF CODES DATA HAS BEEN 
"KRN",8994,3475,1,5,0)
CONVERTED INTO EXTERNAL FORMAT. NEW PERSON FILE POINTERS HAVE BEEN 
"KRN",8994,3475,1,6,0)
CONVERTED INTO USER NAME / SIGNATURE BLOCK TITLE.
"KRN",8994,3475,1,7,0)
ALSO PROVIDES THE CONTENTS OF THE KNR FAMILY HISTORY (FILE 500003) ENTRY 
"KRN",8994,3475,1,8,0)
FOR THE PATIENT IN EXTERNAL FORMAT.  SEE FILE ATTRIBUTES FOR FILE 500003 
"KRN",8994,3475,1,9,0)
FOR DATA SEQUENCE.
"KRN",8994,3475,2,0)
^8994.02A^1^1
"KRN",8994,3475,2,1,0)
KNRDFN^1^15^1^1
"KRN",8994,3475,2,1,1,0)
^8994.021^1^1^3150509^^^^
"KRN",8994,3475,2,1,1,1,0)
THE INTERNAL ENTRY NUMBER OF THE PATIENT.
"KRN",8994,3475,2,"B","KNRDFN",1)

"KRN",8994,3475,2,"PARAMSEQ",1,1)

"KRN",8994,3475,3,0)
^^19^19^3150509^
"KRN",8994,3475,3,1,0)
RESULT(#) ARRAY EQUAL TO A STRING DELIMITED BY "^".  THE FIRST 12 PIECES 
"KRN",8994,3475,3,2,0)
OF THE STRING ARE THE CONTENTS OF THE ZERO NODE OF THE KNR RELATIVE FILE 
"KRN",8994,3475,3,3,0)
(#500015) ENTRY.  THE NEXT 7 PIECES ARE THE CONTENTS OF THE ZERO NODE OF
"KRN",8994,3475,3,4,0)
EACH KNR RELATIVE DISEASE FILE ENTRY (#500017) ASSOCIATED WITH THAT
"KRN",8994,3475,3,5,0)
RELATIVE. SEE THE DATA DICTIONARIES OF THOSE TWO FILES FOR A COMPLETE
"KRN",8994,3475,3,6,0)
DESCRIPTION OF THEIR CONTENTS.
"KRN",8994,3475,3,7,0)
 
"KRN",8994,3475,3,8,0)
RESULT(0)=1
"KRN",8994,3475,3,9,0)
RESULT(1)="FH3^JOEY^HALF SISTER 
"KRN",8994,3475,3,10,0)
MATERNAL^DECEASED^46-50^COMMENT^02/20/15^PROGRAM
"KRN",8994,3475,3,11,0)
MER,ONE / PROGRAMMER^BCMA,THIRTYTWO-PATIENT^DECLINED TO ANSWER^DECLINED TO
"KRN",8994,3475,3,12,0)
ANSWE R^33^FHD7^66-70^DEPRESSION^DISEASE COMMENT^03/31/15^PROGRAMMER,ONE /
"KRN",8994,3475,3,13,0)
PROGRAMMER^ FH3 / JOEY"
"KRN",8994,3475,3,14,0)
 RESULT(0)=1 INDICATES SUCCESS RESULT(0)=0 INDICATES FAILURE
"KRN",8994,3475,3,15,0)
RESULT("ERROR")=DISCRIPTION OF FAILURE IF ANY
"KRN",8994,3475,3,16,0)
 
"KRN",8994,3475,3,17,0)
RESULT("PT")="BCMA,THIRTYTWO-PATIENT^02/18/15^PROGRAMMER,ONE / 
"KRN",8994,3475,3,18,0)
PROGRAMMER^^02/18 /15^UNKNOWN^SOME COMMENT ON PATIENT^PROGRAMMER,ONE /
"KRN",8994,3475,3,19,0)
PROGRAMMER^ASIAN^DECLINED TO ANSWER"
"KRN",8994,3476,-1)
0^13
"KRN",8994,3476,0)
KNR GET REL DISEASE TEXT^ALLA^KNRFHU4^2^P^0
"KRN",8994,3476,1,0)
^8994.01^8^8^3150528^^
"KRN",8994,3476,1,1,0)
GIVEN PATIENT IEN IN THE VARIABLE KNRDFN RETURNS RESULT ARRAY CONTAINING 
"KRN",8994,3476,1,2,0)
THE EXTERNAL FORM OF INFORMATION IN THE ZERO NODE OF EACH RELATIVE 
"KRN",8994,3476,1,3,0)
CONCANTENATED WITH THE INFORMATION IN THE ZERO NODE OF EACH DISEASE ENTRY 
"KRN",8994,3476,1,4,0)
OF THAT RELATIVE.  SEE THE DD OF THE KNR RELATIVE FILE #500015 AND THE 
"KRN",8994,3476,1,5,0)
KNR RELATIVE DISEASES AND CONDITIONS FILE #500017 FOR THE DESCRIPTION OF 
"KRN",8994,3476,1,6,0)
THE ZERO NODE DATA OF EACH FILE.
"KRN",8994,3476,1,7,0)
ALSO RETURNS THE CONTENTS OF THE PATIENT'S ENTRY IN FILE 500003, KNR 
"KRN",8994,3476,1,8,0)
FAMILY HISTORY IN THE RESULT("PT") NODE IN EXTERNAL FORM.
"KRN",8994,3476,2,0)
^8994.02A^1^1
"KRN",8994,3476,2,1,0)
KNRDFN^1^15^1^1
"KRN",8994,3476,2,1,1,0)
^8994.021^1^1^3150528^^^
"KRN",8994,3476,2,1,1,1,0)
INTERNAL ENTRY NUMBER OF THE PATIENT
"KRN",8994,3476,2,"B","KNRDFN",1)

"KRN",8994,3476,2,"PARAMSEQ",1,1)

"KRN",8994,3476,3,0)
^^38^38^3150528^
"KRN",8994,3476,3,1,0)
RESULT(#) ARRAY WITH RESULT(0)=0 IF NO DATA IS RETURNED. RESULT("ERROR")
"KRN",8994,3476,3,2,0)
WILL EQUAL "NO RELATIVE ENTRIES" OR "NO DATA" IF NO FAMILY HISTORY IS
"KRN",8994,3476,3,3,0)
AVAILABLE. IF SUCCESSFUL RESULT(0) WILL EQUAL 1 AND DATA WILL BE FOUND IN
"KRN",8994,3476,3,4,0)
THE RESULT(#) ARRAY SORTED BY DEGREE OF RELATIVE RELATIONSHIP (FIRST
"KRN",8994,3476,3,5,0)
DEGREE THEN SECOND DEGREE), RELATIVE'S RELATIONSHIP, RELATIVE NAME AND
"KRN",8994,3476,3,6,0)
DISEASENAME. THE FIRST 12 PIECES OF EACH RESULT(#) ARE THE 12 DATA
"KRN",8994,3476,3,7,0)
ELEMENTS OF THE ZERO NODE OF FILE #500015 IN ORDER. THE NEXT 7 PIECES ARE
"KRN",8994,3476,3,8,0)
THE 7 DATA ELEMENTS CONTAINED IN THE ZERO NODE OF FILE #500017 IN ORDER.
"KRN",8994,3476,3,9,0)
THE RESULT("PT") NODE CONTAINS THE 10 DATA ELEMENTS OF THE KNR PATIENT 
"KRN",8994,3476,3,10,0)
FAMILY HISTORY ENTRY FOR THE PATIENT.
"KRN",8994,3476,3,11,0)
 
"KRN",8994,3476,3,12,0)
 Below are the first 12 pieces of the Result(#) array (excluding
"KRN",8994,3476,3,13,0)
Result(0)).  This is the entire contents of the FH Relative file entry.
"KRN",8994,3476,3,14,0)
 
"KRN",8994,3476,3,15,0)
^KNR(500015,D0,0)= (#.01) ENTRY NUMBER [1F] ^ (#1) FIRST NAME OF RELATIVE 
"KRN",8994,3476,3,16,0)
==>[2F] ^ (#2) RELATIONSHIP [3P:500013] ^ (#3) VITAL STATUS ==>[4S] ^ (#4)
"KRN",8994,3476,3,17,0)
AGE AT DEATH [5P:500019] ^ (#5) COMMENT [6F] ^ ==>(#6) DATE LAST EDITED
"KRN",8994,3476,3,18,0)
[7D] ^ (#7) LAST EDITED BY [8P:200] ==>^ (#8) FH PATIENT [9P:500003] ^
"KRN",8994,3476,3,19,0)
(#9) RACE [10P:500005] ^ ==>(#10) ETHNICITY [11P:500007] ^ (#11) CURRENT
"KRN",8994,3476,3,20,0)
AGE [12N] ^
"KRN",8994,3476,3,21,0)
 
"KRN",8994,3476,3,22,0)
 Here are the next 7 pieces of the RESULT(#) array.  This is
"KRN",8994,3476,3,23,0)
the entire contents of a disease entry pointing to the relative.
"KRN",8994,3476,3,24,0)
 
"KRN",8994,3476,3,25,0)
^KNR(500017,D0,0)= (#.01) ENTRY NUMBER [1F] ^ (#1) AGE AT DIAGNOSIS 
"KRN",8994,3476,3,26,0)
==>[2P:500019] ^ (#2) DISEASE/CONDITION [3P:500011] ^ (#3) ==>COMMENT [4F]
"KRN",8994,3476,3,27,0)
^ (#4) DATE LAST UPDATED [5D] ^ (#5) LAST ==>UPDATED BY [6P:200] ^ (#.5)
"KRN",8994,3476,3,28,0)
RELATIVE ENTRY NUMBER ==>[7P:500015] ^
"KRN",8994,3476,3,29,0)
 
"KRN",8994,3476,3,30,0)
 Below is the contents of the RESULT(?PT?) node in the RESULT array.  It
"KRN",8994,3476,3,31,0)
contains the entire contents of the KNR FH Family History (PATIENT) entry
"KRN",8994,3476,3,32,0)
in the order below.
"KRN",8994,3476,3,33,0)
 
"KRN",8994,3476,3,34,0)
 ^KNR(500003,D0,0)= (#.01) NAME [1P:2] ^ (#1) DATE ENTERED [2D] ^ (#2)
"KRN",8994,3476,3,35,0)
==>ORIGINATOR [3P:200] ^ (#3) DOCUMENTATION DEFERRED [4S] ^ ==>(#4) DATE
"KRN",8994,3476,3,36,0)
LAST UPDATED [5D] ^ (#5) JEWISH ANCESTRY [6S] ^ ==>(#6) COMMENT [7F] ^
"KRN",8994,3476,3,37,0)
(#7) LAST UPDATED BY [8P:200] ^ (#8) ==>RACE [9P:500005] ^ (#9) ETHNICITY
"KRN",8994,3476,3,38,0)
[10P:500007] ^
"KRN",8994,3477,-1)
0^4
"KRN",8994,3477,0)
KNR EDIT FH DATA^FILE^KNRFHU5^2^P
"KRN",8994,3477,1,0)
^8994.01^2^2^3150812^^^^
"KRN",8994,3477,1,1,0)
ALLOWS USER TO EDIT DATA IN EXISTING ENTRIES OF FILES WITHIN THE CURRENT 
"KRN",8994,3477,1,2,0)
FAMILY HISTORY FILE RANGE 500003-500099.
"KRN",8994,3477,2,0)
^8994.02A^4^4
"KRN",8994,3477,2,1,0)
KNRFILE^1^15^1^1
"KRN",8994,3477,2,1,1,0)
^8994.021^4^4^3150721^^^
"KRN",8994,3477,2,1,1,1,0)
FILE NUMBER
"KRN",8994,3477,2,1,1,2,0)
500003 FOR KNR FAMILY HISTORY
"KRN",8994,3477,2,1,1,3,0)
500015 FOR KNR FH RELATIVE
"KRN",8994,3477,2,1,1,4,0)
500017 FOR KNR FH RELATIVE DISEASE
"KRN",8994,3477,2,2,0)
KNRIENS^1^15^1^2
"KRN",8994,3477,2,2,1,0)
^8994.021^2^2^3150721^^^
"KRN",8994,3477,2,2,1,1,0)
INTERNAL ENTRY NUMBER OF ENTRY TO BE EDITED.  IEN OF PATIENT, RELATIVE OR 
"KRN",8994,3477,2,2,1,2,0)
DISEASE ENTRY.
"KRN",8994,3477,2,3,0)
KNRFIELD^1^10^1^3
"KRN",8994,3477,2,3,1,0)
^^1^1^3150812^
"KRN",8994,3477,2,3,1,1,0)
FIELD NUMBER TO BE EDITED.
"KRN",8994,3477,2,4,0)
KNRDATA^1^99^1^4
"KRN",8994,3477,2,4,1,0)
^^2^2^3150812^
"KRN",8994,3477,2,4,1,1,0)
NEW CONTENTS FOR SPECIFIED FIELD IN EXTERNAL FORMAT.  CHECKS WILL BE 
"KRN",8994,3477,2,4,1,2,0)
PERFORMED BY FILEMAN TO INSURE INPUT MEETS THE FIELD REQUIREMENTS.
"KRN",8994,3477,2,"B","KNRDATA",4)

"KRN",8994,3477,2,"B","KNRFIELD",3)

"KRN",8994,3477,2,"B","KNRFILE",1)

"KRN",8994,3477,2,"B","KNRIENS",2)

"KRN",8994,3477,2,"PARAMSEQ",1,1)

"KRN",8994,3477,2,"PARAMSEQ",2,2)

"KRN",8994,3477,2,"PARAMSEQ",3,3)

"KRN",8994,3477,2,"PARAMSEQ",4,4)

"KRN",8994,3477,3,0)
^8994.03^4^4^3150812^^
"KRN",8994,3477,3,1,0)
RESULT(0)=1^"EDIT SUCCESSFUL" INDICATES SUCCESSFUL EDIT OCCURRED
"KRN",8994,3477,3,2,0)
RESULT(0)=0^"ERROR OCCURRED"^DESCRIPTION OF FILEMAN ERROR
"KRN",8994,3477,3,3,0)
INDICATES UNSUCCESSFUL EDIT. RESULT(0)=0^"NOT A FH FILE" INDICATES A FILE
"KRN",8994,3477,3,4,0)
NUMBER OUTSIDE THE FH RANGE WAS PROVIDED TO THE RPC.  NO EDIT TOOK PLACE.
"MBREQ")
0
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"PKG",578,-1)
1^1
"PKG",578,0)
KNR FAMILY HISTORY^KNR^FAMILY HISTORY INNOVATION PROJECT
"PKG",578,1,0)
^^2^2^3150521^
"PKG",578,1,1,0)
FILES AND RPCS TO SUPPORT THE FAMILY HISTORY GUI DEVELOPED FOR CPRS 
"PKG",578,1,2,0)
VERSION 30.
"PKG",578,7)
^^III
"PKG",578,22,0)
^9.49I^1^1
"PKG",578,22,1,0)
1.0^3160610
"PKG",578,22,1,1,0)
^^1^1^3160610
"PKG",578,22,1,1,1,0)
INITIAL BUILD OF PROTOTYPE COMPLETED.
"PKG",578,"DEV")
GLD/KNR INC.
"PKG",578,"VERSION")
1.0
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
10
"RTN","KNRFHU")
0^1^B91089594
"RTN","KNRFHU",1,0)
KNRFHU ;KNR INC/GLD - FAMILY HISTORY UTILITIES; 1-20-15
"RTN","KNRFHU",2,0)
 ;;1.0;FAMILY HISTORY INNOVATION PROJECT;****;1-20-15;Build 3
"RTN","KNRFHU",3,0)
 ;ADD THE VARIABLE "RESULT" AS THE FIRST VARIABLE IN EACH LINE TAG WHEN USING FOR RPC. REMOVE IT TO TEST IN PROGRAMMER MODE.
"RTN","KNRFHU",4,0)
GETS(RESULT,DFN) ;UTILITY TO GET PATIENT FH HISTORY ENTRY DATA VIA CPRS IN FDA ARRAY FORMAT
"RTN","KNRFHU",5,0)
 I '$D(DFN) S RESULT(0)=0 Q  ;QUIT IF NO DFN PROVIDED
"RTN","KNRFHU",6,0)
 D GETS^DIQ(500003,(DFN_","),"*","E","RESULT","KNRERR") ;PUT ALL FH DATA FOR PATIENT IN RESULT ARRAY
"RTN","KNRFHU",7,0)
 I $D(KNRERR) S RESULT(0)=0,RESULT("ERROR")=KNRERR("DIERR",1,"TEXT",1) Q  ;SET INDICATOR OF FAILURE
"RTN","KNRFHU",8,0)
 I '$D(RESULT) S RESULT(0)=0 Q  ;IF NO RESULTS ARRAY QUIT
"RTN","KNRFHU",9,0)
 S KNRFIELD=0 F  S KNRFIELD=$O(RESULT(500003,(DFN_","),KNRFIELD)) Q:KNRFIELD=""  D  ;LOOP THROUGH FIELD NUMBERS IN ARRAY
"RTN","KNRFHU",10,0)
 . S RESULT(KNRFIELD)=RESULT(500003,(DFN_","),KNRFIELD,"E")_"^"_KNRFIELD Q  ;SET RESULTS ARRAY EQUAL TO FIELD CONTENTS^FIELD NUMBER.
"RTN","KNRFHU",11,0)
 K DFN,KNRFIELD,RESULT(500003) Q  ;QUIT AFTER CLEAN UP OF VARIABLES AND ORIGINAL RESULT ARRAY.
"RTN","KNRFHU",12,0)
CREATE(RESULT,KNRDFN,KNRJEWA,KNRDEF,KNRDUZ,KNRCOMM,KNRRACE,KNRETH) ;CREATES FAMILY HISTORY ENTRY FOR PATIENT. DATE TIME CREATED AND UPDATED WILL BE SET TO NOW.
"RTN","KNRFHU",13,0)
 ;REMOVE RESULT (FIRST VARIABLE PASSED) FROM LINE ABOVE FOR TESTING FROM PROGRAMMER MODE. REPLACE FOR RPC TESTING
"RTN","KNRFHU",14,0)
 ;CREATOR AND UPDATER WILL BE SET TO USER DUZ. DFN OF PATIENT BECOMES IEN OF ENTRY.
"RTN","KNRFHU",15,0)
 I '$D(KNRDFN) S RESULT(0)=0 G CLEAN ;QUIT IF NO DFN PROVIDED
"RTN","KNRFHU",16,0)
 S KNRIEN(1)=KNRDFN ;SET TO DFN FOR IEN OF ENTRY TO BE CREATED
"RTN","KNRFHU",17,0)
 I $D(^KNR(500003,KNRDFN,0)) S RESULT(0)=2,RESULT("ERROR")="DUPLICATE ENTRY" G CLEAN ;QUIT IF PATIENT FAMILY HISTORY ENTRY ALREADY EXISTS.
"RTN","KNRFHU",18,0)
 S KNRFDA(2,500003,"+1,",.01)=KNRDFN ;BUILD FDA TO SET FIELD #.01, PATIENT POINTER, TO DFN
"RTN","KNRFHU",19,0)
 D NOW^%DTC S KNRNOW=$E(%,1,12) ;GET CURRENT DATE AND TIME
"RTN","KNRFHU",20,0)
 S KNRFDA(2,500003,"+1,",1)=KNRNOW ;SET FDA NODE FOR FIELD #1 (DATE TIME CREATED) EQUAL TO CURRENT DATE AND TIME
"RTN","KNRFHU",21,0)
 S KNRFDA(2,500003,"+1,",4)=KNRNOW ;SET FIELD #4 (DATE/TIME LAST UPDATED) EQUAL TO NOW.
"RTN","KNRFHU",22,0)
 S KNRFDA(2,500003,"+1,",8)=KNRRACE ;SET FIELD 8 TO RACE POINTER
"RTN","KNRFHU",23,0)
 S KNRFDA(2,500003,"+1,",9)=KNRETH ;SET FIELD 9 TO ETHNICITY POINTER
"RTN","KNRFHU",24,0)
 S KNRFDA(2,500003,"+1,",5)=KNRJEWA ;SET RESULTS FOR FIELD #3, JEWISH ANCESTRY IF ANY.
"RTN","KNRFHU",25,0)
 S KNRFDA(2,500003,"+1,",3)=KNRDEF ;SET RESULTS FOR FAMILY HISTORY DOCUMENTATION DEFERRED FIELD #3 IF ANY.
"RTN","KNRFHU",26,0)
 S KNRFDA(2,500003,"+1,",2)=KNRDUZ ;SET RESULTS FOR FIELD #2, ORIGINATOR.
"RTN","KNRFHU",27,0)
 S KNRFDA(2,500003,"+1,",7)=KNRDUZ ;SET RESULTS FOR FIELD #7, LAST UPDATED BY
"RTN","KNRFHU",28,0)
 S KNRFDA(2,500003,"+1,",6)=KNRCOMM ;S RESULTS FOR FIELD 7 COMMENT IF ANY
"RTN","KNRFHU",29,0)
 D UPDATE^DIE("","KNRFDA(2)","KNRIEN","KNRERR") ;CALL FM TO CREATED THE ENTRY
"RTN","KNRFHU",30,0)
 S RESULT(0)=1 I $D(KNRERR) S RESULT(0)=0,RESULT("ERROR")=KNRERR("DIERR",1,"TEXT",1) ;INDICATE ERROR OCCURRED
"RTN","KNRFHU",31,0)
CLEAN K KNRIEN,KNRNOW,KNRJEWISH,KRNDEF,KRNCOMM,KNRRACE,KNRETH,KNRDFN ; CLEAN UP VARIABLES
"RTN","KNRFHU",32,0)
 D CLEAN^DILF Q  ;CLEAN FILEMAN ARRAYS AND VARIABLES QUIT
"RTN","KNRFHU",33,0)
GETDG(RESULT) ;GET DISEASE GROUP ARRAY FROM FILE 500009 KNR DISEASE GROUP.  NO INPUT REQUIRED
"RTN","KNRFHU",34,0)
 ;ADD "RESULT" VARIABLE TO LINETAG TO USE FOR RPC.
"RTN","KNRFHU",35,0)
 K RESULT ;KILL/CLEAN RESULT ARRAY
"RTN","KNRFHU",36,0)
 D LIST^DIC(500009,"","","","","","","B","","","RESULT","KNRERR")
"RTN","KNRFHU",37,0)
 I $D(KNRERR) S RESULT(0)=0,RESULT("ERROR")=KNRERR("DIERR",1,"TEXT",1) ;SET FLAG IF ERROR
"RTN","KNRFHU",38,0)
 S KNRNUM=0 F  S KNRNUM=$O(RESULT("DILIST",1,KNRNUM)) Q:KNRNUM'>0  D  ;LOOP THROUGH DISEASE GROUP NAME ARRAY
"RTN","KNRFHU",39,0)
 . S RESULT(KNRNUM)=RESULT("DILIST",1,KNRNUM)_"^"_RESULT("DILIST",2,KNRNUM) Q  ;CREATE NUMBER ARRAY OF DISEASE GROUP NAME^DIEASE GROUP IEN
"RTN","KNRFHU",40,0)
 K KNRNUM,RESULT("DILIST") Q  ;CLEAN UP VARIABLES AND DILIST ARRAY QUIT
"RTN","KNRFHU",41,0)
GETDIS(RESULT) ;GET LISTING OF DISEASES BY GROUP  THIS RPC IS NOT COMPLETE AND MAY NOT BE NEEDED
"RTN","KNRFHU",42,0)
 ;ADD "RESULT" VARIABLE TO LINETAG TO USE WITH RPC
"RTN","KNRFHU",43,0)
 K RESULT,KNRERR ;KILL/CLEAN RESULT AND ERROR ARRAYS
"RTN","KNRFHU",44,0)
 D LIST^DIC(500011,"","","","","","","C","","","RESULT","KNRERR")
"RTN","KNRFHU",45,0)
 I $D(KNRERR) S RESULT(0)=0,RESULT("ERROR")=KNRERR("DIERR",1,"TEXT",1)  ;SET FLAG IF ERROR
"RTN","KNRFHU",46,0)
 Q  ;QUIT
"RTN","KNRFHU",47,0)
TEST(RESULT,NUMBER) S RESULT(0)=NUMBER+2,RESULT(1)=NUMBER+3,RESULT(2)=NUMBER+4 Q
"RTN","KNRFHU",48,0)
 ;ABOVE LINE IS USED TO TEST RPC COMMUNICATIONS
"RTN","KNRFHU",49,0)
ARRAY ;CONVERT STANDARD 1GROUP RESULT ARRAY INTO RESULT ARRAY=TEXT NAME^IEN
"RTN","KNRFHU",50,0)
 ;RESULTS IN ARRAY RESULT("DILIST",1,1)=DISEASE NAME^DISEASE EIN AND KILLS REMAINING RESULT ARRAY
"RTN","KNRFHU",51,0)
 N KNRNUM
"RTN","KNRFHU",52,0)
 S KNRNUM=0 F  S KNRNUM=$O(RESULT("DILIST",1,KNRNUM)) Q:KNRNUM'>0  D  ;LOOP THROUGH DISEASE NAME ARRAY
"RTN","KNRFHU",53,0)
 . S RESULT(KNRNUM)=RESULT("DILIST","ID",KNRNUM,".01")_"^"_RESULT("DILIST",2,KNRNUM) ;ADD IEN AS PIECE 2 OF NAME ARRAY
"RTN","KNRFHU",54,0)
 . S ALPHA(RESULT(KNRNUM))=RESULT(KNRNUM) K RESULT(KNRNUM) Q  ;LOOP THROUGH RESULT ARRAY BUILD ALPHA ARRAY
"RTN","KNRFHU",55,0)
 S KNRALPHA=0 F J=1:1  S KNRALPHA=$O(ALPHA(KNRALPHA)) Q:KNRALPHA=""  D  ;LOOP THROUGH ALPHA ARRAY
"RTN","KNRFHU",56,0)
 . S RESULT(J)=ALPHA(KNRALPHA) Q  ;BUILD ALPHA ARRAY AND MOVE RESULTS TO NUMBERIC RESULT ARRAY
"RTN","KNRFHU",57,0)
 K RESULT("DILIST"),KNRNUM,KNRGP,KNRALPHA,J,ALPHA Q  ;CLEAN UP IEN ONLY ARRAY, VARIABLES AND QUIT
"RTN","KNRFHU",58,0)
ADDR(RESULT,KNRDFN,KNRFNAM,KNRREL,KNRVS,KNRAAD,KNRCOMM,KNRDUZ,KNRRACE,KNRETH,KNRCAGE) ;ADD FIRST VARIABLE "RESULT" FOR USE WITH RPC. REMOVE FOR TESTING IN DIRECT MODE.
"RTN","KNRFHU",59,0)
 ;KNRDFN=PATIENT IEN, KNRFNAM=FIRST NAME, KNRREL=RELATIONSHIP POINTER, KNRVS=VITAL STATUS (L, D OR U)
"RTN","KNRFHU",60,0)
 ;KNRAAD=AGE AT DEATH, KNRCOMM=COMMENT, KNRDUZ=USER IEN, KNRRACE=RACE, KNRETH= RELATIVE ETHNICITY, KNRCAGE=CURRENT AGE.
"RTN","KNRFHU",61,0)
 ;CODE BELOW ADDS A NEW RELATIVE ENTRY
"RTN","KNRFHU",62,0)
 S RESULT(0)=0 I KNRDFN'>0 G CLEAN2 ;QUIT IF NO DFN PROVIDED, PATIENT POINTER, TO DFN (KNR FAMILY HISTORY FILE IS DINMED TO PATIENT FILE)
"RTN","KNRFHU",63,0)
DUP I $D(^KNR(500015,"C",KNRDFN)) S KNRDUP=0 F  S KNRDUP=$O(^KNR(500015,"C",KNRDFN,KNRDUP)) Q:KNRDUP'>0  D  ;LOOP THROUGH PATIENT'S RELATIVES TO CHECK FOR DUPLICATE
"RTN","KNRFHU",64,0)
 . I "^1^2^3^10^11^14^15^16^17^"[(U_KNRREL_U),KNRREL=$P(^KNR(500015,KNRDUP,0),"^",3) S RESULT(0)=2_U_KNRDUP,RESULT("ERROR")="DUPLICATE ENTRY UNIQUE RELATIVE" Q  ;IF RELATIONSHIP DUPLICATE QUIT
"RTN","KNRFHU",65,0)
 . I KNRREL=$P(^KNR(500015,KNRDUP,0),"^",3),KNRFNAM=$P(^KNR(500015,KNRDUP,0),"^",2) S RESULT(0)=2_U_KNRDUP,RESULT("ERROR")="DUPLICATE ENTRY NAME AND RELATIONSHIP" Q  ;IF RELATIONSHIP AND NAME ARE THE SAME RETURN DUPLICATE AND QUIT
"RTN","KNRFHU",66,0)
 . Q
"RTN","KNRFHU",67,0)
 I $P(RESULT(0),U,1)=2 G CLEAN2 ;QUIT IF ATTEMPTING TO CREATE SECOND UNIQUE ENTRY (MOTHER, FATHER, ETC.) OR ONE WITH SAME RELATIONSHIP AND SAME NAME.
"RTN","KNRFHU",68,0)
 D NOW^%DTC S KNRNOW=$E(%,1,12) ;GET CURRENT DATE AND TIME
"RTN","KNRFHU",69,0)
 S KNRFDA(2,500015,"+1,",6)=KNRNOW ;SET FDA NODE FOR FIELD #6 (DATE TIME LAST EDITED) EQUAL TO CURRENT DATE AND TIME
"RTN","KNRFHU",70,0)
 S KNRFDA(2,500015,"+1,",1)=KNRFNAM ;SET FIELD #1 EQUAL TO FIRST NAME (FREE TEXT).
"RTN","KNRFHU",71,0)
 S KNRFDA(2,500015,"+1,",2)=KNRREL ;SET RESULTS FOR FIELD #2 (RELATIONSHIP) TO POINTER TO KNR FH RELATIONSHIP FILE.
"RTN","KNRFHU",72,0)
 S KNRFDA(2,500015,"+1,",3)=KNRVS ;SET TO VITAL STATUS FIELD #3 CODE (L=LIVING, D=DECEASED, U=UNKNOWN)
"RTN","KNRFHU",73,0)
 S KNRFDA(2,500015,"+1,",4)=KNRAAD ;SET RESULTS FOR FIELD #4, AGE AT DEATH, POINTER TO KNR FH AGE FILE
"RTN","KNRFHU",74,0)
 S KNRFDA(2,500015,"+1,",7)=KNRDUZ ;SET RESULTS FOR FIELD #7, LAST UPDATED BY
"RTN","KNRFHU",75,0)
 S KNRFDA(2,500015,"+1,",5)=KNRCOMM ;S RESULTS FOR FIELD 7 COMMENT IF ANY
"RTN","KNRFHU",76,0)
 S KNRFDA(2,500015,"+1,",8)=KNRDFN ;SET VALUE FOR FIELD 8 TO KNR FAMILY HISTORY PATIENT IEN
"RTN","KNRFHU",77,0)
 S KNRFDA(2,500015,"+1,",9)=KNRRACE ;SET VALUE FOR FIELD 9 RELATIVE'S RACE
"RTN","KNRFHU",78,0)
 S KNRFDA(2,500015,"+1,",10)=KNRETH ;SET VALUE FOR FIELD 10 RELATIVE'S ETHNICITY
"RTN","KNRFHU",79,0)
 S KNRFDA(2,500015,"+1,",11)=KNRCAGE ;SET VALUE FOR FIELD 11 RELATIVE'S CURRENT AGE
"RTN","KNRFHU",80,0)
 L +^KNR(500015,0):3 I $T S KNRIEN(1)=$P(^KNR(500015,0),"^",3)+1 ;IF LOCK SUCCESSFUL SET ENTRY NUMBER EQUAL TO LAST ENTRY NUMBER+1
"RTN","KNRFHU",81,0)
 I '+$D(KNRIEN(1)) S RESULT(0)=0_"^"_"FILE LOCKED" G CLEAN2 ;QUIT IF UNABLE TO LOCK ZERO NODE
"RTN","KNRFHU",82,0)
 S KNRFDA(2,500015,"+1,",.01)="FH"_KNRIEN(1) ;SET VALUE FOR .01 FIELD 
"RTN","KNRFHU",83,0)
 D UPDATE^DIE("","KNRFDA(2)","KNRIEN","KNRERR") ;CALL FM TO CREATED THE ENTRY
"RTN","KNRFHU",84,0)
 L -^KNR(500015,0) ;UNLOCK ZERO NODE
"RTN","KNRFHU",85,0)
 S RESULT(0)=1_"^"_KNRIEN(1) I $D(KNRERR) S RESULT(0)=0,RESULT("ERROR")=KNRERR("DIERR",1,"TEXT",1) ;INDICATE ERROR OCCURRED
"RTN","KNRFHU",86,0)
 ;RETURN RESULT(0)=1^IEN OF NEW ENTRY IF NO ERROR.
"RTN","KNRFHU",87,0)
CLEAN2 K KNRNOW,KNRREL,KNRFNAM,KRNDUZ,KRNCOMM,KNRVS,KNRDFN,KNRIEN,KNRDUPR,KNRDUP,KNRCAGE,KNRAAD ; CLEAN UP VARIABLES
"RTN","KNRFHU",88,0)
 D CLEAN^DILF Q  ;CLEAN FILEMAN ARRAYS AND VARIABLES QUIT
"RTN","KNRFHU",89,0)
ADDD(RESULT,KNRREL,KNRAADI,KNRDIS,KNRCOMM,KNRDUZ) ;ADD DISEASE ENTRY.  REMOVE FIRST VARIABLE "RESULT" FOR TESTING IN DIRECT MODE.
"RTN","KNRFHU",90,0)
 ;DFN=IEN OF FH PATIENT, KNRREL=IEN OF RELATIVE, KNRAADI=AGE AT DIAGNOSIS, KNRDIS=IEN OF DISEASE/CONDITION
"RTN","KNRFHU",91,0)
 ;KNRCOMM=FREE TEXT COMMENT, KNRDUZ=IEN OF USER, KNRFNAM=FIRST NAME OF RELATIE.
"RTN","KNRFHU",92,0)
 K RESULT ;CLEAN UP RESULT
"RTN","KNRFHU",93,0)
 I $G(KNRREL)'>0 S RESULT(0)=0 G CLEAN3 ;QUIT IF NO RELATIVE IEN.
"RTN","KNRFHU",94,0)
 I '$D(^KNR(500015,KNRREL,0)) S RESULT(0)=0,RESULT("ERROR")="NO RELATIVE ENTRY" G CLEAN3 ;QUIT IF NO RELATIVE FILE ENTRY
"RTN","KNRFHU",95,0)
DUP2 I $D(^KNR(500017,"C",KNRREL)) S KNRDUP=0 F  S KNRDUP=$O(^KNR(500017,"C",KNRREL,KNRDUP)) Q:KNRDUP'>0  D  ;LOOP THROUGH RELATIVE'S DISEASE ENTRIES
"RTN","KNRFHU",96,0)
 . I KNRDIS=$P(^KNR(500017,KNRDUP,0),"^",3) S RESULT(0)=2,RESULT("ERROR")="DUPLICATE ENTRY" Q  ;IF RELATIVE ALREADY HAS THIS DISEASE ENTRY QUIT RETURN DUPLICATE.
"RTN","KNRFHU",97,0)
 . Q
"RTN","KNRFHU",98,0)
 I $G(RESULT(0))=2 G CLEAN3 ;QUIT IF ATTEMPTING TO ENTER A DUPLICATE DISEASE FOR THE RELATIVE.
"RTN","KNRFHU",99,0)
 D NOW^%DTC S KNRNOW=$E(%,1,12) ;GET CURRENT DATE AND TIME
"RTN","KNRFHU",100,0)
 S KNRFDA(2,500017,"+1,",.5)=KNRREL ;SET FDA NODE FOR FIELD #6 (DATE TIME LAST EDITED) EQUAL TO CURRENT DATE AND TIME
"RTN","KNRFHU",101,0)
 S KNRFDA(2,500017,"+1,",1)=KNRAADI ;SET FIELD #1 EQUAL TO AGE AT DIAGNOSIS POINTER TO KNR FH AGE FILE.
"RTN","KNRFHU",102,0)
 S KNRFDA(2,500017,"+1,",2)=KNRDIS ;SET RESULTS FOR FIELD #2 (DISEASE) TO POINTER TO KNR FH DISEASE/CONDITION FILE.
"RTN","KNRFHU",103,0)
 S KNRFDA(2,500017,"+1,",3)=KNRCOMM ;SET TO COMMENT FIELD #3
"RTN","KNRFHU",104,0)
 S KNRFDA(2,500017,"+1,",4)=KNRNOW ;SET RESULTS FOR FIELD #4, DATE LAST UPDATED
"RTN","KNRFHU",105,0)
 S KNRFDA(2,500017,"+1,",5)=KNRDUZ ;SET RESULTS FOR FIELD #7, LAST UPDATED BY TO USER FILE DUZ/IEN
"RTN","KNRFHU",106,0)
 L +^KNR(500017,0):3 I $T K KNRIEN S KNRIEN(1)=$P(^KNR(500017,0),"^",3)+1 ;IF LOCK SUCCESSFUL SET ENTRY NUMBER EQUAL TO LAST ENTRY NUMBER+1
"RTN","KNRFHU",107,0)
 I '+$D(KNRIEN(1)) S RESULT("ERROR")="FILE LOCKED BY ANOTHER USER",RESULT(0)=0 G CLEAN3 ;QUIT IF UNABLE TO LOCK ZERO NODE
"RTN","KNRFHU",108,0)
 S KNRFDA(2,500017,"+1,",.01)="FHD"_KNRIEN(1) ;SET VALUE FOR .01 FIELD TO FHD_LAST ENTRY NUMBER +1
"RTN","KNRFHU",109,0)
 D UPDATE^DIE("","KNRFDA(2)","KNRIEN","KNRERR") ;CALL FM TO CREATED THE ENTRY
"RTN","KNRFHU",110,0)
 L -^KNR(500017,0) ;UNLOCK ZERO NODE
"RTN","KNRFHU",111,0)
 S RESULT(0)=1_"^"_KNRIEN(1) I $D(KNRERR) S RESULT(0)=0,RESULT("ERROR")=KNRERR("DIERR",1,"TEXT",1) ;INDICATE ERROR OCCURRED
"RTN","KNRFHU",112,0)
CLEAN3 K KNRIEN,KNRNOW,KNRREL,KRNDUZ,KRNCOMM,KNRERR,KNRAADI,KNRDUP ; CLEAN UP VARIABLES
"RTN","KNRFHU",113,0)
 D CLEAN^DILF Q  ;CLEAN UP FILEMAN VARIABLES AND ARRAYS QUIT
"RTN","KNRFHU",114,0)
RACE(RESULT) ;GET LIST OF RACE ENTRIES IN ALPHA ORDER.  NO PARAMETERS REQUIRED.
"RTN","KNRFHU",115,0)
 ;ADD "RESULT" VARIABLE TO LINETAG TO USE FOR RPC.
"RTN","KNRFHU",116,0)
 K RESULT ;KILL/CLEAN RESULT ARRAY
"RTN","KNRFHU",117,0)
 D LIST^DIC(500005,"","","","","","","B","","","RESULT","KNRERR")
"RTN","KNRFHU",118,0)
 I $D(KNRERR) S RESULT(0)=0,RESULT("ERROR")=KNRERR("DIERR",1,"TEXT",1) ;SET FLAG IF ERROR
"RTN","KNRFHU",119,0)
 S KNRNUM=0 F  S KNRNUM=$O(RESULT("DILIST",1,KNRNUM)) Q:KNRNUM'>0  D  ;LOOP THROUGH DISEASE GROUP NAME ARRAY
"RTN","KNRFHU",120,0)
 . S RESULT(KNRNUM)=RESULT("DILIST",1,KNRNUM)_"^"_RESULT("DILIST",2,KNRNUM) Q  ;CREATE NUMBER ARRAY OF DISEASE GROUP NAME^DIEASE GROUP IEN
"RTN","KNRFHU",121,0)
 K KNRNUM,RESULT("DILIST") Q  ;CLEAN UP VARIABLES AND DILIST ARRAY QUIT
"RTN","KNRFHU",122,0)
ETHN(RESULT) ;GET LIST OF ETHNICITY ENTRIES IN ALPHA ORDER.  NO PARAMETERS REQUIRED.
"RTN","KNRFHU",123,0)
 ;ADD "RESULT" VARIABLE TO LINETAG TO USE FOR RPC.
"RTN","KNRFHU",124,0)
 K RESULT ;KILL/CLEAN RESULT ARRAY
"RTN","KNRFHU",125,0)
 D LIST^DIC(500007,"","","","","","","B","","","RESULT","KNRERR")
"RTN","KNRFHU",126,0)
 I $D(KNRERR) S RESULT(0)=0,RESULT("ERROR")=KNRERR("DIERR",1,"TEXT",1) ;SET FLAG IF ERROR
"RTN","KNRFHU",127,0)
 S KNRNUM=0 F  S KNRNUM=$O(RESULT("DILIST",1,KNRNUM)) Q:KNRNUM'>0  D  ;LOOP THROUGH DISEASE GROUP NAME ARRAY
"RTN","KNRFHU",128,0)
 . S RESULT(KNRNUM)=RESULT("DILIST",1,KNRNUM)_"^"_RESULT("DILIST",2,KNRNUM) Q  ;CREATE NUMBER ARRAY OF DISEASE GROUP NAME^DIEASE GROUP IEN
"RTN","KNRFHU",129,0)
 K KNRNUM,RESULT("DILIST") Q  ;CLEAN UP VARIABLES AND DILIST ARRAY QUIT
"RTN","KNRFHU",130,0)
AGE(RESULT) ;GET LIST OF AGE ENTRIES FROM KNR FH AGE FILE 500019.
"RTN","KNRFHU",131,0)
 ;ADD "RESULT" VARIABLE TO LINETAG TO USE FOR RPC.
"RTN","KNRFHU",132,0)
 K RESULT ;KILL/CLEAN RESULT ARRAY
"RTN","KNRFHU",133,0)
 D LIST^DIC(500019,"","","","","","","B","","","RESULT","KNRERR")
"RTN","KNRFHU",134,0)
 I $D(KNRERR) S RESULT(0)=0,RESULT("ERROR")=KNRERR("DIERR",1,"TEXT",1) ;SET FLAG IF ERROR
"RTN","KNRFHU",135,0)
 S KNRNUM=0 F  S KNRNUM=$O(RESULT("DILIST",1,KNRNUM)) Q:KNRNUM'>0  D  ;LOOP THROUGH DISEASE GROUP NAME ARRAY
"RTN","KNRFHU",136,0)
 . S RESULT(KNRNUM)=RESULT("DILIST",1,KNRNUM)_"^"_RESULT("DILIST",2,KNRNUM) Q  ;CREATE NUMBER ARRAY OF DISEASE GROUP NAME^DIEASE GROUP IEN
"RTN","KNRFHU",137,0)
 K KNRNUM,RESULT("DILIST") Q  ;CLEAN UP VARIABLES AND DILIST ARRAY QUIT
"RTN","KNRFHU",138,0)
GETSR(RESULT,DFN) ;GETS ARRAY OF ALL RELATIVES OF SELECTED PATIENT
"RTN","KNRFHU",139,0)
 ;REQUIRES DFN OF FAMILY HISTORY PATIENT RETURNS RESULT(0)=0 IF NOT SUCCESSFUL
"RTN","KNRFHU",140,0)
 I '$D(DFN) S RESULT(0)=0 Q  ;QUIT IF NO DFN PROVIDED
"RTN","KNRFHU",141,0)
 S KNRREL=0 F  S KNRREL=$O(^KNR(500015,"C",DFN,KNRREL)) Q:KNRREL'>0  D  ;LOOP THROUGH PATIENT CROSS REFERENCE OF RELATIVES
"RTN","KNRFHU",142,0)
 . S RESULT(KNRREL)=^KNR(500015,KNRREL,0) Q  ;SET RESULT ARRAY EQUAL TO ZERO NODE OF RELATIVE FILE ENTRY.
"RTN","KNRFHU",143,0)
 S RESULT(0)=1 I '$D(RESULT) S RESULT(0)=0 Q  ;IF NO RESULTS ARRAY QUIT
"RTN","KNRFHU",144,0)
 K DFN,KNRREL Q  ;QUIT AFTER CLEAN UP OF VARIABLES AND ORIGINAL RESULT ARRAY.
"RTN","KNRFHU",145,0)
GETSD(RESULT,KNRREL) ;GETS ARRAY OF ALL DISEASES FROM FILE 500017 KNR RELATIVE DISEASES/CONDITIONS FOR A SELECTED RELATIVE
"RTN","KNRFHU",146,0)
 ;REQUIRES IEN OF RELATIVE IN FILE 500015 KNR RELATIVE.
"RTN","KNRFHU",147,0)
 I '$D(KNRREL) S RESULT(0)=0 Q  ;QUIT IF NO DFN PROVIDED
"RTN","KNRFHU",148,0)
 S KNRDIS=0 F  S KNRDIS=$O(^KNR(500017,"C",KNRREL,KNRDIS)) Q:KNRDIS'>0  D  ;LOOP THROUGH RELATIVE CROSS REFERENCE OF RELATIVES
"RTN","KNRFHU",149,0)
 . S RESULT(KNRDIS)=^KNR(500017,KNRDIS,0) Q  ;SET RESULT ARRAY EQUAL TO ZERO NODE OF DISEASE IN KNR RELATIVE DISEASES/CONDITIONS FILE.
"RTN","KNRFHU",150,0)
 I $D(RESULT) S RESULT(0)=1 ;IF NO RESULTS ARRAY SET INDICATOR OF FAILURE
"RTN","KNRFHU",151,0)
 K KNRREL,KNRDIS Q  ;KILL VARIABLES AND QUIT
"RTN","KNRFHU1")
0^2^B10570836
"RTN","KNRFHU1",1,0)
KNRFHU1 ;KNR INC/GLD - FAMILY HISOTRY UTILITIES; 2-28-15
"RTN","KNRFHU1",2,0)
 ;;1.0;FAMILY HISORY INNOVATION PROJECT;****;2-28-25;Build 3
"RTN","KNRFHU1",3,0)
 ;GETS ZERO NODE OF PATIENT, EACH OF PATIENT'S RELATIVES AND EACH DISEASE ENTRY FOR EACH RELATIVE
"RTN","KNRFHU1",4,0)
 ;INPUT PARAMATER: INTERNAL ENTRY NUMBER/DFN OF KNR FAMILY HISOTRY ENTRY PATIENT (DINUMED TO FILE 2)
"RTN","KNRFHU1",5,0)
 ;OUTPUT RESULT:  AN ARRAY WITH SUBSCRIPT ("KNRALL",$J,#)=CONTENTS OF ZERO NODES.
"RTN","KNRFHU1",6,0)
 ;RETURNS THE ENTIRE ZERO NODE OF PATIENT, THE ZERO NODE OF EACH RELATIVE OF THAT PATIENT AND THE ZERO NODE OF
"RTN","KNRFHU1",7,0)
 ;EACH DISEASE ENTRY ASSOCIATED WITH EACH RELATIVE OF THE SPECIFIED PATIENT.
"RTN","KNRFHU1",8,0)
GETALL(RESULT,DFN) ;DFN OF PATIENT WHICH IS EQUAL TO IEN OF PATIENT'S ENTRY IN KNR FAMILY HISTORY FILE.
"RTN","KNRFHU1",9,0)
 N KNRREL,KNRDIS,CNT K ^TMP($J,"KNRALL") ;NEW VARIABLES AND KILL ^TMP
"RTN","KNRFHU1",10,0)
 S RESULT=$NA(^TMP($J,"KNRALL")) ;SET RESULT TO GLOBAL ARRAY NAME
"RTN","KNRFHU1",11,0)
 I '$D(DFN) S ^TMP($J,"KNRALL",1)=0_"^"_"NO DFN" Q  ;RETURN ERROR MESSAGE IF NO DFN
"RTN","KNRFHU1",12,0)
 I '$D(^KNR(500003,DFN,0)) S ^TMP($J,"KNRALL",1)=0_"^"_"NO FAMILY HISTORY FILE ENTRY FOR THIS PATIENT" Q  ; RETURN MESSAGE AND QUIT
"RTN","KNRFHU1",13,0)
 S CNT=0 ;BEGIN NODE COUNT AT ZERO.
"RTN","KNRFHU1",14,0)
 S CNT=CNT+1,^TMP($J,"KNRALL",CNT)=^KNR(500003,DFN,0) ;SET ^TMP NODE EQUAL TO ZERO NODE OF PATIENT ENTRY
"RTN","KNRFHU1",15,0)
 S KNRREL=0 F  S KNRREL=$O(^KNR(500015,"C",DFN,KNRREL)) Q:KNRREL'>0  D  ;LOOP THROUGH PATIENT'S RELATIVES
"RTN","KNRFHU1",16,0)
 . S CNT=CNT+1,^TMP($J,"KNRALL",CNT)=^KNR(500015,KNRREL,0) ;SET ^TMP NODE = ZERO NODE OF RELATIVE
"RTN","KNRFHU1",17,0)
 . S KNRDIS=0 F  S KNRDIS=$O(^KNR(500017,"C",KNRREL,KNRDIS)) Q:KNRDIS'>0  D  ;LOOP THROUGH RELATIVE'S DISEASE ENTRIES
"RTN","KNRFHU1",18,0)
 .. S CNT=CNT+1,^TMP($J,"KNRALL",CNT)=^KNR(500017,KNRDIS,0) Q  ;SET ^TMP NODE=ZERO NODE OF DISEASE ENTRY
"RTN","KNRFHU1",19,0)
 . Q
"RTN","KNRFHU1",20,0)
 K DFN,KNRREL,KNRDIS,CNT Q  ; CLEAN UP VARIABLES AND QUIT
"RTN","KNRFHU1",21,0)
GROUP(RESULT,KNRGP) ;GET AN ARRAY OF DISEASES IN ONE GROUP
"RTN","KNRFHU1",22,0)
 ;INPUT: DISEASE GROUP INTERNAL ENTRY NUMBER.
"RTN","KNRFHU1",23,0)
 ;OUTPUT ARRAY:  RESULT(#)=GROUP IEN^DISEASE NAME^DISEASE IEN
"RTN","KNRFHU1",24,0)
 N KNRDIS,CNT ;NEW VARIABLES USED BELOW
"RTN","KNRFHU1",25,0)
 K RESULT ;CLEAN RESULT ARRAY
"RTN","KNRFHU1",26,0)
 S (KNRDIS,CNT)=0 F  S KNRDIS=$O(^KNR(500011,"C",KNRGP,KNRDIS)) Q:KNRDIS'>0  D  ;LOOP THROUGH GROUP XREF OF DISEASE FILE
"RTN","KNRFHU1",27,0)
 . S CNT=CNT+1,RESULT(CNT)=KNRGP_"^"_$P(^KNR(500011,KNRDIS,0),"^",1)_"^"_KNRDIS Q  ;SET RESULT=GROUP IEN^DISEASE NAME^DISEASE IEN
"RTN","KNRFHU1",28,0)
 K KNRGP,KNRDIS,CNT Q  ;CLEAN VARIABLES AND QUIT
"RTN","KNRFHU1",29,0)
GETR(RESULT) ;GET ARRAY OF ALL RELATIONSHIPS FROM FILE 500013, KNRFH RELATIONSHIP FILE
"RTN","KNRFHU1",30,0)
 ;NO INPUT DATA REQUIRED
"RTN","KNRFHU1",31,0)
 ;RETURNS RESULT(#)=RELATIONSHIP NAME^RELATIONSHIP IEN
"RTN","KNRFHU1",32,0)
 N KNRREL,CNT,KNRIEN,KNRDISP ;NEW VARIABLES USED BELOW
"RTN","KNRFHU1",33,0)
 S KNRDISP=0,CNT=0 ;SET VARIABLE DISPLAY ORDER TO ZERO
"RTN","KNRFHU1",34,0)
 F  S KNRDISP=$O(^KNR(500013,"AC",KNRDISP)) Q:KNRDISP'>0  D  ;LOOP THROUGH DISPLAY ORDER XREF OF RELATIONSHIP FILE
"RTN","KNRFHU1",35,0)
 . S KNRIEN=0 F  S KNRIEN=$O(^KNR(500013,"AC",KNRDISP,KNRIEN)) Q:KNRIEN'>0  D  ;LOOP THROUGH GET IEN OF RELATIONSHIP
"RTN","KNRFHU1",36,0)
 .. S CNT=CNT+1,RESULT(CNT)=$P(^KNR(500013,KNRIEN,0),U,1)_"^"_KNRIEN Q  ;SET RESULT ARRAY
"RTN","KNRFHU1",37,0)
 K KNRREL,KNRIEN,CNT,KNRDISP Q  ;CLEAN UP VARIABLES AND QUIT
"RTN","KNRFHU1",38,0)
JEWANS(RESULT) ;SENDS CODES AND MEANING FOR JEWISH ANCESTRY QUESTION FOR FILE 500003.  NO INPUT REQUIRED.
"RTN","KNRFHU1",39,0)
 S RESULT(1)="Y"_U_"YES MATERNAL AND PATERNAL"
"RTN","KNRFHU1",40,0)
 S RESULT(2)="N"_U_"NO"
"RTN","KNRFHU1",41,0)
 S RESULT(3)="U"_U_"UNKNOWN"
"RTN","KNRFHU1",42,0)
 S RESULT(4)="D"_U_"DECLINED TO ANSWER"
"RTN","KNRFHU1",43,0)
 S RESULT(5)="P"_U_"YES PATERNAL ONLY"
"RTN","KNRFHU1",44,0)
 S RESULT(6)="M"_U_"YES MATERNAL ONLY"
"RTN","KNRFHU1",45,0)
 Q
"RTN","KNRFHU1",46,0)
DOCDEF(RESULT) ;SENDS CODES AND MEANING FOR DEFERRED FH REASON QUESTION FOR FILE 500003.  NO INPUT REQUIRED.
"RTN","KNRFHU1",47,0)
 S RESULT(1)="U"_U_"UNABLE TO COLLECT FROM PATIENT OR GUARDIAN"
"RTN","KNRFHU1",48,0)
 S RESULT(2)="R"_U_"PATIENT REFUSED TO PROVIDE FAMILY HISTORY"
"RTN","KNRFHU1",49,0)
 S RESULT(3)="L"_U_"LIMITED LIFE EXPECTANCY"
"RTN","KNRFHU1",50,0)
 S RESULT(4)="D"_U_"DEFERRED TO LATER VISIT"
"RTN","KNRFHU1",51,0)
 Q
"RTN","KNRFHU2")
0^3^B39294914
"RTN","KNRFHU2",1,0)
KNRFHU2 ;KNR INC/GLD - FAMILY HISTORY UTILITIES; 1-20-15 ; 28 May 2015  6:43 PM
"RTN","KNRFHU2",2,0)
 ;;1.0;FAMILY HISORY INNOVATION PROJECT;****; 3-14-15;Build 3
"RTN","KNRFHU2",3,0)
 ;THIS ROUTINE IS USED BY THE KNR FH CREATE PN RPC TO GATHER AND PLACE FH DATA IN A PROGRESS NOTE
"RTN","KNRFHU2",4,0)
 ;FOR TESTING PURPOSES THE PN TITLE WILL BE "FAMILY HISTORY TOOL OUTPUT"
"RTN","KNRFHU2",5,0)
MAKE(RESULT,DFN,DUZ,VLOC,VDT,VSTR) ;FIRST VARIABLE PASSED "RESULT" SHOULD BE REMOVED FOR TESTING IN PROGRAMMER MODE. 
"RTN","KNRFHU2",6,0)
 ;DFN IS THE PATIENT IEN.IF NOT SUCCESSFUL RESULT=0 WILL BE RETURNED.  IF SUCCESSFUL RESULT WILL EQUAL
"RTN","KNRFHU2",7,0)
 ;THE INTERNAL ENTRY NUMBER OF THE PROGRESS NOTE CREATED.  DUZ IS THE USER IEN.
"RTN","KNRFHU2",8,0)
 ;KNRPNT IS THE IEN OF THE PROGRESS NOT TITLE.  IN THE SANDBOX ACCOUNT CPRS30 THAT IS 262.
"RTN","KNRFHU2",9,0)
 N TITLE,NOASF,TIUX,KNRDIS,KNR0,KNRV,KNRV2,KNRV3,CNT,KNRDIS,KNRREL,VDT,VLOC,VSIT,VSTR,SUPPRESS ;NEW VARIABLES USED BELOW
"RTN","KNRFHU2",10,0)
 I '$D(VLOC) S VLOC="" ;IF OPTIONAL VISIT LOCATION IS NOT PROVIDED SET TO NULL
"RTN","KNRFHU2",11,0)
 I '$D(VDT) S VDT="" ;IF OPTIONAL VISIT DATE/TIME IS NOT PROVIDED SET TO NULL
"RTN","KNRFHU2",12,0)
 I '$D(VSTR) S VSTR="" ;IF OPTIONAL VISIT STRING IS NOT PROVIDED SET TO NULL
"RTN","KNRFHU2",13,0)
 S TIUX(.02)=DFN ;SET PATIENT NODE IN TIUX ARRAY
"RTN","KNRFHU2",14,0)
 D NOW^%DTC S TIUX(1301)=% ;SET REFERENCE DATE TIME FOR NOTE EQUAL TO NOW
"RTN","KNRFHU2",15,0)
 S TIUX(1302)=DUZ ;SET AUTHOR OF PROGRESS NOT EQUAL TO THE USER IEN.
"RTN","KNRFHU2",16,0)
PAT ;CREATE TEXT LINES FROM PATIENT ENTRY
"RTN","KNRFHU2",17,0)
 S CNT=0 ;BEGIN LINE COUNT AT ZERO
"RTN","KNRFHU2",18,0)
 I '$D(^KNR(500003,DFN,0)) S RESULT=0 Q  ;IF NO FH ENTRY FOR PATIENT INDICATE FAILURE AND QUIT.
"RTN","KNRFHU2",19,0)
 S KNR0=^KNR(500003,DFN,0) ;SET VARIABLE EQUAL TO ZERO NODE OF patient entry.
"RTN","KNRFHU2",20,0)
 S CNT=CNT+1,TIUX("TEXT",CNT,0)="THE INFORMATION BELOW WAS TRANSFERRED FROM THE FAMILY HISTORY COLLECTION TOOL TO THIS NOTE."
"RTN","KNRFHU2",21,0)
 S CNT=CNT+1,TIUX("TEXT",CNT,0)="   " ;ADD BLANK LINE FOR READABILITY
"RTN","KNRFHU2",22,0)
 S KNRV=$P(KNR0,"^",4) I KNRV'="",'$D(^KNR(500015,"C",DFN)) D  ;IF DEFERRED REASON AND NO RELATIVE ENTRIES INCLUDE DEFERRED REASON
"RTN","KNRFHU2",23,0)
 . S CNT=CNT+1
"RTN","KNRFHU2",24,0)
 . I KNRV="U" S TIUX("TEXT",CNT,0)="FAMILY HISTORY DOCUMENTATION DEFERRED.  UNABLE TO COLLECT FROM PATAIENT OR GUARDIAN." Q  ;
"RTN","KNRFHU2",25,0)
 . I KNRV="R" S TIUX("TEXT",CNT,0)="FAMILY HISTORY DOCUMENTATION DEFERRED.  THE PATIENT DECLINED TO PROVIDE A FAMILY HISTORY." Q  ;
"RTN","KNRFHU2",26,0)
 . I KNRV="L" S TIUX("TEXT",CNT,0)="FAMILY HISTORY DOCUMENTATION DEFERRED DUE TO THE PATIENT'S LIMITED LIFE EXPECTANCY. " Q  ;
"RTN","KNRFHU2",27,0)
 . I KNRV="D" S TIUX("TEXT",CNT,0)="FAMILY HISTORY DOCUMENTATION DEFERRED TO A LATER VISIT." Q  ;
"RTN","KNRFHU2",28,0)
 . Q  ;
"RTN","KNRFHU2",29,0)
 S KNRV=$P(KNR0,"^",9) I KNRV'="" D  ;SET KNRV=CODE POINTER TO RACE FILE
"RTN","KNRFHU2",30,0)
 . S CNT=CNT+1,TIUX("TEXT",CNT,0)="PATIENT'S RACE: "_$P(^KNR(500005,KNRV,0),"^",1) Q  ;
"RTN","KNRFHU2",31,0)
 S KNRV=$P(KNR0,"^",10) I KNRV'="" D  ;SET KNRV=CODE POINTER TO ETHNICITY FILE
"RTN","KNRFHU2",32,0)
 . S CNT=CNT+1,TIUX("TEXT",CNT,0)="PATIENT'S ETHNICITY: "_$P(^KNR(500005,KNRV,0),"^",1) Q  ;
"RTN","KNRFHU2",33,0)
 S KNRV=$P(KNR0,"^",6) I KNRV'="" D  ;SET KNRV=CODE FOR JEWISH ANCESTRY
"RTN","KNRFHU2",34,0)
 . S CNT=CNT+1 I KNRV="Y" S TIUX("TEXT",CNT,0)="PATIENT HAS BOTH MATERNAL AND PATERNAL JEWISH ANCESTRY" Q  ;
"RTN","KNRFHU2",35,0)
 . I KNRV="N" S TIUX("TEXT",CNT,0)="PATIENT DOES NOT HAVE JEWISH ANCESTRY." Q  ;
"RTN","KNRFHU2",36,0)
 . I KNRV="U" S TIUX("TEXT",CNT,0)="PATIENT'S JEWISH ANCESTRY IS UNKNOWN." Q  ;
"RTN","KNRFHU2",37,0)
 . I KNRV="D" S TIUX("TEXT",CNT,0)="PATIENT DECLINED TO ANSWER JEWISH ANCESTRY QUESTION." Q  ;
"RTN","KNRFHU2",38,0)
 . I KNRV="P" S TIUX("TEXT",CNT,0)="PATIENT HAS ONLY PATERNAL JEWISH ANCESTRY." Q  ;
"RTN","KNRFHU2",39,0)
 . I KNRV="M" S TIUX("TEXT",CNT,0)="PATIENT HAS ONLY MATERNAL JEWISH ANCESTRY." Q  ;
"RTN","KNRFHU2",40,0)
 . Q  ;
"RTN","KNRFHU2",41,0)
 S KNRV=$P(KNR0,"^",7) I KNRV'="" D  ;SET KNRV=CODE POINTER TO PATIENT COMMENT
"RTN","KNRFHU2",42,0)
 . S CNT=CNT+1,TIUX("TEXT",CNT,0)="PATIENT COMMENT: "_KNRV Q  ;SET TEXT LINE TO COMMENT
"RTN","KNRFHU2",43,0)
REL ;LOOP THROUGH RELATIVE ENTRIES FOR THIS PATIENT IF ANY
"RTN","KNRFHU2",44,0)
 D ARRAY ;BUILD ARRAY OF RELATIVES IN RELATIONSHIP DISPLAY ORDER
"RTN","KNRFHU2",45,0)
 S KNRDORD=0 F  S KNRDORD=$O(^TMP($J,KNRDORD)) Q:KNRDORD'>0  D  ;LOOP THROUGH RELATIVE RELATIONSHIP DISPLAY ORDER
"RTN","KNRFHU2",46,0)
 . S KNRREL=0 F  S KNRREL=$O(^TMP($J,KNRDORD,KNRREL)) Q:KNRREL'>0  D  ;LOOOP THROUGH RELATIVES IN RELATIONSHIP DISPLAY ORDER ARRAY
"RTN","KNRFHU2",47,0)
 .. S CNT=CNT+1,TIUX("TEXT",CNT,0)="______________________________________________________________________________" ;WRITE BLANK LINE BETWEEN RELATIVES FOR READABILITY
"RTN","KNRFHU2",48,0)
 .. S KNR0=^KNR(500015,KNRREL,0) ;SET KNR0=CONTENTS OF RELATIVE ZERO NODE.
"RTN","KNRFHU2",49,0)
 .. S KNRV=$P(KNR0,"^",2) ;SET KNRV=RELATIVE'S FIRST NAME
"RTN","KNRFHU2",50,0)
 .. S KNRV2=$P(KNR0,"^",3),KNRV2=$P(^KNR(500013,KNRV2,0),"^",1) ;S KNRV2=RELATIONSHIP
"RTN","KNRFHU2",51,0)
 .. S KNRV3=$P(KNR0,"^",4) ;SET KNRV3=VITAL STATUS
"RTN","KNRFHU2",52,0)
 .. S KNRV3=$S(KNRV3="L":"LIVING",KNRV3="D":"DECEASED",KNRV3="U":"UNKNOWN",1:"") ;EXPAND VITAL STATUS CODE
"RTN","KNRFHU2",53,0)
 .. S CNT=CNT+1,TIUX("TEXT",CNT,0)="RELATIVE NAME: "_KNRV ;WRITE NAME ON ONE LIINE
"RTN","KNRFHU2",54,0)
 .. S CNT=CNT+1,TIUX("TEXT",CNT,0)="RELATIONSHIP: "_KNRV2 ;WRITE RELATIONSHIP ON ONE LINE
"RTN","KNRFHU2",55,0)
 .. S CNT=CNT+1,TIUX("TEXT",CNT,0)="VITAL STATUS: "_KNRV3 ;WRITE VITAL STATUS ON ONE LINE
"RTN","KNRFHU2",56,0)
 .. S KNRV=$P(KNR0,"^",5) I KNRV'="" S CNT=CNT+1,TIUX("TEXT",CNT,0)="AGE AT DEATH: "_$P(^KNR(500019,KNRV,0),"^",1) ;WRITE AGE AT DEATH IF ANY
"RTN","KNRFHU2",57,0)
 .. S KNRV=$P(KNR0,"^",10) I KNRV>0 S KNRV=$P(^KNR(500005,KNRV,0),"^",1) ;GET RACE
"RTN","KNRFHU2",58,0)
 .. S KNRV2=$P(KNR0,"^",11) I KNRV2>0 S KNRV2=$P(^KNR(500007,KNRV2,0),"^",1) ;GET ETHNICITY
"RTN","KNRFHU2",59,0)
 .. S KNRV3=$P(KNR0,U,12) ;GET CURRENT AGE
"RTN","KNRFHU2",60,0)
 .. S CNT=CNT+1,TIUX("TEXT",CNT,0)="RACE: "_KNRV_"  ETHNICITY: "_KNRV2 ;SET RACE AND ETHNICITY
"RTN","KNRFHU2",61,0)
 .. S CNT=CNT+1,TIUX("TEXT",CNT,0)="CURRENT AGE: "_KNRV3 ;SET CURRENT AGE LINE
"RTN","KNRFHU2",62,0)
 .. S KNRV=$P(KNR0,"^",6) I KNRV'="" S CNT=CNT+1,TIUX("TEXT",CNT,0)="RELATIVE COMMENT:" ;WRITE HEADER FOR COMMENT LINE
"RTN","KNRFHU2",63,0)
 .. I KNRV'="" S CNT=CNT+1,TIUX("TEXT",CNT,0)=KNRV ;WRITE COMMENT ON NEXT LINE
"RTN","KNRFHU2",64,0)
DIS .. S KNRDIS=0 F  S KNRDIS=$O(^KNR(500017,"C",KNRREL,KNRDIS)) Q:KNRDIS'>0  D  ;LOOP THROUGH RELATIVE'S DISEASES
"RTN","KNRFHU2",65,0)
 ... ;S CNT=CNT+1,TIUX("TEXT",CNT,0)="    " ;WRITE BLANK LINE BETWEEN DISEASES FOR READABILITY - ELIMINATED AT VA REQUEST
"RTN","KNRFHU2",66,0)
 ... S KNR0=^KNR(500017,KNRDIS,0) ;SET KNR0=CONTENTS OF DISEASE ZERO NODE
"RTN","KNRFHU2",67,0)
 ... S KNRV=$P(KNR0,"^",3) I KNRV'="" S KNRV=$P(^KNR(500011,KNRV,0),"^",1) ;GET DISEASE NAME
"RTN","KNRFHU2",68,0)
 ... S KNRV2=$P(KNR0,"^",2) I KNRV2'="" S KNRV2=$P(^KNR(500019,KNRV2,0),"^",1) ;GET AGE AT DIAGNOSIS
"RTN","KNRFHU2",69,0)
 ... S CNT=CNT+1,TIUX("TEXT",CNT,0)="DISEASE NAME: "_KNRV_"   AGE DIAGNOSED: "_KNRV2 ;WRITE DISEASE NAME AND AGE DIAGNOSED
"RTN","KNRFHU2",70,0)
 ... S KNRV=$P(KNR0,"^",4) I KNRV'="" S CNT=CNT+1,TIUX("TEXT",CNT,0)="DISEASE COMMENT: " ; SET HEADER FOR COMMENT
"RTN","KNRFHU2",71,0)
 ... I KNRV'="" S CNT=CNT+1,TIUX("TEXT",CNT,0)=KNRV ;WRITE COMMENT ON NEXT LINE
"RTN","KNRFHU2",72,0)
 ... Q
"RTN","KNRFHU2",73,0)
 .. Q
"RTN","KNRFHU2",74,0)
 . Q
"RTN","KNRFHU2",75,0)
NOTE ;CALLS TIU UTILITY TO CREATE PROGRESS NOTE
"RTN","KNRFHU2",76,0)
 S TITLE=262,NOASF=1,(VSIT,SUPPRESS)="" ;SET NOTE TITLE IEN AND SET NOT REQUIRED VARIABLES TO ""
"RTN","KNRFHU2",77,0)
 I '$D(DUZ(0)) S DUZ(0)=$P(^VA(200,DUZ,0),"^",4) ;IF NO FM ACCESS CODE DEFINED GET IT
"RTN","KNRFHU2",78,0)
 D MAKE^TIUSRVP(.DOC,DFN,TITLE,VDT,VLOC,VSIT,.TIUX,VSTR,SUPPRESS,NOASF)
"RTN","KNRFHU2",79,0)
 I '+DOC S RESULT=0_"^"_"DOCUMENT NOT CREATED" ;RETURNS ZERO AND FAILURE MESSAGE
"RTN","KNRFHU2",80,0)
 I +DOC S RESULT=DOC_"^"_"DOCUMENT CREATED SIGN IN CPRS" ;RETURNS DOC IEN AND MESSAGE
"RTN","KNRFHU2",81,0)
 K TITLE,DFN,NOASF,TIUX,KNRDIS,KNR0,KNRV,KNRV2,KNRV3,CNT,KNRDIS,KNRREL,VDT,VLOC,VSIT,VSTR,SUPPRESS,KNRDORD Q
"RTN","KNRFHU2",82,0)
ARRAY ;CREATE ARRAY OF RELATIVES IN DISPLAY ORDER
"RTN","KNRFHU2",83,0)
 S KNRREL=0 F  S KNRREL=$O(^KNR(500015,"C",DFN,KNRREL)) Q:KNRREL'>0  D  ;LOOP THROUGH RELATIVES
"RTN","KNRFHU2",84,0)
 . S KNRRSHP=$P(^KNR(500015,KNRREL,0),U,3),KNRDORD=$P(^KNR(500013,KNRRSHP,0),U,3) ;GET RELATIONSHIP AND DISPLAY ORDER OF RELATIONSHIP
"RTN","KNRFHU2",85,0)
 . S ^TMP($J,KNRDORD,KNRREL)="" Q  ;SET RELATIONSHIP ARRAY TO ORDER RELATIVES BY RELATIONSHIP DISPLAY ORDER
"RTN","KNRFHU2",86,0)
 Q
"RTN","KNRFHU3")
0^4^B34395333
"RTN","KNRFHU3",1,0)
KNRFHU3 ;KNR INC/GLD - FAMILY HISTORY UTILITIES; 3-15-15
"RTN","KNRFHU3",2,0)
 ;;1.0;FAMILY HISTORY INNOVATION PROJECT;****;3-15-15;Build 3
"RTN","KNRFHU3",3,0)
 ;THIS ROUTINE SUPPORTS THE RPC "KNR FH GET COVER SHEET"
"RTN","KNRFHU3",4,0)
 ;RETRIEVES DATA ON THE MOST RECENT "FAMILY HISTORY TOOL OUTPUT" PROGRESS NOTE (IEN 262 IN CPRS 30 VISTA INSTANCE
"RTN","KNRFHU3",5,0)
 ;RETRIEVES AN ARRAY CONTAINING ONE PATIENT'S RELATIVES AND THEIR DISEASES FOR DISPLAY ON THE COVER SHEET.
"RTN","KNRFHU3",6,0)
GETCS(RESULT,KNRDFN) ;FIRST VARIABLE "RESULT" SHOULD BE REMOVED FOR TESTING IN PROGRAMMER MODE.
"RTN","KNRFHU3",7,0)
 ;KNRDFN IS THE INTERNAL ENTRY NUMBER OF THE PATIENT.  RESULT IS RETURNED EQUAL TO ZERO IF THERE IS NO COMPLETED NOTE.
"RTN","KNRFHU3",8,0)
 ;RESULT IS RETURNED AS THE IEN OF THE NOTE^DATE/TIME NOTE CREATED^AUTHOR OF NOTE^TITLE OF AUTHOR
"RTN","KNRFHU3",9,0)
 N TITLE,KNRDT,KNRIEN,CNT,KNRNIEN,KNRAUIEN,KNRAUTH,KNRREL,KNR0,KNRDIS,KNRDIP,KNRAGDIA,KNRRELT ;NEW VARIABLES USED BELOW
"RTN","KNRFHU3",10,0)
 S TITLE=262,KNRDT=99999999,KNRNIEN=0,CNT=0 ;SET VARIABLES FOR PROGRESS NOTE TITLE, INVERSE DATE AND INTERNAL ENTRY NUMBER
"RTN","KNRFHU3",11,0)
 I '$D(^KNR(500003,KNRDFN,0)) S RESULT(CNT)=0_U_"NO FAMILY HISTORY DATA FOR THIS PATIENT" G CLEAN ; QUIT IF NO FH DATA ON FILE FOR PATIENT
"RTN","KNRFHU3",12,0)
 D  ;CHECK FOR FH TOOL PROGRESS NOTE
"RTN","KNRFHU3",13,0)
 . I '$D(^TIU(8925,"APT",KNRDFN,TITLE,7)) S RESULT(CNT)=0_U_"NO COMPLETED FH TOOL NOTES FOR THIS PATIENT" Q  ;NO COMPLETED FH TOOL PROGRESS NOTE S RESULT AND QUIT
"RTN","KNRFHU3",14,0)
 . S KNRDT=$O(^TIU(8925,"APT",KNRDFN,TITLE,7,KNRDT),-1) ;SET NOTE DATE EQUAL TO FIRST INVERSE DATE IN X-REF OF FIRST COMPLETE NOTE (STATUS=7).
"RTN","KNRFHU3",15,0)
 . S KNRNIEN=$O(^TIU(8925,"APT",KNRDFN,TITLE,7,KNRDT,KNRNIEN)) ; GET IEN OF MOST RECENT FH TOOL NOTE FROM INVERSE DATE XREF
"RTN","KNRFHU3",16,0)
 . S KNRAUIEN=$P(^TIU(8925,KNRNIEN,12),U,2),RESULT(CNT)=1_U_"SIGNED FH TOOL NOTE FOUND"
"RTN","KNRFHU3",17,0)
 . S CNT=CNT+1,RESULT(CNT)=KNRNIEN_U_$P(^TIU(8925,KNRNIEN,12),U,1)_"^"_KNRAUIEN ;SET RESULT TO IEN OF NOTE^ENTRY DATE^AUTHOR IEN
"RTN","KNRFHU3",18,0)
 . S KNRAUTH=$P(^VA(200,KNRAUIEN,0),U,1)_U_$P(^VA(200,KNRAUIEN,20),U,3) ;GET AUTHOR NAME AND SIGNATURE BLOCK TITLE
"RTN","KNRFHU3",19,0)
 . S RESULT(CNT)=RESULT(CNT)_U_KNRAUTH Q  ;SET RESULT=NOTE IEN^ENTRY DATE^AUTHOR IEN^AUTHOR NAME^AUTHOR SIGNATURE BLOCK TITLE QUIT SUBROUTINE
"RTN","KNRFHU3",20,0)
FH ;ADD RELATIVES AND BRIEF DISEASE LISTING TO ARRAY
"RTN","KNRFHU3",21,0)
 I '$D(^KNR(500015,"C",KNRDFN)) S CNT=CNT+1,RESULT(CNT)=0_U_"NO RELATIVE DATA FOR THIS PATIENT" G CLEAN ; END IF NO RELATIVES
"RTN","KNRFHU3",22,0)
 S KNRREL=0 F  S KNRREL=$O(^KNR(500015,"C",KNRDFN,KNRREL)) G:KNRREL'>0 CLEAN D  ;LOOP THROUGH PATIENT'S RELATIVES
"RTN","KNRFHU3",23,0)
 . S KNR0=^KNR(500015,KNRREL,0) ;SET VARIABLE KNR0=ZERO NODE OF RELATIVE
"RTN","KNRFHU3",24,0)
 . S KNRRELT="NO RELATIONSHIP DATA" I $P(KNR0,U,3)>0 S KNRRELT=$P(^KNR(500013,$P(KNR0,"^",3),0),"^",1) ;SET KNRELT=TEXT OF RELATIONSHIP NAME IF ANY
"RTN","KNRFHU3",25,0)
 . S CNT=CNT+1,RESULT(CNT)="RELATIVE"_U_KNRREL_U_KNRRELT_U_$P(KNR0,U,7) ;SET RESULT NODE =RELATIVE IEN^RELATIONSHIP, DATE LAST EDITED
"RTN","KNRFHU3",26,0)
 . I '$D(^KNR(500017,"C",KNRREL)) S CNT=CNT+1,RESULT(CNT)=0_U_"NO DISEASE ENTRIES FOR THIS RELATIVE" Q  ;QUIT IF NO DISEASE ENTRIES FOR RELATIVE
"RTN","KNRFHU3",27,0)
 . S KNRDIS=0 F  S KNRDIS=$O(^KNR(500017,"C",KNRREL,KNRDIS)) Q:KNRDIS'>0  D  ;LOOP THROUGH RELATIVE'S DISEASE ENTRIES
"RTN","KNRFHU3",28,0)
 .. S KNRDIP=$P(^KNR(500017,KNRDIS,0),U,3),KNRAGDIA=$P(^KNR(500017,KNRDIS,0),U,2) I KNRAGDIA>0 S KNRAGDIA=$P(^KNR(500019,KNRAGDIA,0),U,1) ;GET AGE DIAGNOSED
"RTN","KNRFHU3",29,0)
 .. S CNT=CNT+1 S RESULT(CNT)="DISEASE"_U_KNRDIS_U_$P(^KNR(500011,KNRDIP,0),U,1)_U_$P(^KNR(500017,KNRDIS,0),U,5)_U_KNRAGDIA Q  ;SET RESULT NODE TO "DISEASE"^DISEASE IEN^DISEASE NAME^DATE EDITED AND AGE DIAGNOSED
"RTN","KNRFHU3",30,0)
 . Q  ;QUIT LOOP
"RTN","KNRFHU3",31,0)
CLEAN K KNR0,KNRREL,KNRDIS,KNRDT,TITLE,KNRIEN,CNT,KNRNIEN,KNRAUIEN,KNRAUTH,KNRREL,KNRDIS,KNRDIP,KNRAGDIA,KNRRELT Q  ;CLEAN VARIABLES
"RTN","KNRFHU3",32,0)
ALLA(RESULT,KNRDFN) ;GET AN ARRAY OF ENTIRE FAMILY HISTORY IN ARRAY SORTED BY RELATIONSHIP DEGREE, RELATIONSHIP, RELATIVE FIRST NAME, DISEASE NAME
"RTN","KNRFHU3",33,0)
 ;REQUIRES ONLY PATIENT'S INTERNAL ENTRY NUMBER.  RETURNS RESULT(CNT)=ZERO NODES OF RELATIVE AND DISEASE ENTRIES (ALL DATA)
"RTN","KNRFHU3",34,0)
 N KNRREL,KNRREL0,KNRNAM,KNRSHP,KNRDIS,KNRDEG,KNRDISN,KNRDIS0,KNRCNT,KNRX ;NEW VARIABLES USED BELOW
"RTN","KNRFHU3",35,0)
 K ^TMP($J) ;CLEAN ^TMP($J) GLOBAL
"RTN","KNRFHU3",36,0)
 I '$D(^KNR(500003,KNRDFN,0)) S RESULT(0)=0,RESULT("ERROR")="NO FAMILY HISTORY ENTRY FOR THIS PATIENT" G CLEAN2 ;SET NO SUCCESS IF NO DATA FOR PATIENT
"RTN","KNRFHU3",37,0)
 I '$D(^KNR(500015,"C",KNRDFN)) S RESULT(0)=1,RESULT(1)="NO RELATIVE ENTRIES" G PT ;SET UNSUCCESSFUL AND GET PATIENT DATA IF NO RELATIVES IN FH
"RTN","KNRFHU3",38,0)
LOOP1 S KNRREL=0 F  S KNRREL=$O(^KNR(500015,"C",KNRDFN,KNRREL)) Q:KNRREL'>0  D  ;LOOP THROUGH PATIENT'S RELATIVES
"RTN","KNRFHU3",39,0)
 . S KNRREL0=^KNR(500015,KNRREL,0),KNRSHP=$P(^KNR(500013,$P(KNRREL0,U,3),0),U,1) ;SET VARIABLES TO RELATIVE ZERO NODE AND NAME OF RELATIONSHIP
"RTN","KNRFHU3",40,0)
 . S KNRDEG=$P(^KNR(500013,$P(KNRREL0,U,3),0),"^",2) ;SET VARIABLE TO DEGREE OF RELATIONS F (FIRST) OR S (SECOND).
"RTN","KNRFHU3",41,0)
 . S KNRNAM=$P(^KNR(500015,KNRREL,0),U,2) ;SET VARIABLE TO RELATIVE NAME
"RTN","KNRFHU3",42,0)
LOOP2 . S KNRDIS=0 F  S KNRDIS=$O(^KNR(500017,"C",KNRREL,KNRDIS)) Q:KNRDIS'>0  D  ;LOOP THROUGH RELATIVE'S DISEASE ENTRIES
"RTN","KNRFHU3",43,0)
 .. S KNRDIS0=^KNR(500017,KNRDIS,0),KNRDISN=$P(^KNR(500011,$P(KNRDIS0,"^",3),0),"^",1) ;SET VARIABEL TO DISEASE ENTRY ZERO NODE
"RTN","KNRFHU3",44,0)
 .. S ^TMP($J,KNRDEG,KNRSHP,KNRNAM,KNRDISN)=KNRREL0_U_KNRDIS0_U_KNRREL_U_KNRDIS Q  ;SET TMP ARRAY TO SORT BY DEGREE OF RELATIONSHIP, RELATIONSHIP, NAME AND DISEASE NAME,RELATIVE IEN, DISEASE IEN
"RTN","KNRFHU3",45,0)
 . ;ABOVE SET TMP NODE EQUAL TO CONTENTS OF RELATIVE AND DISEASE ZERO NODES IF THERE IS ONE OR MORE DISEASE ENTRIES.
"RTN","KNRFHU3",46,0)
 . I '$D(^TMP($J,KNRDEG,KNRSHP,KNRNAM)) S ^TMP($J,KNRDEG,KNRSHP,KNRNAM,"NO DISEASES")=KNRREL0_U_KNRREL Q  ;SET TMP NODE FOR RELATIVE IF NO DISEASES IEN AT END
"RTN","KNRFHU3",47,0)
LOOP3 S RESULT(0)=1 I '$D(^TMP($J)) S RESULT(0)=0,RESULT("ERROR")="NO DATA" G CLEAN2 ;IF NOT DATA SET RESULT AND ERROR GO CLEAN
"RTN","KNRFHU3",48,0)
 S KNRDEG="",KNRCNT=0 F  S KNRDEG=$O(^TMP($J,KNRDEG)) Q:KNRDEG=""  D  ;LOOP THROUGH RELATIVE DEGREES OF RELATIONSHIP FIRST OR SSECOND
"RTN","KNRFHU3",49,0)
 . S KNRSHP=0 F  S KNRSHP=$O(^TMP($J,KNRDEG,KNRSHP)) Q:KNRSHP=""  D  ;LOOP THROUGH RELATIVE RELATIONSHIPS
"RTN","KNRFHU3",50,0)
 .. S KNRNAM="" F  S KNRNAM=$O(^TMP($J,KNRDEG,KNRSHP,KNRNAM)) Q:KNRNAM=""  D  ;LOOP THROUGH RELATIVE NAMES
"RTN","KNRFHU3",51,0)
 ... S KNRDISN="" F  S KNRDISN=$O(^TMP($J,KNRDEG,KNRSHP,KNRNAM,KNRDISN)) Q:KNRDISN=""  D  ;LOOP THROUGH DISEASE IENS
"RTN","KNRFHU3",52,0)
 .... S KNRCNT=KNRCNT+1,RESULT(KNRCNT)=^TMP($J,KNRDEG,KNRSHP,KNRNAM,KNRDISN) Q  ;SET RESULT NODE AND QUIT
"RTN","KNRFHU3",53,0)
 ... Q  ;QUIT LOOP
"RTN","KNRFHU3",54,0)
 .. Q  ;QUIT LOOP
"RTN","KNRFHU3",55,0)
 . Q  ;QUIT LOOP
"RTN","KNRFHU3",56,0)
PT S RESULT("PT")=^KNR(500003,KNRDFN,0)_U_KNRDFN ;SET TO EQUAL ZERO NODE OF PATIENT ENTRY IN KNR FAMILY HISTORY FILE FOLLOWED BY THE IEN
"RTN","KNRFHU3",57,0)
CLEAN2 K ^TMP($J),KNRDFN,KNRREL,KNRREL0,KNRNAM,KNRSHP,KNRDIS,KNRDEG,KNRDISN,KNRDIS0,KNRCNT Q  ;CLEAN UP TMP AND VARIABLES.
"RTN","KNRFHU4")
0^5^B39563620
"RTN","KNRFHU4",1,0)
KNRFHU4 ;KNR INC/GLD - FAMILY HISTORY UTILITIES; 4-12-15 ; 28 May 2015  7:03 PM
"RTN","KNRFHU4",2,0)
 ;;1.0;FAMILY HISTORY INNOVATION PROJECT;****;4-12-15;Build 3
"RTN","KNRFHU4",3,0)
 ;BUILDS ARRAY OF FH RELATIVE AND DISEASE DATA IN EXTERNAL FORMAT WITH PATIENT INFORMATION IN NODE RESULT("PT").
"RTN","KNRFHU4",4,0)
ALLA(RESULT,KNRDFN) ;GET AN ARRAY OF ENTIRE FAMILY HISTORY IN ARRAY SORTED BY RELATIONSHIP DEGREE, RELATIONSHIP AND RELATIVE FIRST NAME
"RTN","KNRFHU4",5,0)
 ;REQUIRES ONLY PATIENT'S INTERNAL ENTRY NUMBER.  RETURNS RESULT(CNT)=ZERO NODES OF RELATIVE AND DISEASE ENTRIES (ALL DATA)
"RTN","KNRFHU4",6,0)
 N KNRREL,KNRREL0,KNRNAM,KNRSHP,KNRDIS,KNRDEG,KNRDISN,KNRDIS0,KNRCNT,KNRX ;NEW VARIABLES USED BELOW
"RTN","KNRFHU4",7,0)
 K ^TMP($J) ;CLEAN ^TMP($J) GLOBAL
"RTN","KNRFHU4",8,0)
 I '$D(^KNR(500003,KNRDFN,0)) S RESULT(0)=0,RESULT("ERROR")="NO FAMILY HISTORY ENTRY FOR THIS PATIENT" G CLEAN ;SET NO SUCCESS IF NO DATA FOR PATIENT
"RTN","KNRFHU4",9,0)
 I '$D(^KNR(500015,"C",KNRDFN)) S RESULT(0)=1,RESULT(1)="NO RELATIVE ENTRIES" G PT ;SET UNSUCCESSFUL AND GET PATIENT DATA IF NO RELATIVES IN FH
"RTN","KNRFHU4",10,0)
LOOP1 S KNRREL=0 F  S KNRREL=$O(^KNR(500015,"C",KNRDFN,KNRREL)) Q:KNRREL'>0  D  ;LOOP THROUGH PATIENT'S RELATIVES
"RTN","KNRFHU4",11,0)
 . S KNRREL0=^KNR(500015,KNRREL,0),KNRSHP=$P(^KNR(500013,$P(KNRREL0,U,3),0),U,1) ;SET VARIABLES TO RELATIVE ZERO NODE AND NAME OF RELATIONSHIP
"RTN","KNRFHU4",12,0)
 . S KNRDEG=$P(^KNR(500013,$P(KNRREL0,U,3),0),"^",3) ;SET VARIABLE KNRDEG TO DISPLAY ORDER OF RELATIONSHIP.
"RTN","KNRFHU4",13,0)
 . S KNRNAM=$P(^KNR(500015,KNRREL,0),U,2) ;SET VARIABLE TO RELATIVE NAME
"RTN","KNRFHU4",14,0)
LOOP2 . S KNRDIS=0 F  S KNRDIS=$O(^KNR(500017,"C",KNRREL,KNRDIS)) Q:KNRDIS'>0  D  ;LOOP THROUGH RELATIVE'S DISEASE ENTRIES
"RTN","KNRFHU4",15,0)
 .. S KNRDIS0=^KNR(500017,KNRDIS,0),KNRDISN=$P(^KNR(500011,$P(KNRDIS0,"^",3),0),"^",1) ;SET VARIABEL TO DISEASE ENTRY ZERO NODE
"RTN","KNRFHU4",16,0)
 .. S ^TMP($J,KNRDEG,KNRSHP,KNRNAM,KNRDISN)=KNRREL0_U_KNRDIS0 Q  ;SET TMP ARRAY TO SORT BY DISPLAY ORDER OF RELATIONSHIP, RELATIONSHIP, NAME AND DISEASE NAME
"RTN","KNRFHU4",17,0)
 . ;ABOVE SET TMP NODE EQUAL TO CONTENTS OF RELATIVE AND DISEASE ZERO NODES IF THERE IS ONE OR MORE DISEASE ENTRIES.
"RTN","KNRFHU4",18,0)
 . I '$D(^TMP($J,KNRDEG,KNRSHP,KNRNAM)) S ^TMP($J,KNRDEG,KNRSHP,KNRNAM,"NO DISEASES")=KNRREL0 Q  ;SET TMP NODE FOR RELATIVE IF NO DISEASES
"RTN","KNRFHU4",19,0)
ARRAY ;BUILD RESULT ARRAY FROM TMP GLOBAL DATA
"RTN","KNRFHU4",20,0)
LOOP3 S RESULT(0)=1 I '$D(^TMP($J)) S RESULT(0)=0,RESULT("ERROR")="NO DATA" G CLEAN ;IF NOT DATA SET RESULT AND ERROR GO CLEAN
"RTN","KNRFHU4",21,0)
 S KNRDEG="",KNRCNT=0 F  S KNRDEG=$O(^TMP($J,KNRDEG)) Q:KNRDEG=""  D  ;LOOP THROUGH RELATIVE DEGREES OF RELATIONSHIP FIRST OR SSECOND
"RTN","KNRFHU4",22,0)
 . S KNRSHP=0 F  S KNRSHP=$O(^TMP($J,KNRDEG,KNRSHP)) Q:KNRSHP=""  D  ;LOOP THROUGH RELATIVE RELATIONSHIPS
"RTN","KNRFHU4",23,0)
 .. S KNRNAM="" F  S KNRNAM=$O(^TMP($J,KNRDEG,KNRSHP,KNRNAM)) Q:KNRNAM=""  D  ;LOOP THROUGH RELATIVE NAMES
"RTN","KNRFHU4",24,0)
 ... S KNRDISN="" F  S KNRDISN=$O(^TMP($J,KNRDEG,KNRSHP,KNRNAM,KNRDISN)) Q:KNRDISN=""  D  ;LOOP THROUGH DISEASE IENS
"RTN","KNRFHU4",25,0)
 .... S KNRCNT=KNRCNT+1,RESULT(KNRCNT)=^TMP($J,KNRDEG,KNRSHP,KNRNAM,KNRDISN) ;SET RESULT NODE
"RTN","KNRFHU4",26,0)
 .... S KNRX=$P(RESULT(KNRCNT),"^",3) I KNRX>0 S $P(RESULT(KNRCNT),"^",3)=$P(^KNR(500013,KNRX,0),"^") ;CONVERT RELATIONSHIP POINTER TO TEXT
"RTN","KNRFHU4",27,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,4) I KNRX'="" S KNRX=$S(KNRX="L":"LIVING",KNRX="D":"DECEASED",KNRX="U":"UNKNOWN",1:"") ;EXPAND VITAL STATUS CODE
"RTN","KNRFHU4",28,0)
 .... S $P(RESULT(KNRCNT),U,4)=KNRX ;REPLACE INTERNAL VITAL STATUS WITH EXTERNAL
"RTN","KNRFHU4",29,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,5) I KNRX>0 S $P(RESULT(KNRCNT),U,5)=$P(^KNR(500019,KNRX,0),U) ;GET EXTERNAL FORM OF AGE AT DEATH
"RTN","KNRFHU4",30,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,7) I KNRX>0 S $P(RESULT(KNRCNT),U,7)=$E(KNRX,4,5)_"/"_$E(KNRX,6,7)_"/"_$E(KNRX,2,3) ;CONVERT DATE EDITED TO EXTERNAL FORM
"RTN","KNRFHU4",31,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,8) I KNRX>0 S $P(RESULT(KNRCNT),U,8)=$P(^VA(200,KNRX,0),U) ;SET TO USER NAME
"RTN","KNRFHU4",32,0)
 .... I $D(^VA(200,KNRX,20)) S $P(RESULT(KNRCNT),U,8)=$P(RESULT(KNRCNT),U,8)_" / "_$P(^VA(200,KNRX,20),U,3) ;NAME AND SIGNATURE BLOCK TITLE
"RTN","KNRFHU4",33,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,9) I KNRX>0 S $P(RESULT(KNRCNT),U,9)=$P(^DPT(KNRX,0),U) ;GET PATIENT NAME TEXT
"RTN","KNRFHU4",34,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,10) I KNRX>0 S $P(RESULT(KNRCNT),U,10)=$P(^KNR(500005,KNRX,0),U) ;GET TEXT OF RACE
"RTN","KNRFHU4",35,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,11) I KNRX>0 S $P(RESULT(KNRCNT),U,11)=$P(^KNR(500007,KNRX,0),U) ;GET TEXT OF ETHNICITY
"RTN","KNRFHU4",36,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,14) I KNRX>0 S $P(RESULT(KNRCNT),U,14)=$P(^KNR(500019,KNRX,0),U) ;GET EXTERNAL FORM OF AGE DIAGNOSED
"RTN","KNRFHU4",37,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,15) I KNRX>0 S $P(RESULT(KNRCNT),U,15)=$P(^KNR(500011,KNRX,0),U) ;GET TEXT OF DISEASE NAME
"RTN","KNRFHU4",38,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,17) I KNRX>0 S $P(RESULT(KNRCNT),U,17)=$E(KNRX,4,5)_"/"_$E(KNRX,6,7)_"/"_$E(KNRX,2,3) ;CONVERT DATE EDITED TO EXTERNAL FORM
"RTN","KNRFHU4",39,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,18) I KNRX>0 S $P(RESULT(KNRCNT),U,18)=$P(^VA(200,KNRX,0),U) ;SET TO USER NAME
"RTN","KNRFHU4",40,0)
 .... I KNRX>0,$D(^VA(200,KNRX,20)) S $P(RESULT(KNRCNT),U,18)=$P(RESULT(KNRCNT),U,18)_" / "_$P(^VA(200,KNRX,20),U,3) ;NAME AND SIGNATURE BLOCK TITLE
"RTN","KNRFHU4",41,0)
 .... S KNRX=$P(RESULT(KNRCNT),U,19) I KNRX>0 S $P(RESULT(KNRCNT),U,19)=$P(^KNR(500015,KNRX,0),U)_" / "_$P(^KNR(500015,KNRX,0),U,2) ;ENTRY NUMBER AND FIRST NAME TEXT
"RTN","KNRFHU4",42,0)
 .... Q
"RTN","KNRFHU4",43,0)
 ... Q  ;QUIT LOOP
"RTN","KNRFHU4",44,0)
 .. Q  ;QUIT LOOP
"RTN","KNRFHU4",45,0)
 . Q  ;QUIT LOOP
"RTN","KNRFHU4",46,0)
PT S RESULT(.5)=^KNR(500003,KNRDFN,0) ;SET TO EQUAL ZERO NODE OF PATIENT ENTRY IN KNR FAMILY HISTORY FILE
"RTN","KNRFHU4",47,0)
 S KNRX=$P(RESULT(.5),U,1) I KNRX>0 S $P(RESULT(.5),U,1)=$P(^DPT(KNRX,0),U,1) ;SET EQUAL TO PATIENT'S NAME
"RTN","KNRFHU4",48,0)
 S KNRX=$P(RESULT(.5),U,2) I KNRX>0 S $P(RESULT(.5),U,2)=$E(KNRX,4,5)_"/"_$E(KNRX,6,7)_"/"_$E(KNRX,2,3) ;CONVERT DATE ENTERED
"RTN","KNRFHU4",49,0)
 S KNRX=$P(RESULT(.5),U,3) I KNRX>0 S $P(RESULT(.5),U,3)=$P(^VA(200,KNRX,0),U) ;SET TO USER NAME
"RTN","KNRFHU4",50,0)
 I $D(^VA(200,KNRX,20)) S $P(RESULT(.5),U,3)=$P(RESULT(.5),U,3)_" / "_$P(^VA(200,KNRX,20),U,3) ;NAME AND SIGNATURE BLOCK TITLE
"RTN","KNRFHU4",51,0)
 S KNRX=$P(RESULT(.5),U,4) I KNRX'="" S $P(RESULT(.5),U,4)=$S(KNRX="U":"UNABLE TO COLLECT FROM PATIENT OR GUARDIAN",KNRX="R":"PATIENT DECLINED TO PROVIDE FAMILY HISTORY",KNRX="L":"LIMITED LIFE EXPECTANCY",KNRX="D":"DEFERRED TO LATER VISIT",1:"")
"RTN","KNRFHU4",52,0)
 S KNRX=$P(RESULT(.5),U,5) I KNRX>0 S $P(RESULT(.5),U,5)=$E(KNRX,4,5)_"/"_$E(KNRX,6,7)_"/"_$E(KNRX,2,3) ;CONVERT DATE LAST UPDATED
"RTN","KNRFHU4",53,0)
 S KNRX=$P(RESULT(.5),U,6) I KNRX'="" S $P(RESULT(.5),U,6)=$S(KNRX="Y":"YES MATERNAL AND PATERNAL",KNRX="N":"NO",KNRX="U":"UNKNOWN",KNRX="D":"DECLINED TO ANSWER",KNRX="P":"YES PATERNAL ONLY",KNRX="M":"YES MATERNAL ONLY",1:"") ;JEWISH ANCESTRY
"RTN","KNRFHU4",54,0)
 S KNRX=$P(RESULT(.5),U,8) I KNRX>0 S $P(RESULT(.5),U,8)=$P(^VA(200,KNRX,0),U) ;SET TO USER NAME
"RTN","KNRFHU4",55,0)
 I KNRX>0,$D(^VA(200,KNRX,20)) S $P(RESULT(.5),U,8)=$P(RESULT(.5),U,8)_" / "_$P(^VA(200,KNRX,20),U,3) ;NAME AND SIGNATURE BLOCK TITLE
"RTN","KNRFHU4",56,0)
 S KNRX=$P(RESULT(.5),U,9) I KNRX>0 S $P(RESULT(.5),U,9)=$P(^KNR(500005,KNRX,0),U,1) ;SET TO TEXT OF RACE
"RTN","KNRFHU4",57,0)
 S KNRX=$P(RESULT(.5),U,10) I KNRX>0 S $P(RESULT(.5),U,10)=$P(^KNR(500007,KNRX,0),U,1) ;SET TO TEXT OF ETHNICITY
"RTN","KNRFHU4",58,0)
 S KNRX=RESULT(.5),RESULT(.5)="PS"_U_KNRX ;ADD IDENTIFIER TO PATIENT SEGMENT
"RTN","KNRFHU4",59,0)
CLEAN K ^TMP($J),KNRREL,KNRREL0,KNRNAM,KNRSHP,KNRDIS,KNRDEG,KNRDISN,KNRDIS0,KNRCNT,KNRX, Q  ;CLEAN UP VARIABLES AND ^TMP($J).
"RTN","KNRFHU5")
0^6^B5256937
"RTN","KNRFHU5",1,0)
KNRFHU5 ;KNR INC/GLD - FAMILY HISTORY UTILITIES; 5-9-15
"RTN","KNRFHU5",2,0)
 ;;1.0;FAMILY HISTORY INNOVATION PROJECT;****;5-9-15;Build 3
"RTN","KNRFHU5",3,0)
 ;SUPPORTS KNR EDIT FH DATA RPC.
"RTN","KNRFHU5",4,0)
 ;ALLOWS USER TO EDIT FIELDS IN FILES WITHIN THE KNR FH FILE RANGE 500003-500099.
"RTN","KNRFHU5",5,0)
 ;.01 FIELDS SHOULD NEVER BE EDITED.
"RTN","KNRFHU5",6,0)
FILE(RESULT,KNRFILE,KNRIENS,KNRFIELD,KNRDATA) ;FILER RPC TO CHANGE DATA IN EXISTING ENTRIES.  REMOVE RESULT FOR TESTING IN DIRECT MODE.
"RTN","KNRFHU5",7,0)
 ;KNRFILE MUST EQUAL THE FILE NUMBER, KNRIENS MUST EQUAL INTERNAL ENTRY NUMBER OF ENTRY TO BE EDITED
"RTN","KNRFHU5",8,0)
 ;KNRFIELD MUST EQUAL THE NUMBER OF THE FIELD TO BE EDITED AND KNRDATA MUST EQUAL THE VALUE TO BE ENTERED IN THE FIELD
"RTN","KNRFHU5",9,0)
 ;FLAGS WILL BE SET TO "K".  LOCKING HANDLED BY FILER AND INPUT IN INTERNAL FORMAT REQUIRED.  
"RTN","KNRFHU5",10,0)
 ;ADDING "T" AND "E" FLAGS MAY BE CONSIDERED TO ENFORCE ALL OR NONE FILING AND INPUT IN EXTERNAL FORMAT
"RTN","KNRFHU5",11,0)
FDA ;CREATE FDA ARRAY FROM KNRDATA ARRAY
"RTN","KNRFHU5",12,0)
 I '$D(KNRIENS) S RESULT(0)=0_U_"NO IEN PROVIDED" G CLEAN ;GO CLEAN IF NO IEN PASSED TO RPC
"RTN","KNRFHU5",13,0)
 I $E(KNRIENS,1,3)="FHD" S KNRIENS=$E(KNRIENS,4,) ;EXTRACT DISEASE ENTRY IEN FROM ENTRY NUMBER
"RTN","KNRFHU5",14,0)
 I $E(KNRIENS,1,2)="FH" S KNRIENS=$E(KNRIENS,3,) ;EXTRACT DISEASE ENTRY IEN FROM ENTRY NUMBER
"RTN","KNRFHU5",15,0)
SET I KNRFILE<500003 S RESULT(0)=0_U_"NOT A FH FILE" G CLEAN ;DO NOT ALLOW EDITS OUTSIDE FH FILE RANGE
"RTN","KNRFHU5",16,0)
 I KNRFILE>500099 S RESULT(0)=0_U_"NOT A FH FILE" G CLEAN ;DO NOT ALOOW EDITS OUTSIDE FH FILE RANGE
"RTN","KNRFHU5",17,0)
 S KNRFDA(KNRFILE,KNRIENS_",",KNRFIELD)=KNRDATA  ;SET FDA VALUE EQUAL TO VALUE OF KNRDATA ARRAY FOR THAT FIELD
"RTN","KNRFHU5",18,0)
 D FILE^DIE("E","KNRFDA","KNRERR") ;CALL DIE TO EDIT FILE EXTERNAL FORMAT OF INPUT, FDA NAME AND ERROR ARRAY NAME SPECIFIED
"RTN","KNRFHU5",19,0)
 I $D(KNRERR) S RESULT(0)=0_U_"ERROR OCCURRED"_U_KNRERR("DIERR",1,"TEXT",1) ;SEND FAILURE MESSAGE AND ERROR MESSAGE
"RTN","KNRFHU5",20,0)
 I '$D(KNRERR) S RESULT(0)=1_U_"EDIT SUCCESSFUL"
"RTN","KNRFHU5",21,0)
 D CLEAN^DILF ;CLEAN STANDARD MESSAGE ARRAYS AND VARIABLES CREATED BY FILEMAN CALL ABOVE
"RTN","KNRFHU5",22,0)
CLEAN K KNRERR,KNRFILE,KNRIENS,KNRDATA,KNRFIELD,KNRFDA ;CLEAN VARIABLES AND CALL CLEAN^DILF TO CLEAN UP FILEMAN MESSAGE ARRAYS AND VARIABLES
"RTN","KNRFHU5",23,0)
 Q
"RTN","KNRFHU6")
0^7^B8323086
"RTN","KNRFHU6",1,0)
KNRFHU6 ;KNR INC/GLD - FAMILY HISOTRY UTILITIES; 6-28-15
"RTN","KNRFHU6",2,0)
 ;;1.0;FAMILY HISTORY INNOVATION PROJECT;****; 6-28-15;Build 3
"RTN","KNRFHU6",3,0)
 ;THIS ROUTINE IS USED BY THE KNR FH CREATE DEF PN RPC TO GATHER AND PLACE FH DATA IN A PROGRESS NOTE
"RTN","KNRFHU6",4,0)
 ;WHEN COLLECTION OF FAMILY HISTORY IS DEFERRED FOR SOME REASON.
"RTN","KNRFHU6",5,0)
 ;FOR TESTING PURPOSES THE PN TITLE WILL BE "FAMILY HISTORY TOOL DEFERRED"
"RTN","KNRFHU6",6,0)
MAKE(RESULT,DFN,DUZ) ;FIRST VARIABLE PASSED "RESULT" SHOULD BE REMOVED FOR TESTING IN PROGRAMMER MODE. 
"RTN","KNRFHU6",7,0)
 ;DFN IS THE PATIENT IEN.IF NOT SUCCESSFUL RESULT=0^DOCUMENT NOT CREATED WILL BE RETURNED.  IF SUCCESSFUL RESULT WILL EQUAL
"RTN","KNRFHU6",8,0)
 ;THE INTERNAL ENTRY NUMBER OF THE PROGRESS NOTE CREATED WITLL BE RETURNED _^DOCUMENT CREATED SIGN IN CPRS.  DUZ IS THE USER IEN.
"RTN","KNRFHU6",9,0)
 ;KNRPNT IS THE IEN OF THE PROGRESS NOT TITLE.  IN THE SANDBOX ACCOUNT CPRS30 THAT IS 263.
"RTN","KNRFHU6",10,0)
 N TITLE,NOASF,TIUX,KNRDIS,KNR0,KNRV,KNRV2,KNRV3,CNT,KNRDIS,KNRREL,VDT,VLOC,VSIT,VSTR,SUPPRESS ;NEW VARIABLES USED BELOW
"RTN","KNRFHU6",11,0)
 I DFN'>0 S RESULT=0_U_"NO DFN" Q  ;QUIT IF NO DFN PROVIDED
"RTN","KNRFHU6",12,0)
 S TIUX(.02)=DFN ;SET PATIENT NODE IN TIUX ARRAY
"RTN","KNRFHU6",13,0)
 D NOW^%DTC S TIUX(1301)=% ;SET REFERENCE DATE TIME FOR NOTE EQUAL TO NOW
"RTN","KNRFHU6",14,0)
 I DUZ'>0 S RESULT=0_U_"NO DUZ" Q  ;QUIT IF NO DUZ
"RTN","KNRFHU6",15,0)
 S TIUX(1302)=DUZ ;SET AUTHOR OF PROGRESS NOT EQUAL TO THE USER IEN.
"RTN","KNRFHU6",16,0)
PAT ;CREATE TEXT LINES FROM PATIENT ENTRY
"RTN","KNRFHU6",17,0)
 S CNT=0 ;BEGIN LINE COUNT AT ZERO
"RTN","KNRFHU6",18,0)
 I '$D(^KNR(500003,DFN,0)) S RESULT=0_U_"NO FH DATA TO RECORD TO RECORD" Q  ;IF NO FH ENTRY FOR PATIENT INDICATE FAILURE AND QUIT.
"RTN","KNRFHU6",19,0)
 S KNR0=^KNR(500003,DFN,0) ;SET VARIABLE EQUAL TO ZERO NODE OF patient entry.
"RTN","KNRFHU6",20,0)
 S KNRV=$P(KNR0,"^",4) I KNRV'="" D  ;IF DEFERRED REASON AND NO RELATIVE ENTRIES INCLUDE DEFERRED REASON
"RTN","KNRFHU6",21,0)
 . S CNT=CNT+1
"RTN","KNRFHU6",22,0)
 . I KNRV="U" S TIUX("TEXT",CNT,0)="FAMILY HISTORY DOCUMENTATION DEFERRED.  UNABLE TO COLLECT FROM PATAIENT OR GUARDIAN." Q  ;
"RTN","KNRFHU6",23,0)
 . I KNRV="R" S TIUX("TEXT",CNT,0)="FAMILY HISTORY DOCUMENTATION DEFERRED.  THE PATIENT DECLINED TO PROVIDE A FAMILY HISTORY." Q  ;
"RTN","KNRFHU6",24,0)
 . I KNRV="L" S TIUX("TEXT",CNT,0)="FAMILY HISTORY DOCUMENTATION DEFERRED DUE TO THE PATIENT'S LIMITED LIFE EXPECTANCY. " Q  ;
"RTN","KNRFHU6",25,0)
 . I KNRV="D" S TIUX("TEXT",CNT,0)="FAMILY HISTORY DOCUMENTATION DEFERRED TO A LATER VISIT." Q  ;
"RTN","KNRFHU6",26,0)
 . Q  ;
"RTN","KNRFHU6",27,0)
NOTE ;CALLS TIU UTILITY TO CREATE PROGRESS NOTE
"RTN","KNRFHU6",28,0)
 S TITLE=263,(NOASF,VDT,VLOC,VSIT,SUPPRESS,VSTR)="" ;SET NOTE TITLE IEN AND SET NOT REQUIRED VARIABLES TO ""
"RTN","KNRFHU6",29,0)
 I '$D(DUZ(0)) S DUZ(0)=$P(^VA(200,DUZ,0),"^",4) ;IF NO FM ACCESS CODE DEFINED GET IT
"RTN","KNRFHU6",30,0)
 D MAKE^TIUSRVP(.DOC,DFN,TITLE,VDT,VLOC,VSIT,.TIUX,VSTR,SUPPRESS,NOASF)
"RTN","KNRFHU6",31,0)
 I '+DOC S RESULT=0_"^"_"NOTE NOT CREATED" ;RETURNS ZERO AND FAILURE MESSAGE
"RTN","KNRFHU6",32,0)
 I +DOC S RESULT=DOC_"^"_"UNSIGNED NOTE CREATED, SIGN IN CPRS" ;RETURNS DOC IEN AND MESSAGE
"RTN","KNRFHU6",33,0)
 K TITLE,DFN,NOASF,TIUX,KNRDIS,KNR0,KNRV,CNT,VDT,VLOC,VSIT,VSTR,SUPPRESS Q
"RTN","KNRFHU7")
0^8^B4348219
"RTN","KNRFHU7",1,0)
KNRFHU7 ;KNR INC/GLD - FAMILY HISTORY UTILITIES; 8-1-15
"RTN","KNRFHU7",2,0)
 ;;1.0;FAMILY HISTORY INNOVATION PROJECT;****; 8-1-15;Build 3
"RTN","KNRFHU7",3,0)
 ;THIS UTILITY RETURNS AN ARRAY CONTAINING THE FIELD NUMBER AND NAME OF EACH FIELD IN EACH FAMILY HISTORY FILE TO
"RTN","KNRFHU7",4,0)
 ;FACILITATE EDITING THOSE FIELDS USING THE CPRS GUI.
"RTN","KNRFHU7",5,0)
PAT(RESULT) ;LOOPS THROUGH THE ^DD(500003 GLOBAL AND CREATES A RESULT ARRAY CONTAINING FIELD NUMBER AND NAME OF EACH FIELD.
"RTN","KNRFHU7",6,0)
 ;NO INPUT VARIABLES ARE REQUIRED.
"RTN","KNRFHU7",7,0)
 N KNRFLD,KNRCNT,KNRFLDN ;NEW VARIABLES
"RTN","KNRFHU7",8,0)
 S (KNRCNT,KNRFLD)=0 F  S KNRFLD=$O(^DD(500003,KNRFLD)) G:KNRFLD'>0 CLEAN D  ;LOOP THROUGH FIELDS IN DD GLOBAL
"RTN","KNRFHU7",9,0)
 . S KNRFLDN=$P(^DD(500003,KNRFLD,0),U,1) ;GET FIELD NAME
"RTN","KNRFHU7",10,0)
 . S KNRCNT=KNRCNT+1,RESULT(KNRCNT)=KNRFLDN_U_KNRFLD Q  ;SET RESULT ARRAY TO FIELD NUMBER AND FIELD NAME.
"RTN","KNRFHU7",11,0)
CLEAN K KNRFLD,KNRCNT,KNRFLDN Q  ;CLEAN VARIABLES AND QUIT
"RTN","KNRFHU7",12,0)
REL(RESULT) ;LOOPS THROUGH THE ^DD(500015 GLOBAL AND CREATES A RESULT ARRAY CONTAINING FIELD NUMBER AND NAME OF EACH FIELD.
"RTN","KNRFHU7",13,0)
 ;NO INPUT VARIABLES ARE REQUIRED.
"RTN","KNRFHU7",14,0)
 N KNRFLD,KNRCNT,KNRFLDN ;NEW VARIABLES
"RTN","KNRFHU7",15,0)
 S (KNRCNT,KNRFLD)=0 F  S KNRFLD=$O(^DD(500015,KNRFLD)) G:KNRFLD'>0 CLEAN2 D  ;LOOP THROUGH FIELDS IN DD GLOBAL
"RTN","KNRFHU7",16,0)
 . S KNRFLDN=$P(^DD(500015,KNRFLD,0),U,1) ;GET FIELD NAME
"RTN","KNRFHU7",17,0)
 . S KNRCNT=KNRCNT+1,RESULT(KNRCNT)=KNRFLDN_U_KNRFLD Q  ;SET RESULT ARRAY TO FIELD NUMBER AND FIELD NAME.
"RTN","KNRFHU7",18,0)
CLEAN2 K KNRFLD,KNRCNT,KNRFLDN Q  ;CLEAN VARIABLES AND QUIT
"RTN","KNRFHU7",19,0)
DIS(RESULT) ;LOOPS THROUGH THE ^DD(500017 GLOBAL AND CREATES A RESULT ARRAY CONTAINING FIELD NUMBER AND NAME OF EACH FIELD.
"RTN","KNRFHU7",20,0)
 ;NO INPUT VARIABLES ARE REQUIRED.
"RTN","KNRFHU7",21,0)
 N KNRFLD,KNRCNT,KNRFLDN ;NEW VARIABLES
"RTN","KNRFHU7",22,0)
 S (KNRCNT,KNRFLD)=0 F  S KNRFLD=$O(^DD(500017,KNRFLD)) G:KNRFLD'>0 CLEAN3 D  ;LOOP THROUGH FIELDS IN DD GLOBAL
"RTN","KNRFHU7",23,0)
 . S KNRFLDN=$P(^DD(500017,KNRFLD,0),U,1) ;GET FIELD NAME
"RTN","KNRFHU7",24,0)
 . S KNRCNT=KNRCNT+1,RESULT(KNRCNT)=KNRFLDN_U_KNRFLD Q  ;SET RESULT ARRAY TO FIELD NUMBER AND FIELD NAME.
"RTN","KNRFHU7",25,0)
CLEAN3 K KNRFLD,KNRCNT,KNRFLDN Q  ;CLEAN VARIABLES AND QUIT
"RTN","KNRFHU8")
0^9^B1211105
"RTN","KNRFHU8",1,0)
KNRFHU8 ;KNR INC/GLD - FAMILY HISTORY UTILITIES; 8-21-15 ; 21 AUGUST 8:00 PM
"RTN","KNRFHU8",2,0)
 ;;1.0;FAMILY HISORY INNOVATION PROJECT;****; 8-21-15;Build 3
"RTN","KNRFHU8",3,0)
 ;THIS ROUTINE REUSES CODE PRINT FH DATA TO A DESIGNATED PRINTER
"RTN","KNRFHU8",4,0)
 ;THE NAME OF THE DEVICE AS IT APPEARS IN THE VISTA DEVICE FILE MUST BE PROVIDED ALONG WITH THE DFN OF THE PATIENT
"RTN","KNRFHU8",5,0)
PRT(RESULT,DFN,ION,DUZ) ;FIRST VARIABLE PASSED "RESULT" SHOULD BE REMOVED FOR TESTING IN PROGRAMMER MODE. 
"RTN","KNRFHU8",6,0)
 ;DFN IS THE PATIENT IEN.IF NOT SUCCESSFUL RESULT=0 WILL BE RETURNED.  IF SUCCESSFUL RESULT WILL EQUAL THE TASK NUMBER
"RTN","KNRFHU8",7,0)
 ;DUZ IS THE USER IEN.
"RTN","KNRFHU8",8,0)
 I '$D(^KNR(500003,DFN,0)) S RESULT=0 Q  ;IF NO FH ENTRY FOR PATIENT INDICATE FAILURE AND QUIT.
"RTN","KNRFHU8",9,0)
TASK ;TASK PRINT JOB
"RTN","KNRFHU8",10,0)
 S ZTRTN="START^KNRFHU8",ZTDESC="FAMILY HISTORY TOOL PRINT",ZTIO=ION,ZTSAVE("DFN")=""
"RTN","KNRFHU8",11,0)
 D NOW^%DTC S ZTDTH=% ;SET TIME FOR TASK TO NOW
"RTN","KNRFHU8",12,0)
 D ^%ZTLOAD
"RTN","KNRFHU8",13,0)
 I $D(ZTSK) S RESULT=1_U_ZTSK_U_" PRINT QUEUED"
"RTN","KNRFHU8",14,0)
 I '$D(ZTSK) S RESULT=0_U_" TASK REJECTED"
"RTN","KNRFHU8",15,0)
 Q
"RTN","KNRFHU8",16,0)
START ;CREATE TEXT LINES FROM PATIENT ENTRY
"RTN","KNRFHU8",17,0)
 S CNT=0,PAGE=0 ;BEGIN LINE COUNT AND PAGE NUMBER AT ZERO
"RTN","KNRFHU9")
0^10^B3797676
"RTN","KNRFHU9",1,0)
KNRFHU9 ;KNR INC/GLD - FAMILY HISTORY UTILITIES; 8-27-15
"RTN","KNRFHU9",2,0)
 ;;1.0;FAMILY HISTORY INNOVATION PROJECT;****;8-27-15;Build 3
"RTN","KNRFHU9",3,0)
GETDDR(RESULT,DFN) ;GET DOCUMENTATION DEFERRED REASON IF ANY.  REMOVE RESULT VARIABLE IN THIS LINE FOR TESTING IN DIRECT MODE
"RTN","KNRFHU9",4,0)
 ;DOCUMENTATION DEFERRED REASON WILL BE IGNORED IF THE FH TOOL CONTAINS DATA/RELATIVE ENTRIES
"RTN","KNRFHU9",5,0)
 I '$D(^KNR(500003,DFN)) S RESULT=0_U_"NO FH DATA AVAILABLE ON THIS PATIENT" Q  ;QUIT IF PATIENT HAS NO ENTRY/DATA IN FH TOOL
"RTN","KNRFHU9",6,0)
 I $P(^KNR(500003,DFN,0),U,4)="" S RESULT=0_U_"NO DOCUMENTATION DEFERRED REASON" Q  ;QUIT IF PATIENT HAS NOT DOCUMENTATION DEFERRED REASON
"RTN","KNRFHU9",7,0)
 I $D(^KNR(500015,"C",DFN)) S RESULT=0_U_"PATIENT HAS RELATIVE ENTRIES IN FH TOOL" Q  ;QUIT IF PATIENT HAS RELATIVE ENTRIES IN THE FH TOOL
"RTN","KNRFHU9",8,0)
 S KNRDEFR=$P(^KNR(500003,DFN,0),U,4) ;SET VARIABLE TO CODE FOR DOCUMENTATION DEFERRED REASON
"RTN","KNRFHU9",9,0)
 I KNRDEFR="U" S RESULT=1_U_"UNABLE TO COLLECT FROM PATIENT OR GUARDIAN"_U_"U" Q  ;SET RESULT AND QUIT
"RTN","KNRFHU9",10,0)
 I KNRDEFR="R" S RESULT=1_U_"PATIENT DECLINED TO PROVIDE FAMILY HISTORY"_U_"R" Q  ;SET RESULT AND QUIT
"RTN","KNRFHU9",11,0)
 I KNRDEFR="L" S RESULT=1_U_"LIMITED LIFE EXPECTANCY"_U_"L" Q  ;SET RESULT AND QUIT
"RTN","KNRFHU9",12,0)
 I KNRDEFR="D" S RESULT=1_U_"DEFERRED TO LATER VISIT"_U_"D" Q  ;SET RESULT AND QUIT
"RTN","KNRFHU9",13,0)
CLEAN K KNRDEFR Q
"SEC","^DIC",500003,500003,0,"AUDIT")
@
"SEC","^DIC",500003,500003,0,"DD")
@
"SEC","^DIC",500003,500003,0,"DEL")
@
"SEC","^DIC",500005,500005,0,"AUDIT")
@
"SEC","^DIC",500005,500005,0,"DD")
@
"SEC","^DIC",500005,500005,0,"DEL")
@
"SEC","^DIC",500005,500005,0,"LAYGO")
@
"SEC","^DIC",500005,500005,0,"RD")
@
"SEC","^DIC",500005,500005,0,"WR")
@
"SEC","^DIC",500007,500007,0,"AUDIT")
@
"SEC","^DIC",500007,500007,0,"DD")
@
"SEC","^DIC",500007,500007,0,"DEL")
@
"SEC","^DIC",500007,500007,0,"LAYGO")
@
"SEC","^DIC",500007,500007,0,"RD")
@
"SEC","^DIC",500007,500007,0,"WR")
@
"SEC","^DIC",500009,500009,0,"AUDIT")
@
"SEC","^DIC",500009,500009,0,"DD")
@
"SEC","^DIC",500009,500009,0,"DEL")
@
"SEC","^DIC",500009,500009,0,"LAYGO")
@
"SEC","^DIC",500009,500009,0,"RD")
@
"SEC","^DIC",500009,500009,0,"WR")
@
"SEC","^DIC",500011,500011,0,"AUDIT")
@
"SEC","^DIC",500011,500011,0,"DD")
@
"SEC","^DIC",500011,500011,0,"DEL")
@
"SEC","^DIC",500011,500011,0,"LAYGO")
@
"SEC","^DIC",500011,500011,0,"RD")
@
"SEC","^DIC",500011,500011,0,"WR")
@
"SEC","^DIC",500013,500013,0,"AUDIT")
@
"SEC","^DIC",500013,500013,0,"DD")
@
"SEC","^DIC",500013,500013,0,"DEL")
@
"SEC","^DIC",500013,500013,0,"LAYGO")
@
"SEC","^DIC",500013,500013,0,"RD")
@
"SEC","^DIC",500013,500013,0,"WR")
@
"SEC","^DIC",500015,500015,0,"AUDIT")
@
"SEC","^DIC",500015,500015,0,"DD")
@
"SEC","^DIC",500015,500015,0,"DEL")
@
"SEC","^DIC",500017,500017,0,"AUDIT")
@
"SEC","^DIC",500017,500017,0,"DD")
@
"SEC","^DIC",500017,500017,0,"DEL")
@
"SEC","^DIC",500019,500019,0,"AUDIT")
@
"SEC","^DIC",500019,500019,0,"DD")
@
"SEC","^DIC",500019,500019,0,"DEL")
@
"SEC","^DIC",500019,500019,0,"LAYGO")
@
"SEC","^DIC",500019,500019,0,"RD")
@
"SEC","^DIC",500019,500019,0,"WR")
@
"VER")
8.0^22.0
"^DD",500003,500003,0)
FIELD^^9^10
"^DD",500003,500003,0,"DDA")
N
"^DD",500003,500003,0,"DT")
3150628
"^DD",500003,500003,0,"IX","B",500003,.01)

"^DD",500003,500003,0,"NM","KNR FAMILY HISTORY")

"^DD",500003,500003,0,"PT",500015,8)

"^DD",500003,500003,.01,0)
PATIENT^RP2'XI^DPT(^0;1^S DINUM=X Q
"^DD",500003,500003,.01,.1)
PATIENT NAME
"^DD",500003,500003,.01,1,0)
^.1
"^DD",500003,500003,.01,1,1,0)
500003^B
"^DD",500003,500003,.01,1,1,1)
S ^KNR(500003,"B",$E(X,1,30),DA)=""
"^DD",500003,500003,.01,1,1,2)
K ^KNR(500003,"B",$E(X,1,30),DA)
"^DD",500003,500003,.01,3)
ENTER PATIENT NAME SSN OR INITIAL AND LAST 4 OF SSN
"^DD",500003,500003,.01,21,0)
^.001^1^1^3150518^^^^
"^DD",500003,500003,.01,21,1,0)
POINTER TO PATIENT FILE.  FILE IS DINUMED ON PATIENT IEN.
"^DD",500003,500003,.01,"DT")
3150518
"^DD",500003,500003,1,0)
DATE ENTERED^DI^^0;2^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",500003,500003,1,3)
ENTER DATE ENTRY WAS CREATED
"^DD",500003,500003,1,21,0)
^^1^1^3150213^
"^DD",500003,500003,1,21,1,0)
DATE FAMILY HISTORY WAS CREATED FOR THIS PATIENT.
"^DD",500003,500003,1,"DT")
3150518
"^DD",500003,500003,2,0)
ORIGINATOR^P200'I^VA(200,^0;3^Q
"^DD",500003,500003,2,3)
ENTER USER WHO CREATED ENTRY
"^DD",500003,500003,2,21,0)
^^1^1^3150213^
"^DD",500003,500003,2,21,1,0)
USER THAT FIRST ENTERED A FAMILY HISTORY ON THIS PATIENT.
"^DD",500003,500003,2,"DT")
3150518
"^DD",500003,500003,3,0)
DOCUMENTATION DEFERRED^Sa^U:UNABLE TO COLLECT FROM PATIENT OR GUARDIAN;R:PATIENT DECLINED TO PROVIDE FAMILY HISTORY;L:LIMITED LIFE EXPECTANCY;D:DEFERRED TO LATER VISIT;^0;4^Q
"^DD",500003,500003,3,3)
SELECT REASON FOR NOT ENTERING FAMILY HISTORY AT THIS TIME
"^DD",500003,500003,3,21,0)
^.001^1^1^3150628^^^^
"^DD",500003,500003,3,21,1,0)
REASON FOR NOT DOCUMENTING FAMILY HISTORY AT THIS TIME
"^DD",500003,500003,3,"AUDIT")
y
"^DD",500003,500003,3,"DT")
3150628
"^DD",500003,500003,4,0)
DATE LAST UPDATED^Da^^0;5^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",500003,500003,4,3)
ENTER DATE OF LAST FAMILY HISTORY UPDATE
"^DD",500003,500003,4,21,0)
^^1^1^3150213^
"^DD",500003,500003,4,21,1,0)
DATE OF MOST RECENT FAMILY HISTORY UPDATE.
"^DD",500003,500003,4,"AUDIT")
y
"^DD",500003,500003,4,"DT")
3150518
"^DD",500003,500003,5,0)
JEWISH ANCESTRY^Sa^Y:YES MATERNAL AND PATERNAL;N:NO;U:UNKNOWN;D:DECLINED TO ANSWER;P:YES PATERNAL ONLY;M:YES MATERNAL ONLY;^0;6^Q
"^DD",500003,500003,5,3)
ENTER Y IF MATERNAL AND PATERNAL, N FOR NO, U FOR UNKNOWN, P FOR PATERNAL OR M FOR MATERNAL
"^DD",500003,500003,5,21,0)
^.001^1^1^3150617^^^^
"^DD",500003,500003,5,21,1,0)
PATIENT'S RESPONSE TO QUESTION CONCERNING JEWISH ANCESTRY
"^DD",500003,500003,5,"AUDIT")
y
"^DD",500003,500003,5,"DT")
3150617
"^DD",500003,500003,6,0)
COMMENT^Fa^^0;7^K:$L(X)>80!($L(X)<2) X
"^DD",500003,500003,6,3)
Answer must be 2-80 characters in length.
"^DD",500003,500003,6,21,0)
^^1^1^3150213^
"^DD",500003,500003,6,21,1,0)
COMMENT CONCERNING PATIENT.
"^DD",500003,500003,6,"AUDIT")
y
"^DD",500003,500003,6,"DT")
3150518
"^DD",500003,500003,7,0)
LAST UPDATED BY^P200'a^VA(200,^0;8^Q
"^DD",500003,500003,7,3)
ENTER USER PERFORMING MOST RECENT UPDATE OF FAMILY HISTORY
"^DD",500003,500003,7,21,0)
^^1^1^3150213^
"^DD",500003,500003,7,21,1,0)
USER PERFORMING MOST RECENT UPDATE OF FAMILY HISTORY.
"^DD",500003,500003,7,"AUDIT")
y
"^DD",500003,500003,7,"DT")
3150518
"^DD",500003,500003,8,0)
RACE^P500005'a^KNR(500005,^0;9^Q
"^DD",500003,500003,8,3)
ENTER RACE OF PATIENT
"^DD",500003,500003,8,21,0)
^^1^1^3150215^
"^DD",500003,500003,8,21,1,0)
POINTER TO KNR FH RACE FILE.
"^DD",500003,500003,8,"AUDIT")
y
"^DD",500003,500003,8,"DT")
3150518
"^DD",500003,500003,9,0)
ETHNICITY^P500007'a^KNR(500007,^0;10^Q
"^DD",500003,500003,9,3)
ENTER PATIENT ETHNICITY
"^DD",500003,500003,9,"AUDIT")
y
"^DD",500003,500003,9,"DT")
3150518
"^DD",500005,500005,0)
FIELD^^.01^1
"^DD",500005,500005,0,"DT")
3150213
"^DD",500005,500005,0,"IX","B",500005,.01)

"^DD",500005,500005,0,"NM","KNR FH RACE")

"^DD",500005,500005,0,"PT",500003,8)

"^DD",500005,500005,0,"PT",500015,9)

"^DD",500005,500005,.01,0)
RACE NAME^RF^^0;1^K:$L(X)>40!($L(X)<3)!'(X'?1P.E) X
"^DD",500005,500005,.01,1,0)
^.1
"^DD",500005,500005,.01,1,1,0)
500005^B
"^DD",500005,500005,.01,1,1,1)
S ^KNR(500005,"B",$E(X,1,30),DA)=""
"^DD",500005,500005,.01,1,1,2)
K ^KNR(500005,"B",$E(X,1,30),DA)
"^DD",500005,500005,.01,3)
Answer must be 3-40 characters in length.
"^DD",500005,500005,.01,21,0)
^.001^1^1^3150213^^
"^DD",500005,500005,.01,21,1,0)
RACE NAME TO BE DISPLAYED IN FAMILY HISTORY TOOL
"^DD",500005,500005,.01,"DT")
3150213
"^DD",500007,500007,0)
FIELD^^.01^1
"^DD",500007,500007,0,"DDA")
N
"^DD",500007,500007,0,"IX","B",500007,.01)

"^DD",500007,500007,0,"NM","KNR FH ETHNICITY")

"^DD",500007,500007,0,"PT",500003,9)

"^DD",500007,500007,0,"PT",500015,10)

"^DD",500007,500007,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",500007,500007,.01,1,0)
^.1
"^DD",500007,500007,.01,1,1,0)
500007^B
"^DD",500007,500007,.01,1,1,1)
S ^KNR(500007,"B",$E(X,1,30),DA)=""
"^DD",500007,500007,.01,1,1,2)
K ^KNR(500007,"B",$E(X,1,30),DA)
"^DD",500007,500007,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",500009,500009,0)
FIELD^^.01^1
"^DD",500009,500009,0,"DDA")
N
"^DD",500009,500009,0,"DT")
3150213
"^DD",500009,500009,0,"IX","B",500009,.01)

"^DD",500009,500009,0,"NM","KNR FH DISEASE GROUP")

"^DD",500009,500009,0,"PT",500011.02,.01)

"^DD",500009,500009,.01,0)
NAME^RF^^0;1^K:$L(X)>40!($L(X)<3)!'(X'?1P.E) X
"^DD",500009,500009,.01,1,0)
^.1
"^DD",500009,500009,.01,1,1,0)
500009^B
"^DD",500009,500009,.01,1,1,1)
S ^KNR(500009,"B",$E(X,1,30),DA)=""
"^DD",500009,500009,.01,1,1,2)
K ^KNR(500009,"B",$E(X,1,30),DA)
"^DD",500009,500009,.01,3)
Answer must be 3-40 characters in length.
"^DD",500009,500009,.01,"DT")
3150213
"^DD",500011,500011,0)
FIELD^^2^3
"^DD",500011,500011,0,"DDA")
N
"^DD",500011,500011,0,"DT")
3150213
"^DD",500011,500011,0,"IX","B",500011,.01)

"^DD",500011,500011,0,"IX","C",500011.02,.01)

"^DD",500011,500011,0,"NM","KNR FH HERITABLE DISEASES/CONDITIONS")

"^DD",500011,500011,0,"PT",500017,2)

"^DD",500011,500011,.01,0)
NAME^RF^^0;1^K:$L(X)>40!($L(X)<3)!'(X'?1P.E) X
"^DD",500011,500011,.01,1,0)
^.1
"^DD",500011,500011,.01,1,1,0)
500011^B
"^DD",500011,500011,.01,1,1,1)
S ^KNR(500011,"B",$E(X,1,30),DA)=""
"^DD",500011,500011,.01,1,1,2)
K ^KNR(500011,"B",$E(X,1,30),DA)
"^DD",500011,500011,.01,3)
Answer must be 3-40 characters in length.
"^DD",500011,500011,.01,21,0)
^^1^1^3150213^
"^DD",500011,500011,.01,21,1,0)
NAME OF HERITABLE DISEASE OR CONDITION FOR USE IN THE FAMILY HISTORY TOOL.
"^DD",500011,500011,.01,"DT")
3150213
"^DD",500011,500011,1,0)
DESCRIPTION^F^^0;2^K:$L(X)>80!($L(X)<3) X
"^DD",500011,500011,1,3)
Answer must be 3-80 characters in length.
"^DD",500011,500011,1,21,0)
^^1^1^3150213^
"^DD",500011,500011,1,21,1,0)
MORE DETAILED DESCRIPTION OF THE DISEASE
"^DD",500011,500011,1,"DT")
3150213
"^DD",500011,500011,2,0)
DISEASE GROUP^500011.02P^^1;0
"^DD",500011,500011.02,0)
DISEASE GROUP SUB-FIELD^^.01^1
"^DD",500011,500011.02,0,"DT")
3150213
"^DD",500011,500011.02,0,"IX","B",500011.02,.01)

"^DD",500011,500011.02,0,"NM","DISEASE GROUP")

"^DD",500011,500011.02,0,"UP")
500011
"^DD",500011,500011.02,.01,0)
DISEASE GROUP^MP500009'^KNR(500009,^0;1^Q
"^DD",500011,500011.02,.01,1,0)
^.1
"^DD",500011,500011.02,.01,1,1,0)
500011.02^B
"^DD",500011,500011.02,.01,1,1,1)
S ^KNR(500011,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",500011,500011.02,.01,1,1,2)
K ^KNR(500011,DA(1),1,"B",$E(X,1,30),DA)
"^DD",500011,500011.02,.01,1,2,0)
500011^C
"^DD",500011,500011.02,.01,1,2,1)
S ^KNR(500011,"C",$E(X,1,30),DA(1),DA)=""
"^DD",500011,500011.02,.01,1,2,2)
K ^KNR(500011,"C",$E(X,1,30),DA(1),DA)
"^DD",500011,500011.02,.01,1,2,"DT")
3150215
"^DD",500011,500011.02,.01,3)
ENTER THE GROUPS THIS DISEASE SHOULD BE DISPLAYED WITH
"^DD",500011,500011.02,.01,21,0)
^^2^2^3150213^
"^DD",500011,500011.02,.01,21,1,0)
GROUPS THIS DISEASE WILL BE DISPLAYED WITH IN CPRS WHEN THAT GROUP IS 
"^DD",500011,500011.02,.01,21,2,0)
SELECTED BY THE USER.
"^DD",500011,500011.02,.01,"DT")
3150215
"^DD",500013,500013,0)
FIELD^^2^3
"^DD",500013,500013,0,"DDA")
N
"^DD",500013,500013,0,"DT")
3150609
"^DD",500013,500013,0,"IX","AC",500013,2)

"^DD",500013,500013,0,"IX","B",500013,.01)

"^DD",500013,500013,0,"NM","KNR FH RELATIONSHIP")

"^DD",500013,500013,0,"PT",500015,2)

"^DD",500013,500013,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",500013,500013,.01,1,0)
^.1
"^DD",500013,500013,.01,1,1,0)
500013^B
"^DD",500013,500013,.01,1,1,1)
S ^KNR(500013,"B",$E(X,1,30),DA)=""
"^DD",500013,500013,.01,1,1,2)
K ^KNR(500013,"B",$E(X,1,30),DA)
"^DD",500013,500013,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DD",500013,500013,1,0)
DEGREE^S^F:FIRST;S:SECOND;^0;2^Q
"^DD",500013,500013,1,3)
ENTER DEGREE OF RELATIONSHIP TO PATIENT
"^DD",500013,500013,1,"DT")
3150214
"^DD",500013,500013,2,0)
DISPLAY ORDER^NJ5,1^^0;3^K:+X'=X!(X>999)!(X<0)!(X?.E1"."2N.N) X
"^DD",500013,500013,2,1,0)
^.1
"^DD",500013,500013,2,1,1,0)
500013^AC
"^DD",500013,500013,2,1,1,1)
S ^KNR(500013,"AC",$E(X,1,30),DA)=""
"^DD",500013,500013,2,1,1,2)
K ^KNR(500013,"AC",$E(X,1,30),DA)
"^DD",500013,500013,2,1,1,3)
DO NOT DELETE. USED TO DETERMINE DISPLAY ORDER IN FH TOOL.
"^DD",500013,500013,2,1,1,"DT")
3150609
"^DD",500013,500013,2,3)
Type a number between 0 and 999, 1 decimal digit.
"^DD",500013,500013,2,21,0)
^^2^2^3150609^
"^DD",500013,500013,2,21,1,0)
NUMBER THAT DETERMINES THE ORDER IN WHICH RELATIONSHIPS ARE DISPLAYED IN 
"^DD",500013,500013,2,21,2,0)
THE FAMILY HISTORY TOOL.
"^DD",500013,500013,2,"DT")
3150609
"^DD",500015,500015,0)
FIELD^^11^12
"^DD",500015,500015,0,"DDA")
N
"^DD",500015,500015,0,"DT")
3150423
"^DD",500015,500015,0,"IX","B",500015,.01)

"^DD",500015,500015,0,"IX","C",500015,8)

"^DD",500015,500015,0,"NM","KNR RELATIVE")

"^DD",500015,500015,0,"PT",500017,.5)

"^DD",500015,500015,.01,0)
ENTRY NUMBER^RFI^^0;1^K:$L(X)>30!($L(X)<3)!'(X?2A.N) X
"^DD",500015,500015,.01,1,0)
^.1
"^DD",500015,500015,.01,1,1,0)
500015^B
"^DD",500015,500015,.01,1,1,1)
S ^KNR(500015,"B",$E(X,1,30),DA)=""
"^DD",500015,500015,.01,1,1,2)
K ^KNR(500015,"B",$E(X,1,30),DA)
"^DD",500015,500015,.01,3)
CREATED BY FH TOOL.  DO NOT EDIT.
"^DD",500015,500015,.01,21,0)
^.001^4^4^3150215^^
"^DD",500015,500015,.01,21,1,0)
ENTRY NUMBER IS CALCULATED AT THE TIME EACH ENTRY IS CREATED BY ADDING 
"^DD",500015,500015,.01,21,2,0)
ONE TO THE MOST RECENT ENTRY NUMBER AND PLACING "FH" IN FRONT OF THAT 
"^DD",500015,500015,.01,21,3,0)
NUMBER. THE ZERO NODE OF THE FILE IS LOCKED A THE BEGINNING AND UNLOCKED
"^DD",500015,500015,.01,21,4,0)
AT THE END OF THE ENTRY CREATION PROCESS.
"^DD",500015,500015,.01,"DT")
3150518
"^DD",500015,500015,1,0)
FIRST NAME OF RELATIVE^RFa^^0;2^K:$L(X)>30!($L(X)<1) X
"^DD",500015,500015,1,3)
Answer must be 1-30 characters in length.
"^DD",500015,500015,1,21,0)
^^1^1^3150214^
"^DD",500015,500015,1,21,1,0)
FIRST NAME, NICK NAME PROVIDED BY PATIENT TO IDENTIFY THIS RELATIVE.
"^DD",500015,500015,1,"AUDIT")
y
"^DD",500015,500015,1,"DT")
3150518
"^DD",500015,500015,2,0)
RELATIONSHIP^RP500013'a^KNR(500013,^0;3^Q
"^DD",500015,500015,2,1,0)
^.1^^0
"^DD",500015,500015,2,3)
ENTER RELATIONSHIP TO THE PATIENT
"^DD",500015,500015,2,21,0)
^^2^2^3150214^
"^DD",500015,500015,2,21,1,0)
RELATIONSHIP BETWEEN THE PATIENT AND THIS RELATIVE.  I.E. UNCLE, SON, 
"^DD",500015,500015,2,21,2,0)
DAUGHTER, FATHER ETC.
"^DD",500015,500015,2,"AUDIT")
y
"^DD",500015,500015,2,"DT")
3150518
"^DD",500015,500015,3,0)
VITAL STATUS^Sa^L:LIVING;D:DECEASED;U:UNKNOWN;^0;4^Q
"^DD",500015,500015,3,3)
ENTER VITAL STATUS OF RELATIVE, LIVING, DECEASED OR UNKNOWN.
"^DD",500015,500015,3,21,0)
^^1^1^3150214^
"^DD",500015,500015,3,21,1,0)
VITAL STATUS OF THIS RELATIVE.  LIVING, DECEASED OR UNKNOWN.
"^DD",500015,500015,3,"AUDIT")
y
"^DD",500015,500015,3,"DT")
3150518
"^DD",500015,500015,4,0)
AGE AT DEATH^P500019'a^KNR(500019,^0;5^Q
"^DD",500015,500015,4,3)
ENTER AGE RANGE 0-5, 51-56, ETC.
"^DD",500015,500015,4,21,0)
^^2^2^3150217^
"^DD",500015,500015,4,21,1,0)
POINTER TO KNR FH AGE FILE.
"^DD",500015,500015,4,21,2,0)
YEARS INCREMENTS BEGINING WITH 0-5, 6-10... 91 FOR 91+.
"^DD",500015,500015,4,"AUDIT")
y
"^DD",500015,500015,4,"DT")
3150518
"^DD",500015,500015,5,0)
COMMENT^Fa^^0;6^K:$L(X)>80!($L(X)<1) X
"^DD",500015,500015,5,3)
Answer must be 1-80 characters in length.
"^DD",500015,500015,5,21,0)
^^1^1^3150214^
"^DD",500015,500015,5,21,1,0)
COMMENT ON THIS RELATIVE.
"^DD",500015,500015,5,"AUDIT")
y
"^DD",500015,500015,5,"DT")
3150518
"^DD",500015,500015,6,0)
DATE LAST EDITED^Da^^0;7^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",500015,500015,6,3)
ENTER DATE ENTRY WAS LAST CHANGED
"^DD",500015,500015,6,21,0)
^^1^1^3150214^
"^DD",500015,500015,6,21,1,0)
SET TO DATE ENTRY WAS CREATED OR CHANGED.
"^DD",500015,500015,6,"AUDIT")
y
"^DD",500015,500015,6,"DT")
3150518
"^DD",500015,500015,7,0)
LAST EDITED BY^P200'a^VA(200,^0;8^Q
"^DD",500015,500015,7,3)
USER CREATING OR EDITING THIS RELATIVE
"^DD",500015,500015,7,21,0)
^^2^2^3150214^
"^DD",500015,500015,7,21,1,0)
POINTER TO NEW PERSON FILE ENTRY OF USER WHO LAST EDITED OR CREATED THIS 
"^DD",500015,500015,7,21,2,0)
RELATIVE ENTRY.
"^DD",500015,500015,7,"AUDIT")
y
"^DD",500015,500015,7,"DT")
3150518
"^DD",500015,500015,8,0)
FH PATIENT^P500003'aI^KNR(500003,^0;9^Q
"^DD",500015,500015,8,1,0)
^.1
"^DD",500015,500015,8,1,1,0)
500015^C
"^DD",500015,500015,8,1,1,1)
S ^KNR(500015,"C",$E(X,1,30),DA)=""
"^DD",500015,500015,8,1,1,2)
K ^KNR(500015,"C",$E(X,1,30),DA)
"^DD",500015,500015,8,1,1,"%D",0)
^^2^2^3150215^
"^DD",500015,500015,8,1,1,"%D",1,0)
FAMILY HISTORY PATENT CROSS REFERENCE.  USED TO GATHER ALL RELATIVES OF A 
"^DD",500015,500015,8,1,1,"%D",2,0)
SINGLE PATIENT.
"^DD",500015,500015,8,1,1,"DT")
3150215
"^DD",500015,500015,8,3)
POINTER TO FAMILY HISTORY PATIENT
"^DD",500015,500015,8,"AUDIT")
y
"^DD",500015,500015,8,"DT")
3150518
"^DD",500015,500015,9,0)
RACE^P500005'a^KNR(500005,^0;10^Q
"^DD",500015,500015,9,"AUDIT")
y
"^DD",500015,500015,9,"DT")
3150518
"^DD",500015,500015,10,0)
ETHNICITY^P500007'a^KNR(500007,^0;11^Q
"^DD",500015,500015,10,"AUDIT")
y
"^DD",500015,500015,10,"DT")
3150518
"^DD",500015,500015,11,0)
CURRENT AGE^NJ3,0a^^0;12^K:+X'=X!(X>199)!(X<0)!(X?.E1"."1N.N) X
"^DD",500015,500015,11,3)
Type a number between 0 and 199, 0 decimal digits.
"^DD",500015,500015,11,21,0)
^^1^1^3150423^
"^DD",500015,500015,11,21,1,0)
THE AGE OF THE RELATIVE AT THE TIME THE FAMILY HISTORY DATA IS ENTERED.
"^DD",500015,500015,11,"AUDIT")
y
"^DD",500015,500015,11,"DT")
3150518
"^DD",500017,500017,0)
FIELD^^.5^7
"^DD",500017,500017,0,"DDA")
N
"^DD",500017,500017,0,"DT")
3150217
"^DD",500017,500017,0,"IX","B",500017,.01)

"^DD",500017,500017,0,"IX","C",500017,.5)

"^DD",500017,500017,0,"NM","KNR RELATIVE DISEASES/CONDITIONS")

"^DD",500017,500017,.01,0)
ENTRY NUMBER^RFI^^0;1^K:$L(X)>30!($L(X)<3)!'(X?3A.N) X
"^DD",500017,500017,.01,1,0)
^.1
"^DD",500017,500017,.01,1,1,0)
500017^B
"^DD",500017,500017,.01,1,1,1)
S ^KNR(500017,"B",$E(X,1,30),DA)=""
"^DD",500017,500017,.01,1,1,2)
K ^KNR(500017,"B",$E(X,1,30),DA)
"^DD",500017,500017,.01,3)
AUTOMATICALLY ASSIGNED DO NOT EDIT
"^DD",500017,500017,.01,21,0)
^.001^5^5^3150215^^^
"^DD",500017,500017,.01,21,1,0)
ENTRY NUMBER CREATED WHEN FILED.  THE ENTRY NUMBER CONISTS OF THE ALPHA 
"^DD",500017,500017,.01,21,2,0)
CHARACTERS "FHD" CONCANTENATED WITH THE VALUE OF THE THIRD PIECE OF THE 
"^DD",500017,500017,.01,21,3,0)
FILE ZERO NODE (LAST IEN ASSIGNED) PLUS ONE.  THE ZERO NODE IS LOCKED 
"^DD",500017,500017,.01,21,4,0)
PRIOR TO OBTAINING THAT NUMBER AND UNLOCKED AFTER THE ENTRY HAS BEEN 
"^DD",500017,500017,.01,21,5,0)
CREATED.
"^DD",500017,500017,.01,"DT")
3150518
"^DD",500017,500017,.5,0)
RELATIVE ENTRY NUMBER^RP500015'aI^KNR(500015,^0;7^Q
"^DD",500017,500017,.5,1,0)
^.1
"^DD",500017,500017,.5,1,1,0)
500017^C
"^DD",500017,500017,.5,1,1,1)
S ^KNR(500017,"C",$E(X,1,30),DA)=""
"^DD",500017,500017,.5,1,1,2)
K ^KNR(500017,"C",$E(X,1,30),DA)
"^DD",500017,500017,.5,1,1,"DT")
3150215
"^DD",500017,500017,.5,3)
ENTER THE RELATIVE
"^DD",500017,500017,.5,21,0)
^^2^2^3150215^
"^DD",500017,500017,.5,21,1,0)
POINTER TO KNR RELATIVE FILE.  THE RELATIVE THIS DISEASE ENTRY IS 
"^DD",500017,500017,.5,21,2,0)
ASSOCIATED WITH.
"^DD",500017,500017,.5,"AUDIT")
y
"^DD",500017,500017,.5,"DT")
3150518
"^DD",500017,500017,1,0)
AGE AT DIAGNOSIS^P500019'a^KNR(500019,^0;2^Q
"^DD",500017,500017,1,3)
ENTER AGE RANGE 0-5, 51-56, ETC.
"^DD",500017,500017,1,21,0)
^.001^1^1^3150217^^
"^DD",500017,500017,1,21,1,0)
AGE OF THE RELATIVE WHEN DIAGNOSED WITH THIS DISEASE.
"^DD",500017,500017,1,"AUDIT")
y
"^DD",500017,500017,1,"DT")
3150518
"^DD",500017,500017,2,0)
DISEASE/CONDITION^RP500011'a^KNR(500011,^0;3^Q
"^DD",500017,500017,2,3)
ENTER DISEASE OR CONDITION
"^DD",500017,500017,2,21,0)
^^1^1^3150214^
"^DD",500017,500017,2,21,1,0)
POINTER TO THE KRN FH HERITABLE DISEASE/CONDITION FILE
"^DD",500017,500017,2,"AUDIT")
y
"^DD",500017,500017,2,"DT")
3150518
"^DD",500017,500017,3,0)
COMMENT^Fa^^0;4^K:$L(X)>80!($L(X)<1) X
"^DD",500017,500017,3,3)
Answer must be 1-80 characters in length.
"^DD",500017,500017,3,21,0)
^^1^1^3150214^
"^DD",500017,500017,3,21,1,0)
COMMENT ON THIS DISEASE OR CONDITION.
"^DD",500017,500017,3,"AUDIT")
y
"^DD",500017,500017,3,"DT")
3150518
"^DD",500017,500017,4,0)
DATE LAST UPDATED^Da^^0;5^S %DT="ETX" D ^%DT S X=Y K:Y<1 X
"^DD",500017,500017,4,3)
ENTER DATE LAST UPDATED OR DATE CREATED.
"^DD",500017,500017,4,21,0)
^^1^1^3150214^
"^DD",500017,500017,4,21,1,0)
DATE WHEN ENTRY WAS CREATED OR WHEN LAST UPDATED.
"^DD",500017,500017,4,"AUDIT")
y
"^DD",500017,500017,4,"DT")
3150518
"^DD",500017,500017,5,0)
LAST UPDATED BY^P200'a^VA(200,^0;6^Q
"^DD",500017,500017,5,3)
ENTER USER CREATING OR UPDATING THIS ENTRY
"^DD",500017,500017,5,21,0)
^^2^2^3150214^
"^DD",500017,500017,5,21,1,0)
POINTER TO NEW PERSON FILE ENTRY OF USER CREATING OR LAST UPDATING THIS 
"^DD",500017,500017,5,21,2,0)
ENTRY.
"^DD",500017,500017,5,"AUDIT")
y
"^DD",500017,500017,5,"DT")
3150518
"^DD",500019,500019,0)
FIELD^^.01^1
"^DD",500019,500019,0,"IX","B",500019,.01)

"^DD",500019,500019,0,"NM","KNR FH AGE")

"^DD",500019,500019,0,"PT",500015,4)

"^DD",500019,500019,0,"PT",500017,1)

"^DD",500019,500019,.01,0)
NAME^RF^^0;1^K:$L(X)>30!(X?.N)!($L(X)<3)!'(X'?1P.E) X
"^DD",500019,500019,.01,1,0)
^.1
"^DD",500019,500019,.01,1,1,0)
500019^B
"^DD",500019,500019,.01,1,1,1)
S ^KNR(500019,"B",$E(X,1,30),DA)=""
"^DD",500019,500019,.01,1,1,2)
K ^KNR(500019,"B",$E(X,1,30),DA)
"^DD",500019,500019,.01,3)
NAME MUST BE 3-30 CHARACTERS, NOT NUMERIC OR STARTING WITH PUNCTUATION
"^DIC",500003,500003,0)
KNR FAMILY HISTORY^500003
"^DIC",500003,500003,0,"GL")
^KNR(500003,
"^DIC",500003,500003,"%D",0)
^^1^1^3150214^
"^DIC",500003,500003,"%D",1,0)
THIS FILE CONTAINS PATIENT DATA COLLECTED USING THE FAMILY HISTORY TOOL.
"^DIC",500003,"B","KNR FAMILY HISTORY",500003)

"^DIC",500005,500005,0)
KNR FH RACE^500005
"^DIC",500005,500005,0,"GL")
^KNR(500005,
"^DIC",500005,"B","KNR FH RACE",500005)

"^DIC",500007,500007,0)
KNR FH ETHNICITY^500007
"^DIC",500007,500007,0,"GL")
^KNR(500007,
"^DIC",500007,500007,"%D",0)
^^1^1^3150214^
"^DIC",500007,500007,"%D",1,0)
THIS FILE CONTAINS ETHNICITIES USED BY THE KNR FAMILY HISTORY TOOL.
"^DIC",500007,"B","KNR FH ETHNICITY",500007)

"^DIC",500009,500009,0)
KNR FH DISEASE GROUP^500009
"^DIC",500009,500009,0,"GL")
^KNR(500009,
"^DIC",500009,500009,"%D",0)
^^2^2^3150214^
"^DIC",500009,500009,"%D",1,0)
THIS FILE CONTAINS EACH OF THE DISEASE GROUPS USED IN THE KNR FAMILY 
"^DIC",500009,500009,"%D",2,0)
HISTORY TOOL.
"^DIC",500009,"B","KNR FH DISEASE GROUP",500009)

"^DIC",500011,500011,0)
KNR FH HERITABLE DISEASES/CONDITIONS^500011
"^DIC",500011,500011,0,"GL")
^KNR(500011,
"^DIC",500011,500011,"%D",0)
^^2^2^3150214^
"^DIC",500011,500011,"%D",1,0)
THIS FILE CONTAINS A LISTING OF THE HERITABLE DISEASES AND CONDITIONS 
"^DIC",500011,500011,"%D",2,0)
THAT CAN BE SELECTED WHEN USING THE KNR FAMILY HISTORY TOOL.
"^DIC",500011,"B","KNR FH HERITABLE DISEASES/CONDITIONS",500011)

"^DIC",500013,500013,0)
KNR FH RELATIONSHIP^500013
"^DIC",500013,500013,0,"GL")
^KNR(500013,
"^DIC",500013,500013,"%D",0)
^^1^1^3150214^
"^DIC",500013,500013,"%D",1,0)
THIS FILE CONTAINS THE RELATIONSHIPS USED BY THE KNR FAMILY HISTORY TOOL.
"^DIC",500013,"B","KNR FH RELATIONSHIP",500013)

"^DIC",500015,500015,0)
KNR RELATIVE^500015
"^DIC",500015,500015,0,"GL")
^KNR(500015,
"^DIC",500015,500015,"%D",0)
^^1^1^3150214^
"^DIC",500015,500015,"%D",1,0)
RELATIVE ENTRIES CREATED BY THE FAMILY HISTORY TOOL.
"^DIC",500015,"B","KNR RELATIVE",500015)

"^DIC",500017,500017,0)
KNR RELATIVE DISEASES/CONDITIONS^500017
"^DIC",500017,500017,0,"GL")
^KNR(500017,
"^DIC",500017,500017,"%D",0)
^1.001^2^2^3150215^^
"^DIC",500017,500017,"%D",1,0)
THIS FILE CONTAINS HERITABLE DISEASES AND CONDITION ENTRIES CREATED BY 
"^DIC",500017,500017,"%D",2,0)
THE FAMILY HISTORY TOOL.
"^DIC",500017,"B","KNR RELATIVE DISEASES/CONDITIONS",500017)

"^DIC",500019,500019,0)
KNR FH AGE^500019
"^DIC",500019,500019,0,"GL")
^KNR(500019,
"^DIC",500019,"B","KNR FH AGE",500019)

**END**
**END**
